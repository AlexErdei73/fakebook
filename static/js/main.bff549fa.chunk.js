(this.webpackJsonpfakebook=this.webpackJsonpfakebook||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/placeholder-image.d56c1d33.jpg"},127:function(e,t,a){e.exports=a.p+"static/media/fakebook-avatar.c2424276.jpeg"},128:function(e,t,a){e.exports=a.p+"static/media/background-server.070904ee.jpg"},134:function(e,t,a){e.exports=a.p+"static/media/friends.2536911b.jpg"},139:function(e,t,a){e.exports=a(180)},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(41),l=a.n(c),o=(a(144),a(13)),s=(a(145),a(6)),i=a(25),u=a(30),m=a(99),f=a(53),d=a(57),p=a(88),b=(a(146),a(2)),E=a.n(b),h=a(35),g=a(22),v=a(4),k=a(59),j=(a(181),a(148),a(183),a(182),{apiKey:"AIzaSyA6giH2VCl9pBrO86uGH3gcwbmeM-dYMPM",authDomain:"fakebook-2df7b.firebaseapp.com",projectId:"fakebook-2df7b",storageBucket:"fakebook-2df7b.appspot.com",messagingSenderId:"1030600439600",appId:"1:1030600439600:web:98617c1d503260115cfaf5",measurementId:"G-YN35E2SN2E"}),O=a(34),x=Object(O.b)({name:"user",initialState:{id:"",isSignedIn:!1,isEmailVerified:!1,error:"",isLoading:!0},reducers:{signIn:function(e,t){e.id=t.payload.id,e.displayName=t.payload.displayName,e.isEmailVerified=t.payload.isEmailVerified,e.isSignedIn=!0},signOut:function(e){e.isSignedIn=!1},errorOccured:function(e,t){e.error=t.payload},loadingStarted:function(e){e.isLoading=!0},loadingFinished:function(e){e.isLoading=!1}}}),y=x.actions,w=y.signIn,N=y.signOut,P=y.errorOccured,S=y.loadingStarted,C=y.loadingFinished,I=x.reducer,L=Object(O.b)({name:"currentUser",initialState:{firstname:"",lastname:"",profilePictureURL:"fakebook-avatar.jpeg",backgroundPictureURL:"background-server.jpg",photos:[],posts:[],isOnline:!1},reducers:{currentUserUpdated:function(e,t){var a=t.payload,n=a.firstname,r=a.lastname,c=a.profilePictureURL,l=a.backgroundPictureURL,o=a.photos,s=a.posts,i=a.isOnline,u=a.index;e.firstname=n,e.lastname=r,e.profilePictureURL=c,e.backgroundPictureURL=l,e.isOnline=i,u&&(e.index=u),e.photos=[],e.posts=[],o.forEach((function(t){return e.photos.push(t)})),s.forEach((function(t){return e.posts.push(t)}))}}}),D=L.actions.currentUserUpdated,U=L.reducer,R=Object(O.b)({name:"users",initialState:[],reducers:{usersUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),z=R.actions.usersUpdated,F=R.reducer,H=Object(O.b)({name:"posts",initialState:[],reducers:{postsUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),T=H.actions.postsUpdated,B=H.reducer,M=Object(O.b)({name:"incomingMessages",initialState:[],reducers:{incomingMessagesUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),A=M.actions.incomingMessagesUpdated,Y=M.reducer,W=Object(O.b)({name:"outgoingMessages",initialState:[],reducers:{outgoingMessagesUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),V=W.actions.outgoingMessagesUpdated,q=W.reducer,K=Object(O.b)({name:"images",initialState:[],reducers:{imageAdded:function(e,t){-1===e.map((function(e){return e.storagePath})).indexOf(t.payload.storagePath)&&e.push(t.payload)},imageUrlFound:function(e,t){var a=e.map((function(e){return e.storagePath})).indexOf(t.payload.storagePath);a>-1&&(e[a].url=t.payload.url)}}}),G=K.actions,J=G.imageAdded,_=G.imageUrlFound,Q=K.reducer,X=Object(O.b)({name:"link",initialState:{active:"home",previous:"home"},reducers:{linkUpdated:function(e,t){e.previous=e.active,e.active=t.payload}}}),Z=X.actions.linkUpdated,$=X.reducer,ee=Object(O.b)({name:"accountPage",initialState:{profileLink:"",isWatch:!1,isFriendsListPage:!1},reducers:{profileLinkSet:function(e,t){e.profileLink=t.payload},friendsListPageSet:function(e,t){e.isFriendsListPage=t.payload},watchSet:function(e,t){e.isWatch=t.payload}}}),te=ee.actions,ae=te.profileLinkSet,ne=te.friendsListPageSet,re=te.watchSet,ce=ee.reducer,le=Object(O.a)({reducer:{user:I,currentUser:U,users:F,posts:B,incomingMessages:Y,outgoingMessages:q,images:Q,link:$,accountPage:ce}}),oe=["timestamp"],se={url:"https://alexerdei73.github.io/fakebook/"};k.a.initializeApp(j),k.a.appCheck().activate("6LfCG9UhAAAAAL8vSI4Hbustx8baJEDMA0Sz1zD2",!0);var ie=k.a.storage();function ue(e){return me.apply(this,arguments)}function me(){return(me=Object(v.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ie.ref(t),e.next=3,a.getDownloadURL();case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=k.a.auth();var de,pe,be=k.a.firestore(),Ee=be.collection("users");function he(){pe.update({isOnline:!0})}function ge(){return pe.update({isOnline:!1})}function ve(){return(ve=Object(v.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return le.dispatch(S()),e.next=3,ge();case 3:return e.next=5,fe.signOut();case 5:le.dispatch(C());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){var t,a;return"incoming"===e?(t="recipient",a=A):(t="sender",a=V),be.collection("messages").where(t,"==",de).onSnapshot((function(e){var t=[];e.forEach((function(e){var a,n=e.data(),r=e.data().timestamp;a=r?r.toDate().toISOString():"",n.timestamp=a,n.id=e.id,""!==a&&t.push(n)})),le.dispatch(a(t))}))}function je(){return(je=Object(v.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe.createUserWithEmailAndPassword(t.email,t.password);case 3:return a=e.sent,e.next=6,a.user.updateProfile({displayName:"".concat(t.firstname," ").concat(t.lastname)});case 6:return e.next=8,be.collection("users").where("firstname","==",t.firstname).where("lastname","==",t.lastname).get();case 8:return n=e.sent,r=n.size,e.next=12,be.collection("users").doc(a.user.uid).set({firstname:t.firstname,lastname:t.lastname,profilePictureURL:"fakebook-avatar.jpeg",backgroundPictureURL:"background-server.jpg",photos:[],posts:[],isOnline:!1,index:r});case 12:return e.next=14,k.a.auth().signOut();case 14:return e.next=16,a.user.sendEmailVerification(se);case 16:console.log("Verification email has been sent."),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),le.dispatch(P(e.t0.message)),console.log(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function Oe(){return(Oe=Object(v.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="Please verify your email before to continue",n="",e.prev=2,e.next=5,fe.signInWithEmailAndPassword(t.email,t.password);case 5:e.sent.user.emailVerified?le.dispatch(P(n)):(fe.signOut(),le.dispatch(P(a))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),le.dispatch(P(e.t0.message));case 12:return e.prev=12,le.dispatch(C()),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))).apply(this,arguments)}function xe(){return(xe=Object(v.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=be.collection("posts"),e.next=3,a.add(Object(i.a)(Object(i.a)({},t),{},{timestamp:k.a.firestore.FieldValue.serverTimestamp()}));case 3:return n=e.sent,ye(n.id),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){var t,a=le.getState().currentUser;(t=a.posts?Object(g.a)(a.posts):[]).unshift(e),pe.update({posts:t})}function we(e,t){var a=be.collection("posts").doc(t),n=(e.timestamp,Object(h.a)(e,oe));a.update(n)}function Ne(e){return console.log(pe),console.log(e),pe.update(e)}var Pe=be.collection("messages");var Se=function(e){var t=e.show,a=e.onHide,c=e.onExit,l=Object(n.useState)({firstname:"",lastname:"",email:"",password:""}),b=Object(o.a)(l,2),E=b[0],h=b[1],g=function(e){return h(Object(i.a)(Object(i.a)({},E),{},Object(s.a)({},e.target.name,e.target.value)))},v=Object(n.useState)(!1),k=Object(o.a)(v,2),j=k[0],O=k[1],x=Object(n.useState)(!1),y=Object(o.a)(x,2),w=y[0],N=y[1];return Object(n.useEffect)((function(){w&&a()}),[w,a]),r.a.createElement(p.a,{show:t,onHide:a,onExited:c},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Sign Up"),r.a.createElement("div",{className:"title-footer"},"It's quick and easy."))),r.a.createElement(p.a.Body,null,r.a.createElement(u.a,{noValidate:!0,validated:j,onSubmit:function(e){e.preventDefault(),!0===e.currentTarget.checkValidity()&&(!function(e){je.apply(this,arguments)}({firstname:E.firstname,lastname:E.lastname,email:E.email,password:E.password}),N(!0)),O(!0)}},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"First name",name:"firstname",onChange:g,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"First name required.")),r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"Surename",name:"lastname",onChange:g,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Last name required."))),r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"email",placeholder:"Email address",name:"email",onChange:g,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Email required in the right format."))),r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"New password",name:"password",onChange:g,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Password required."))),r.a.createElement(u.a.Row,null,r.a.createElement("p",{className:"text-muted p-1 text-legal"},"Signing Up for fakebook you agree to share the uploaded details with any other user. Please do not upload any sensitive data to the app, which is built strictly for demonstration purposes.")),r.a.createElement(m.a,null,r.a.createElement(d.a,{type:"submit",variant:"success",className:"w-50 mx-auto"},r.a.createElement("strong",null,"Sign Up"))))))},Ce=a(18),Ie=function(e){var t=e.onClickForgottenPswd,a=Object(n.useState)({email:"",password:""}),c=Object(o.a)(a,2),l=c[0],s=c[1],m=function(e){var t=Object(i.a)({},l);t[e.target.name]=e.target.value,s(t),p(P(""))},f=Object(Ce.c)((function(e){return e.user.error})),p=Object(Ce.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),""!==l.email?""!==l.password?(p(S()),function(e){Oe.apply(this,arguments)}(l)):p(P("Password is required.")):p(P("Email is required."))},className:"w-100"},r.a.createElement(u.a.Control,{type:"email",placeholder:"Email",name:"email",size:"lg",className:"mb-2 w-100",onChange:m,isInvalid:-1!==f.indexOf("mail")||-1!==f.indexOf("identifier")}),r.a.createElement(u.a.Control,{type:"text",placeholder:"Password",name:"password",size:"lg",className:"mb-2 w-100",onChange:m,isInvalid:""!==f}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},f),r.a.createElement(d.a,{variant:"primary",type:"submit",size:"lg",className:"w-100"},r.a.createElement("b",null,"Log In"))),r.a.createElement(d.a,{variant:"link",type:"link",className:"w-100",id:"link-button",onClick:t},"Forgotten password?"))},Le=(a(158),a(159),function(){return r.a.createElement("div",{className:"recent-logins"},r.a.createElement("h1",{className:"text-primary w-100"},r.a.createElement("strong",{style:{fontSize:"3.5rem"}},"fakebook")),r.a.createElement("h3",{className:"w-100"},r.a.createElement("p",null,"Fakebook helps you connect and share with the people in your life.")))}),De=a(204),Ue=a(203),Re=a(201),ze=a(136),Fe=a(23),He=a(129),Te=a(76),Be=a(45),Me=a(108),Ae=(a(160),a(126)),Ye=a.n(Ae),We=a(127),Ve=a.n(We),qe=a(128),Ke=a.n(qe),Ge=["storagePath","alt"],Je=function(e){var t=e.storagePath,a=e.alt,c=Object(h.a)(e,Ge),l=Object(Ce.c)((function(e){return e.images})),s=Object(Ce.b)(),i=Object(n.useState)(Ye.a),u=Object(o.a)(i,2),m=u[0],f=u[1];function d(e){var t=e.split(".");return t[t.length-2]+="_400x400",t.join(".")}return Object(n.useEffect)((function(){var e=!0,a=function(){return e=!1};if("fakebook-avatar.jpeg"===t)return f(Ve.a),a;if("background-server.jpg"===t)return f(Ke.a),a;var n=l.map((function(e){return e.storagePath})).indexOf(t);if(-1===n)-1===(n=l.map((function(e){return e.storagePath})).indexOf(d(t)))&&s(J({storagePath:t,url:m})),ue(t).then((function(e){f(e),s(_({storagePath:t,url:e}))})).catch((function(e){ue(d(t)).then((function(e){f(e),s(_({storagePath:t,url:e}))}))}));else{var r=l[n].url;r!==m&&e&&f(r)}return a}),[l,t,m,s]),r.a.createElement("img",Object.assign({src:m,alt:a},c))},_e=["size","url","isOnline"],Qe=function(e){var t=e.size,a=e.url,n=e.isOnline,c=Object(h.a)(e,_e),l=Math.floor(t/6),o=Math.floor(.8536*t-l/2);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,Object.assign({style:{width:"".concat(t,"px"),height:"".concat(t,"px"),objectFit:"cover",borderRadius:"".concat(t/2,"px"),pointerEvents:"none",position:"relative"},storagePath:a,alt:""},c)),n&&r.a.createElement("div",{className:"bg-success",style:{width:"".concat(2*l,"px"),height:"".concat(2*l,"px"),borderRadius:"50%",position:"absolute",top:"".concat(o,"px"),left:"".concat(o,"px"),border:"2px solid white"}}))},Xe=function(e){var t,a=e.size,n=e.fullname,c=e.bold,l=e.user,o=l.firstname,s=l.lastname,i=l.profilePictureURL,u=l.isOnline;return t="true"===n?"".concat(o," ").concat(s):"".concat(o),r.a.createElement(m.a,{style:{minWidth:"150px",color:"inherited"}},r.a.createElement(f.a,{xs:"auto",className:"px-2 ml-2"},r.a.createElement(Qe,{size:a,url:i,isOnline:u})),r.a.createElement(f.a,{className:"align-self-center p-0",style:{color:"inherited"}},"true"===c?r.a.createElement("b",null,t):t))};function Ze(e,t,a){var n=e.currentTarget,r=t;if(r&&("profile"===r.id&&(r.style.backgroundColor="#e9ecef"),r.style.borderBottom="3px solid transparent",r.style.color=""),n){if(a&&a(n),n.style.color="dodgerblue","profile"===n.id)return void(n.style.backgroundColor="lightblue");n.style.borderBottom="3px solid dodgerblue"}}function $e(e){var t=e.e.target.value,a=Object(i.a)({},e.state);return a.text=t,e.setState(a),t}function et(e){var t=Object(i.a)({},e.state);t.isPhoto=!0,t.photoURL="".concat(e.userID,"/").concat(e.file.name),e.setState(t)}function tt(e){!function(e,t,a){var n=Object(i.a)({},e);n.isPhoto=!1,n.photoURL="",t(n),a&&a()}(e.state,e.setState,e.sideEffect)}function at(e,t){e.shiftKey||"Enter"===e.code&&(e.preventDefault(),t())}var nt=function(e){var t={home:Object(n.useRef)(null),friends:Object(n.useRef)(null),watch:Object(n.useRef)(null),profile:Object(n.useRef)(null)},a=Object(Ce.c)((function(e){return e.currentUser})),c=Object(Ce.c)((function(e){return e.link})),l=Object(Ce.c)((function(e){return e.accountPage.profileLink})),o=Object(Ce.b)();Object(n.useEffect)((function(){Ze({currentTarget:t[c.active].current},t[c.previous].current)}),[c,t]);function s(){o(ne(!1)),o(Z("profile"))}return r.a.createElement("div",{className:"titlebar bg-light"},r.a.createElement(De.a,{bg:"light",className:"p-0 nav-container"},r.a.createElement(De.a.Brand,{as:Fe.b,to:"/fakebook"},r.a.createElement(Te.a,{color:"dodgerblue",fontSize:"2em",className:"mx-3"})),r.a.createElement("div",{style:{width:"450px"},className:"spaceing"}),r.a.createElement(Ue.a,{className:"w-75 justify-content-start mr-5"},r.a.createElement(Ue.a.Item,{className:"first"},r.a.createElement(Fe.b,{to:"/fakebook",className:"nav-link",ref:t.home},r.a.createElement(He.a,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}}))),r.a.createElement(Ue.a.Item,null,r.a.createElement(Fe.b,{to:"/fakebook/friends/list",className:"nav-link",ref:t.friends},r.a.createElement(Te.b,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}}))),r.a.createElement(Ue.a.Item,null,r.a.createElement(Fe.b,{to:"/fakebook/watch",className:"nav-link",ref:t.watch},r.a.createElement(Be.a,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}})))),r.a.createElement(Ue.a,{className:"w-25 justify-content-end align-self-center"},r.a.createElement(Ue.a.Item,{className:"align-self-center first"},r.a.createElement(Fe.b,{to:l,className:"nav-link profile",id:"profile",onClick:s,ref:t.profile},r.a.createElement(Xe,{user:a,size:"30",fullname:"false",bold:"true"}))),r.a.createElement(Ue.a.Item,{className:"align-self-center"},r.a.createElement(Re.a,{title:"",className:"mr-4 custom-drop-down-btn",menuAlign:"right"},r.a.createElement(ze.a.Item,{as:Fe.b,to:l,onClick:s},r.a.createElement(Xe,{user:a,size:"60",fullname:"true",bold:"true"})),r.a.createElement(ze.a.Divider,null),r.a.createElement(ze.a.Item,{as:Fe.b,to:"/fakebook/",onClick:function(){!function(){ve.apply(this,arguments)}()},className:"p-0"},r.a.createElement(Me.a,{fontSize:"1.5em",className:"mx-4"}),r.a.createElement("span",null,"Log Out"),r.a.createElement("div",{style:{width:"20em"}})))))))},rt=a(31),ct=a(132),lt=a(63),ot=a(207),st=function(e){var t,a=e.width,n=e.height,c=e.index,l=e.userID,o=e.photo,s=e.onClick,i=e.className;return t="true"===e.useStoragePath?o:"/".concat(l,"/").concat(o.fileName),r.a.createElement("div",{key:c,className:i,style:{display:"inline-block",position:"relative",width:"".concat(a),height:"0px",paddingBottom:"".concat(n)}},r.a.createElement(Je,{alt:"",id:c,storagePath:t,style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",objectFit:"cover"},onClick:s}))},it=function(e){var t=Object(rt.i)().url,a=e.userID,c=e.openFileInput,l=e.linkHandling,s=l.linkRefs,i=l.linkState,u=s.photos,p=Object(o.a)(i,2),b=p[0],E=p[1],h=Object(Ce.c)((function(e){return e.users})),g=Object(Ce.c)((function(e){return e.user.id})),v=a===g,k=h.find((function(e){return e.userID===a})).photos;return Object(n.useEffect)((function(){Ze({currentTarget:u.current},b,E)}),[b,u,E]),r.a.createElement(ot.a,{variant:"light",className:"w-100"},r.a.createElement(ot.a.Body,null,r.a.createElement(ot.a.Title,null,r.a.createElement(Fe.b,{to:t,className:"text-body"},r.a.createElement("b",null,"Photos")),v&&r.a.createElement(d.a,{variant:"link",style:{textDecoration:"none",float:"right"},onClick:c},r.a.createElement("b",null,"Add Photos"))),r.a.createElement(m.a,{className:"w-100"},k.map((function(e,t){return r.a.createElement(f.a,{key:t,xs:6,sm:4,md:3,lg:2,className:"p-1"},r.a.createElement(Fe.b,{to:"/fakebook/photo/".concat(a,"/").concat(t)},r.a.createElement(st,{width:"100%",height:"100%",userID:a,photo:e,index:t})))})))))},ut=a(206),mt=(a(165),function(e){var t=e.user,a="".concat(t.firstname," ").concat(t.lastname),c=Object(n.useState)(!1),l=Object(o.a)(c,2),s=l[0],i=l[1],u=Object(rt.f)();function m(){u.push(t.index&&t.index>0?"/fakebook/".concat(t.lastname,".").concat(t.firstname,".").concat(t.index):"/fakebook/".concat(t.lastname,".").concat(t.firstname))}return r.a.createElement(f.a,{xs:6,className:"my-3"},r.a.createElement(ut.a,{placement:"auto",show:s,overlay:r.a.createElement("div",{className:"popup-card",onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},onClick:m},r.a.createElement("div",{className:"m-3"},r.a.createElement(Qe,{size:"120",url:t.profilePictureURL})),r.a.createElement("h4",{className:"name-tag"},r.a.createElement("b",null,a)))},r.a.createElement("button",{type:"button",onClick:m,className:"friend-btn",tabIndex:"-1"},r.a.createElement(Je,{storagePath:t.profilePictureURL,width:"90px",height:"90px",alt:"",className:"profile-picture",onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)}}))),r.a.createElement("button",{type:"button",className:"ml-3 friend-btn",onClick:m},r.a.createElement("b",null,a)))}),ft=function(e){var t,a=Object(rt.i)().url,c=e.linkHandling,l=c.linkRefs,s=c.linkState,i=Object(o.a)(s,2),u=i[0],f=i[1],d=l.friends,p=Object(Ce.c)((function(e){return e.users}));return Object(n.useEffect)((function(){Ze({currentTarget:d.current},u,f)}),[u,d,f]),t=p||[],r.a.createElement(ot.a,null,r.a.createElement(ot.a.Body,null,r.a.createElement(ot.a.Title,null,r.a.createElement(Fe.b,{to:a,className:"text-body"},r.a.createElement("b",null,"Friends"))),r.a.createElement(m.a,null,t.map((function(e,t){return r.a.createElement(mt,{user:e,key:t})})))))},dt=a(98),pt=function(e){var t=e.show,a=e.setShow,c=e.updateDatabase,l=Object(n.useRef)(null);return Object(n.useEffect)((function(){t&&(l.current.click(),a(!1))}),[t,a]),r.a.createElement("input",{type:"file",accept:"image/*",ref:l,style:{display:"none"},onChange:function(e){e.preventDefault();var t=e.target.files[0];(function(e){return ie.ref(de).child(e.name).put(e)})(t).then((function(){return c(t)}))}})},bt=a(64),Et=(a(166),function(e){var t=e.show,a=e.onClose,c=e.setText,l=e.isYoutubeBtnPressed,s=e.placeholder,u=Object(Ce.c)((function(e){return e.currentUser})),m=Object(Ce.c)((function(e){return e.user.id})),f="For adding YouTube video do the following:\n     1. copy link of the video from the addresse bar of your browser\n     2. press YouTube button again to upload the YouTube video to your post\n     3. add your text for the post\n     4. push the post button",b={userID:"".concat(m),text:"",isPhoto:!1,photoURL:"",isYoutube:!1,youtubeURL:"",likes:[]},E=Object(n.useState)(b),h=Object(o.a)(E,2),g=h[0],v=h[1];var k,j,O=Object(n.useState)(!1),x=Object(o.a)(O,2),y=x[0],w=x[1];y?(k="primary",j=!1):(k="secondary",j=!0);var N=Object(n.useState)(!1),P=Object(o.a)(N,2),S=P[0],C=P[1];function I(){""!==g.text||g.isYoutube||w(!1)}function L(){return l&&!g.isYoutube?f:s}return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{show:t,onHide:a},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement("div",{className:"w-100 d-flex justify-content-center"},r.a.createElement(p.a.Title,null,r.a.createElement("b",null,"Create Post")))),r.a.createElement(p.a.Body,null,r.a.createElement(Xe,{user:u,size:"45",fullname:"true",bold:"true"}),r.a.createElement("div",{className:"mt-2 scrolling-container"},r.a.createElement("textarea",{type:"text",onChange:function(e){!function(e){w(""!==e);c(e)}($e({e:e,state:g,setState:v}))},className:"w-100 mt-2 textarea",placeholder:L(),rows:L()===f&&""===g.text?7:3,value:g.text}),g.isPhoto&&r.a.createElement("div",{className:"mb-2 img-container"},r.a.createElement(Je,{alt:"",storagePath:"/".concat(g.photoURL),className:"w-100 img-to-post"}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){tt({state:g,setState:v,user:u,userID:m,sideEffect:I})}}))),g.isYoutube&&r.a.createElement("div",{className:"mb-2 video-container"},r.a.createElement("iframe",{src:g.youtubeURL,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope",allowFullScreen:!0}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){var e=Object(i.a)({},g);e.isYoutube=!1,e.youtubeURL="",v(e),""!==g.text||g.isPhoto||w(!1)}})))),r.a.createElement("div",{className:"w-100 my-2 add-to-post"},r.a.createElement("b",null,"Add to your post"),r.a.createElement(d.a,{className:"ml-2 add-photo-btn",variant:"light",size:"sm",onClick:function(){var e=g.text,t="https://www.youtube.com/watch?v=";if(e.startsWith(t)||e.startsWith("https://m.youtube.com/watch?v=")){var a;a=e.startsWith(t)?t.length:"https://m.youtube.com/watch?v=".length;var n=e.slice(a),r="https://www.youtube.com/embed/".concat(n),l=Object(i.a)({},g);l.isYoutube=!0,l.youtubeURL=r,l.text="",v(l),c(""),w(!0)}},disabled:g.isPhoto||g.isYoutube},r.a.createElement(bt.b,{size:"26px",className:"text-danger","aria-label":"YouTube"})),r.a.createElement(d.a,{className:"ml-2 add-photo-btn",variant:"light",size:"sm",onClick:function(){return C(!0)},disabled:g.isPhoto||g.isYoutube},r.a.createElement(lt.a,{size:"26px",className:"text-success","aria-label":"photo"}))),r.a.createElement(d.a,{variant:k,className:"w-100 mt-3",disabled:j,onClick:function(){(function(e){return xe.apply(this,arguments)})(g).then((function(){v(b),c(""),a()}))}},r.a.createElement("b",null,"Post")))),r.a.createElement(pt,{show:S,setShow:C,updateDatabase:function(e){et({state:g,setState:v,file:e,userID:m}),w(!0)}}))}),ht=(a(167),["firstname","isCurrentUser"]),gt=function(e){var t=e.firstname,a=e.isCurrentUser,c=Object(h.a)(e,ht),l=Object(Ce.c)((function(e){return e.currentUser})),s="What's on your mind ".concat(l.firstname,"?"),i="Write something to ".concat(t),u=Object(n.useState)(!1),m=Object(o.a)(u,2),f=m[0],p=m[1],b=Object(n.useState)(!1),E=Object(o.a)(b,2),g=E[0],v=E[1],k=Object(n.useState)(""),j=Object(o.a)(k,2),O=j[0],x=j[1],y=function(){return p(!0)};function w(){return a?s:i}return r.a.createElement(r.a.Fragment,null,r.a.createElement(ot.a,Object.assign({className:"create-post-card"},c),r.a.createElement(ot.a.Body,null,r.a.createElement(ot.a.Title,null,r.a.createElement(Qe,{size:"40",url:l.profilePictureURL}),r.a.createElement("button",{type:"button",className:"p-2 text-dark text-btn",onClick:y},function(){var e=O.length;if(0===e)return w();var t=O.slice(0,55);return e>55&&(t+="..."),t}())),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex"},r.a.createElement(d.a,{variant:"light",className:"add-btn",size:"sm",onClick:function(){v(!0),p(!0)}},r.a.createElement(bt.b,{size:"28px",className:"text-danger"}),"YouTube"),r.a.createElement(d.a,{variant:"light",className:"add-btn",size:"sm",onClick:y},r.a.createElement(lt.a,{size:"28px",className:"text-success"}),"Photo")))),r.a.createElement(Et,{show:f,onClose:function(){p(!1),v(!1)},setText:x,isYoutubeBtnPressed:g,placeholder:w()}))},vt=["user","userID","linkHandling"],kt=function(e){var t=e.user,a=e.userID,n=e.linkHandling,c=Object(h.a)(e,vt),l=n.linkRefs,s=n.linkState,i=Object(o.a)(s,2),u=i[0],d=i[1],p=l.photos,b=t.photos,E="/fakebook/".concat(t.lastname,".").concat(t.firstname,"/Photos");function g(){Ze({currentTarget:p.current},u,d)}return r.a.createElement(ot.a,c,r.a.createElement(ot.a.Body,null,r.a.createElement(ot.a.Title,null,r.a.createElement(Fe.b,{to:E,className:"text-body",onClick:g},r.a.createElement("b",null,"Photos"))),r.a.createElement(m.a,null,b.map((function(e,t){return t<9&&r.a.createElement(f.a,{key:t,xs:4,className:"m-0",style:{paddingLeft:"3px",paddingRight:"3px",paddingTop:"0",paddingBottom:"0"}},r.a.createElement(Fe.b,{to:"/fakebook/photo/".concat(a,"/").concat(t),className:"text-body",onClick:g,tabIndex:"-1"},r.a.createElement(st,{photo:e,userID:a,index:t,width:"100%",height:"100%"})))})))))},jt=["user","linkHandling"],Ot=function(e){var t=e.user,a=e.linkHandling,n=Object(h.a)(e,jt),c=a.linkRefs,l=a.linkState,s=Object(o.a)(l,2),i=s[0],u=s[1],d=c.friends,p=t.index&&t.index>0?"/fakebook/".concat(t.lastname,".").concat(t.firstname,".").concat(t.index,"/Friends"):"/fakebook/".concat(t.lastname,".").concat(t.firstname,"/Friends");function b(){Ze({currentTarget:d.current},i,u)}var E=Object(Ce.c)((function(e){return e.users}));return r.a.createElement(ot.a,n,r.a.createElement(ot.a.Body,null,r.a.createElement(ot.a.Title,null,r.a.createElement(Fe.b,{to:p,className:"text-body",onClick:b},r.a.createElement("b",null,"Friends"))),r.a.createElement(ot.a.Subtitle,{className:"text-muted"},E.length," friends"),r.a.createElement(m.a,null,E.map((function(e,t){var a=e.index&&e.index>0?"/fakebook/".concat(e.lastname,".").concat(e.firstname,".").concat(e.index):"/fakebook/".concat(e.lastname,".").concat(e.firstname),n="".concat(e.firstname," ").concat(e.lastname);return t<9&&r.a.createElement(f.a,{key:t,xs:4,className:"m-0",style:{paddingLeft:"3px",paddingRight:"3px",paddingTop:"0",paddingBottom:"3px"}},r.a.createElement(st,{photo:e.profilePictureURL,width:"100%",height:"100%",useStoragePath:"true"}),r.a.createElement(Fe.b,{to:a,className:"text-body",onClick:b},r.a.createElement("div",{className:"w-100",style:{height:"2.5em"}},r.a.createElement("p",{style:{fontSize:"0.9em"}},r.a.createElement("b",null,n)))))})))))},xt=function(e){var t=e.users,a=e.variant,n=Object(Ce.c)((function(e){return e.users}));t&&(n=t);var c="modal"===a;return r.a.createElement(f.a,{xs:"auto",className:"overflow-auto mh-100"},r.a.createElement("div",{id:"col-1",className:"m-2"},n.map((function(e,t){var a="/fakebook/".concat(e.lastname,".").concat(e.firstname);return e.index&&e.index>0&&(a+=".".concat(e.index)),r.a.createElement(Fe.b,{key:t,to:a,className:c?"p-1 text-dark":"nav-link text-dark"},r.a.createElement(Xe,{user:e,fullname:"true",size:c?"40":"60",bold:"true",className:"pb-1"}))}))))},yt=function(e){var t=e.show,a=e.onHide,n=e.likes,c=Object(Ce.c)((function(e){return e.users})),l=n.map((function(e){return c.find((function(t){return t.userID===e}))}));return r.a.createElement(p.a,{show:t,onHide:a},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{className:"text-primary"},"All")),r.a.createElement(p.a.Body,{className:"overflow-hidden"},r.a.createElement(xt,{users:l,variant:"modal"})))},wt=["comment"],Nt=function(e){var t=e.comment,a=Object(h.a)(e,wt),n=t.userID,c=Object(Ce.c)((function(e){return e.users})).find((function(e){return e.userID===n}));return r.a.createElement(m.a,a,r.a.createElement(f.a,{xs:1},r.a.createElement(Qe,{size:"26",url:c.profilePictureURL})),r.a.createElement(f.a,{xs:11},r.a.createElement("p",null,r.a.createElement("b",null,"".concat(c.firstname," ").concat(c.lastname," ")),t.text),t.isPhoto&&r.a.createElement(Je,{alt:"",storagePath:t.photoURL,style:{width:"30%"}})))},Pt=["onChange","onKeyPress","value","welcomeText"],St=function(e){var t=e.onChange,a=e.onKeyPress,c=e.value,l=e.welcomeText,s=Object(h.a)(e,Pt),u={outline:"none",border:"none",resize:"none",overflow:"hidden",background:"#e9ecef",padding:"0",lineHeight:"0.8em"},m=Object(n.useRef)(u),f=Object(n.useState)(u),d=Object(o.a)(f,2),p=d[0],b=d[1],E=Object(n.useState)(null),g=Object(o.a)(E,2),v=g[0],k=g[1];return Object(n.useEffect)((function(){if("auto"===p.height&&v){var e=Object(i.a)({},p);e.height=v.scrollHeight+"px",b(e)}}),[p,v]),Object(n.useEffect)((function(){""===c&&v&&b(m.current)}),[c,v,m]),r.a.createElement("textarea",Object.assign({type:"text",onChange:function(e){t(e);var a=e.target;k(a),function(e){var t=Object(i.a)({},p);t.height="auto",b(t)}()},onKeyPress:a,placeholder:l,rows:"1",style:p,value:c},s))},Ct=(a(168),function(e){var t=e.post,a=Object(Ce.c)((function(e){return e.currentUser})),c=Object(Ce.c)((function(e){return e.user.id})),l={userID:c,text:"",isPhoto:!1,photoURL:""},s=Object(n.useState)(l),u=Object(o.a)(s,2),p=u[0],b=u[1],E=Object(n.useState)(!1),h=Object(o.a)(E,2),v=h[0],k=h[1];function j(){if(""!==p.text||p.isPhoto){var e=Object(i.a)(Object(i.a)({},t),{},{comments:[]}),a=t.postID;t.comments&&(e.comments=Object(g.a)(t.comments)),e.comments.push(p),we(e,a),b(l)}}return r.a.createElement(f.a,null,r.a.createElement("hr",null),t.comments&&t.comments.map((function(e,t){return r.a.createElement(Nt,{key:t,comment:e,className:"mb-2"})})),r.a.createElement(m.a,null,r.a.createElement(f.a,{xs:1},r.a.createElement(Qe,{size:"36",url:a.profilePictureURL})),r.a.createElement(f.a,{xs:11},r.a.createElement(m.a,{style:{background:"#e9ecef",borderRadius:"18px",marginLeft:"5px"}},r.a.createElement(f.a,{xs:9,className:"align-self-center"},r.a.createElement(St,{onChange:function(e){$e({e:e,state:p,setState:b})},onKeyPress:function(e){return at(e,j)},welcomeText:"Write a comment ...",value:p.text,className:"w-100 mt-2"})),r.a.createElement(f.a,{xs:3},r.a.createElement(m.a,{className:"justify-content-end align-items-baseline"},r.a.createElement(d.a,{variant:"light",size:"sm",className:"comment-btn",onClick:function(){return k(!0)},disabled:p.isPhoto},r.a.createElement(Be.b,{size:"18px",className:"text-muted","aria-label":"photo"})),r.a.createElement(d.a,{variant:"light",size:"sm",className:"comment-btn",onClick:function(){return j()}},r.a.createElement(Be.c,{size:"18px",className:"text-primary","aria-label":"send"}))))),p.isPhoto&&r.a.createElement("div",{className:"comment-img-container"},r.a.createElement(Je,{alt:"",storagePath:"/".concat(p.photoURL),className:"img-to-comment"}),r.a.createElement("div",{id:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){tt({state:p,setState:b,user:a,userID:c})}}))))),r.a.createElement(pt,{show:v,setShow:k,updatePost:function(e){et({state:p,setState:b,file:e,userID:c})}}))}),It=a(131),Lt=a(130),Dt=a.n(Lt),Ut=["post"],Rt=function(e){var t=e.post,a=Object(h.a)(e,Ut),c=Object(Ce.c)((function(e){return e.user.id})),l=Object(Ce.c)((function(e){return e.users})),s=Object(n.useState)(!1),i=Object(o.a)(s,2),u=i[0],m=i[1],f=Object(n.useState)(!1),p=Object(o.a)(f,2),b=p[0],E=p[1];if(!t)return r.a.createElement(r.a.Fragment,null);var v=t.postID,k=l.find((function(e){return e.userID===t.userID}));if(!k)return r.a.createElement(r.a.Fragment,null);function j(){return!(-1===t.likes.indexOf(c))}return r.a.createElement(ot.a,a,r.a.createElement(ot.a.Header,null,r.a.createElement(Xe,{user:k,size:"40",fullname:"true",bold:"true"}),r.a.createElement("span",{style:{fontSize:"12px"}},t.timestamp)),r.a.createElement(ot.a.Body,null,r.a.createElement(ot.a.Text,null,t.text),t.isPhoto&&r.a.createElement(Je,{alt:"",storagePath:t.photoURL,className:"w-100"}),t.isYoutube&&r.a.createElement("div",{className:"video-container"},r.a.createElement(Dt.a,{className:"react-player",url:function(e){var t=e.lastIndexOf("/"),a=e.slice(t+1);return"https://www.youtube.com/watch?v=".concat(a)}(t.youtubeURL),light:!0,width:"100%",height:"100%",playing:!0,controls:!0}))),r.a.createElement(ot.a.Footer,null,r.a.createElement(d.a,{variant:"link",className:"text-muted",onClick:function(){t.likes.length>0&&m(!0)},style:{boxShadow:"none"}},r.a.createElement(bt.a,{className:"bg-primary text-light mr-2",style:{borderRadius:"50%"},"aria-label":"likes"}),t.likes.length),r.a.createElement(d.a,{variant:"link",className:"text-muted float-right",onClick:function(){return E(!b)},style:{boxShadow:"none"}},"comments(",t.comments?t.comments.length:0,")"),r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"light",className:"".concat(j()?"text-primary":"text-muted"," w-50"),onClick:function(){var e=Object(g.a)(t.likes),a=e.indexOf(c);-1===a?e.push(c):e.splice(a,1),we({likes:e},v)}},j()?r.a.createElement(bt.a,{size:"22px"}):r.a.createElement(bt.c,{size:"22px"}),r.a.createElement("b",null," Like")),r.a.createElement(d.a,{variant:"light",className:"text-muted w-50",onClick:function(){E(!0)}},r.a.createElement(It.a,{size:"22px"}),r.a.createElement("b",null," Comment")),b&&r.a.createElement(Ct,{post:t})),r.a.createElement(yt,{show:u,onHide:function(){m(!1)},likes:t.likes}))},zt=function(e){var t=e.postID,a=Object(Ce.c)((function(e){return e.posts})).find((function(e){return e.postID===t}));return r.a.createElement(Rt,{post:a})},Ft=(a(174),function(e){var t=e.userID,a=e.linkHandling,c=a.linkRefs,l=a.linkState,s=Object(o.a)(l,2),i=s[0],u=s[1],d=c.posts,p=Object(Ce.c)((function(e){return e.users})),b=Object(Ce.c)((function(e){return e.user.id})),E=t===b,h=p.find((function(e){return e.userID===t}));return Object(n.useEffect)((function(){Ze({currentTarget:d.current},i,u)}),[i,d,u]),r.a.createElement(m.a,{className:"w-100 posts"},r.a.createElement(f.a,{sm:5,className:"mh-100 overflow-hidden"},r.a.createElement(kt,{user:h,userID:t,linkHandling:a,className:"my-2"}),r.a.createElement(Ot,{user:h,linkHandling:a,className:"my-2"})),r.a.createElement(f.a,{sm:7,className:"mh-100 overflow-auto hide-scrollbar bg-200"},r.a.createElement(gt,{firstname:h.firstname,isCurrentUser:E,className:"mt-2"}),h.posts.map((function(e,t){return r.a.createElement(zt,{key:t,postID:e,className:"mx-auto my-2"})}))))}),Ht=function(e){var t=Object(rt.h)().itemId,a=e.userID,n=e.openFileInput,c=e.linkHandling;return"Photos"===t?r.a.createElement(it,{userID:a,openFileInput:n,linkHandling:c}):"Friends"===t?r.a.createElement(ft,{linkHandling:c}):r.a.createElement(Ft,{userID:a,linkHandling:c})},Tt=function(e){var t=e.show,a=e.removeCoverPhoto,n=e.closeDlg;return r.a.createElement(p.a,{show:t,onHide:n},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Remove Cover Photo"))),r.a.createElement(p.a.Body,null,r.a.createElement("div",null,"Do you really want to remove the cover photo?")),r.a.createElement(p.a.Footer,null,r.a.createElement(d.a,{variant:"link",style:{textDecoration:"none"},onClick:n},r.a.createElement("b",null,"Cancel")),r.a.createElement(d.a,{variant:"primary",onClick:a},r.a.createElement("b",null,"Submit"))))},Bt=function(e){var t=e.show,a=e.onHide,n=e.onPhotoClick,c=e.userID,l=e.photos;return r.a.createElement(p.a,{show:t,onHide:a,scrollable:!0},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{style:{marginLeft:"35%"}},r.a.createElement("strong",null,"Select Photo"))),r.a.createElement(p.a.Body,null,l.map((function(e,t){return r.a.createElement(Je,{className:"m-1",width:"31%",height:"90px",alt:"",key:t,id:t,storagePath:"/".concat(c,"/").concat(e.fileName),style:{objectFit:"cover"},onClick:n})}))))},Mt=function(e){var t=e.show,a=e.onHide,n=e.onBtnClick,c=e.onPhotoClick,l=e.userID,o=e.photos;return r.a.createElement(p.a,{show:t,onHide:a,size:"lg",scrollable:!0},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{style:{margin:"auto"}},r.a.createElement("strong",null,"Update Profile Picture"))),r.a.createElement(p.a.Body,null,r.a.createElement(d.a,{size:"sm",variant:"outline-primary",className:"w-50 m-2 mb-3",onClick:n},r.a.createElement("b",null,"+ Upload Photo")),r.a.createElement("br",null),r.a.createElement("b",null,"Suggested Photos"),r.a.createElement(m.a,{className:"m-1"},o.map((function(e,t){return r.a.createElement(st,{key:t,width:"15%",height:"15%",userID:l,photo:e,index:t,onClick:c,className:"m-1"})})))))},At=(a(175),function(e){var t=Object(rt.h)().userName,a=Object(Ce.c)((function(e){return e.user.id})),c=Object(Ce.c)((function(e){return e.users})),l=Object(Ce.c)((function(e){return e.link})),i=function(){var e=c.map((function(e){return e.index&&0!==e.index?"".concat(e.lastname,".").concat(e.firstname,".").concat(e.index):"".concat(e.lastname,".").concat(e.firstname)})).indexOf(t),a=c[e];return a},u=function(){return i().userID},p=a===u(),b=i(),E=b.firstname,h=b.lastname,v=b.profilePictureURL,k=b.backgroundPictureURL,j=b.photos,O=Object(n.useState)(!1),x=Object(o.a)(O,2),y=x[0],w=x[1],N=Object(n.useState)(!1),P=Object(o.a)(N,2),S=P[0],C=P[1],I=Object(n.useState)(!1),L=Object(o.a)(I,2),D=L[0],U=L[1],R=Object(n.useState)(!1),z=Object(o.a)(R,2),F=z[0],H=z[1],T=Object(n.useState)("backgroundPictureURL"),B=Object(o.a)(T,2),M=B[0],A=B[1],Y=Object(n.useState)(null),W=Object(o.a)(Y,2),V=W[0],q=W[1],K=Object(n.useRef)(null),G=Object(n.useRef)(null),J=Object(n.useRef)(null),_={linkRefs:{photos:K,friends:G,posts:J},linkState:[V,q]},Q=Object(rt.i)(),X=Q.url,$=Q.path;function ee(e){A(e),H(!0)}function te(e){switch(e){case"3":w(!0);break;case"2":ee("backgroundPictureURL");break;case"1":C(!0);break;default:return}}function ae(){w(!1)}function ne(){C(!1)}function re(){U(!1)}function ce(e,t){var n=Number(e.target.id),r=j[n],c="".concat(a,"/").concat(r.fileName);return Ne(Object(s.a)({},t,c))}var le=Object(Ce.b)();return Object(n.useEffect)((function(){("friends"!==l.active||window.innerWidth<600)&&le(Z("profile"))}),[le,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"justify-content-center grad"},r.a.createElement(f.a,{className:"m-0 p-0 profile-col"},r.a.createElement("div",{className:"background-pic-container"},r.a.createElement(Je,{className:"background-pic",storagePath:k,alt:""}),p&&r.a.createElement(Re.a,{variant:"light",className:"background-pic-button",title:r.a.createElement("b",null,r.a.createElement(Be.b,{className:"mr-1",size:"20px"}),r.a.createElement("span",null,"Edit Cover Photo")),size:"sm"},r.a.createElement(ze.a.Item,{eventKey:"1",onSelect:te},r.a.createElement(lt.a,{size:"20px",className:"mr-2"}),"Select Photo"),r.a.createElement(ze.a.Item,{eventKey:"2",onSelect:te},r.a.createElement(Me.b,{size:"20px",className:"mr-2"}),"Upload Photo"),r.a.createElement(ze.a.Divider,null),r.a.createElement(ze.a.Item,{eventKey:"3",onSelect:te},r.a.createElement(ct.a,{size:"20px",className:"mr-2"})," Remove")),r.a.createElement("div",{className:"profile-pic-container"},r.a.createElement(Qe,{size:"180",url:v}),p&&r.a.createElement(d.a,{variant:"light",className:"profile-pic-button",onClick:function(){return U(!0)}},r.a.createElement(Be.b,{size:"19px","aria-label":"photo"})))),r.a.createElement("h2",{className:"text-center mt-5"},r.a.createElement("b",null,E," ",h)),r.a.createElement("hr",null),r.a.createElement(De.a,{bg:"light"},r.a.createElement(Ue.a,null,r.a.createElement(Ue.a.Item,null,r.a.createElement(Fe.b,{key:"1",to:"".concat(X,"/Posts"),className:"nav-link mx-2",ref:J},r.a.createElement("b",null,"Posts"))),r.a.createElement(Ue.a.Item,null,r.a.createElement(Fe.b,{key:"2",to:"".concat(X,"/Friends"),className:"nav-link mx-2",ref:G},r.a.createElement("b",null,"Friends")," ",c.length)),r.a.createElement(Ue.a.Item,null,r.a.createElement(Fe.b,{key:"3",to:"".concat(X,"/Photos"),className:"nav-link mx-2",ref:K},r.a.createElement("b",null,"Photos"))))))),r.a.createElement(m.a,{className:"justify-content-center"},r.a.createElement(f.a,{className:"profile-col"},r.a.createElement(rt.c,null,r.a.createElement(rt.a,{path:"".concat($,"/:itemId")},r.a.createElement(Ht,{userID:u(),openFileInput:function(){return ee("")},linkHandling:_})),r.a.createElement(rt.a,{path:$},r.a.createElement(Ft,{userID:u(),linkHandling:_}))))),r.a.createElement(Tt,{show:y,removeCoverPhoto:function(){return ae(),Ne({backgroundPictureURL:"background-server.jpg"})},closeDlg:ae}),r.a.createElement(Bt,{show:S,onHide:ne,onPhotoClick:function(e){ne(),ce(e,"backgroundPictureURL")},userID:a,photos:j}),r.a.createElement(Mt,{show:D,onHide:re,onBtnClick:function(){re(),ee("profilePictureURL")},onPhotoClick:function(e){re(),ce(e,"profilePictureURL")},userID:a,photos:j}),r.a.createElement(pt,{show:F,setShow:H,updateDatabase:function(e){var t={fileName:e.name},n=j.map((function(e){return e.fileName})),r=Object(g.a)(j);-1===n.indexOf(e.name)&&r.push(t);var c={photos:r};return""!==M&&(c[M]="".concat(a,"/").concat(e.name)),Ne(c)},userID:a}))}),Yt=a(205),Wt=function(){var e=Object(rt.h)(),t=e.userID,a=e.n,c=Object(Ce.c)((function(e){return e.users})).find((function(e){return e.userID===t})).photos,l=Object(n.useState)(Number(a)),s=Object(o.a)(l,2),i=s[0],u=s[1],d=Object(rt.f)(),p=Object(rt.g)();Object(n.useEffect)((function(){var e=p.pathname.split("/"),t=Number(e.pop());u(t)}),[p]);return r.a.createElement(m.a,{className:"bg-200",style:{position:"relative",top:"50px",height:"89vh"}},r.a.createElement(f.a,{md:9,className:"h-100",style:{backgroundColor:"black"}},r.a.createElement(Yt.a,{className:"w-100 h-100",interval:null,indicators:!1,activeIndex:i,onSelect:function(e,a){d.push("/fakebook/photo/".concat(t,"/").concat(e))}},c.map((function(e,a){return r.a.createElement(Yt.a.Item,{key:a,style:{width:"100%",height:"89vh"}},r.a.createElement(Je,{storagePath:"/".concat(t,"/").concat(e.fileName),alt:"",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"600px",height:"100%",objectFit:"contain"}}))})))),r.a.createElement(f.a,null))},Vt=function(){var e=Object(Ce.c)((function(e){return e.posts}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(gt,{isCurrentUser:!0,className:"mw-100 m-auto p-0",style:{width:"450px"}}),e.map((function(e,t){return r.a.createElement(Rt,{key:t,post:e,className:"mw-100 mx-auto my-2",style:{width:"450px"}})})))},qt=(a(176),function(e){var t=Object(Ce.c)((function(e){return e.currentUser}));return r.a.createElement(Ue.a,{className:"flex-column mt-3",id:"left-navbar"},r.a.createElement("div",{className:"navitem"},r.a.createElement(Ue.a.Link,{as:Fe.b,to:e.profileLink,className:"text-dark flex-column justify-content-center"},r.a.createElement(Xe,{user:t,size:"26",fullname:"true"}))),r.a.createElement("div",{className:"navitem"},r.a.createElement(Ue.a.Link,{as:Fe.b,to:"/fakebook/friends/list",className:"text-dark"},r.a.createElement(Te.b,{size:"26px",className:"text-info mr-2"}),r.a.createElement("div",{className:"d-inline"},"Friends"))),r.a.createElement("div",{className:"navitem"},r.a.createElement(Ue.a.Link,{as:Fe.b,to:"/fakebook/watch",className:"text-dark"},r.a.createElement(Be.a,{size:"26px",className:"text-info mr-2"}),r.a.createElement("div",{className:"d-inline"},"Watch"))))}),Kt=function(){var e=Object(Ce.c)((function(e){return e.posts})).filter((function(e){return e.isYoutube}));return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){return r.a.createElement(Rt,{key:t,post:e,className:"mw-100 mx-auto my-2",style:{width:"550px"}})})))},Gt=a(133),Jt=["message"],_t=function(e){var t=e.message,a=Object(h.a)(e,Jt),n=Object(Ce.c)((function(e){return e.user.id}));return r.a.createElement(m.a,Object.assign({},a,{className:t.sender===n?"justify-content-end":"justify-content-start"}),r.a.createElement("div",{style:{fontSize:"12px",margin:"auto"}},new Date(t.timestamp).toLocaleString()),t.isPhoto&&r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement(Je,{alt:"",storagePath:t.photoURL,style:{display:"block",width:"50%",margin:"auto"}})),r.a.createElement("p",{style:t.sender===n?{width:"75%",backgroundColor:"dodgerblue",color:"white",padding:"16px",borderRadius:"16px"}:{width:"75%",backgroundColor:"lightgray",color:"black",padding:"16px",borderRadius:"16px"}},t.text))},Qt=function(e){var t=e.conversation;return r.a.createElement(f.a,null,t.map((function(e,t){return r.a.createElement(_t,{key:t,message:e})})))},Xt=function(e){var t=e.recipient,a=Object(n.useState)([]),c=Object(o.a)(a,2),l=c[0],s=c[1],i=Object(Ce.c)((function(e){return e.incomingMessages})),u=Object(Ce.c)((function(e){return e.outgoingMessages})),m=i.filter((function(e){return e.sender===t})),f=u.filter((function(e){return e.recipient===t}));return Object(n.useEffect)((function(){var e=function(e,t){return[].concat(Object(g.a)(e),Object(g.a)(t)).sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)}))}(m,f);e.length!==l.length&&s(e)}),[m,f,l]),r.a.createElement(Qt,{conversation:l})},Zt=(a(177),function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),s=Object(o.a)(l,2),u=s[0],p=s[1],b=Object(n.useState)(null),h=Object(o.a)(b,2),j=h[0],O=h[1],x=Object(Ce.c)((function(e){return e.currentUser})),y=Object(Ce.c)((function(e){return e.user.id})),w=Object(Ce.c)((function(e){return e.users})),N={sender:"".concat(y),recipient:"",text:"",isPhoto:!1,photoURL:"",isRead:!1},P=Object(n.useState)(N),S=Object(o.a)(P,2),C=S[0],I=S[1];function L(e){if((e||!u)&&(!u||e.userID===u.userID)){var t;c(!0),t=e?e.userID:"";var a=Object(i.a)({},C);a.recipient=t,I(a),p(e)}}var D=Object(n.useCallback)(L,[x]);function U(){return(U=Object(v.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(u);case 2:K(),c(!1),p(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=Object(n.useRef)(null),z=Object(n.useState)(""),F=Object(o.a)(z,2),H=F[0],T=F[1];function B(){var e;(e=C,Pe.add(Object(i.a)(Object(i.a)({},e),{},{timestamp:k.a.firestore.FieldValue.serverTimestamp()}))).then((function(){I(N),T(R.current.scrollHeight)}))}Object(n.useEffect)((function(){R.current&&(R.current.scrollTop=H)}),[H]),Object(n.useEffect)((function(){var e=ke("incoming"),t=ke("outgoing");return function(){e(),t()}}),[]);var M=Object(n.useState)([]),A=Object(o.a)(M,2),Y=A[0],W=A[1],V=Object(Ce.c)((function(e){return e.incomingMessages})).filter((function(e){return!e.isRead}));function q(e){var t=V.filter((function(t){return t.sender===e.userID})),a=[];return t.forEach((function(e){var t=e.id;a.push(function(e){return Pe.doc(e).update({isRead:!0})}(t))})),Promise.all(a)}function K(){var e=Object(g.a)(Y);e.pop(),W(e)}return Object(n.useEffect)((function(){var e=[];V.forEach((function(t){var a=t.sender;-1===e.indexOf(a)&&e.push(a)})),Y.length!==e.length&&W(e)}),[Y,V]),Object(n.useEffect)((function(){if(0!==Y.length){var e=Y.length-1,t=Y[e];D(w.find((function(e){return e.userID===t})))}}),[Y,w,D]),u&&a&&""===C.recipient&&L(u),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue.a,{className:"flex-column"},r.a.createElement("h5",{className:"text-muted ml-3"},r.a.createElement("b",null,"Contacts")),w.map((function(e,t){return e.userID===y?r.a.createElement("div",{key:t}):r.a.createElement("button",{type:"button",key:t,className:"navitem text-dark flex-row justify-content-center p-2 mb-1 nav-btn bg-200",onClick:function(){return L(e)}},r.a.createElement(Xe,{size:"26",fullname:"true",bold:"false",user:e}))}))),r.a.createElement(ut.a,{placement:"left-start",show:a,overlay:r.a.createElement(ot.a,{style:{width:"350px",height:"450px",background:"white",fontSize:"1.2rem",maxHeight:"".concat(window.innerHeight-70,"px")}},r.a.createElement(ot.a.Body,{className:"overflow-none"},r.a.createElement(ot.a.Title,null,!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"New Message"),r.a.createElement("h6",null,"To:")),u&&r.a.createElement(Xe,{size:"26",fullname:"true",bold:"true",user:u}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){return U.apply(this,arguments)},className:"text-primary"}))),r.a.createElement("hr",null),u&&r.a.createElement(m.a,{className:"mh-100 overflow-auto flex-column-reverse",ref:R},r.a.createElement(Xt,{sender:y,recipient:u.userID})),!u&&r.a.createElement(f.a,{className:"h-75 overflow-auto"},w.map((function(e,t){return e.userID===y?r.a.createElement("div",{key:t}):r.a.createElement("button",{type:"button",key:t,className:"flex-row text-dark justify-content-start p-2 container-choose-to nav-btn w-100 mb-1 white",onClick:function(){return L(e)}},r.a.createElement(Xe,{size:"36",fullname:"true",bold:"false",user:e}))})))),u&&r.a.createElement(ot.a.Footer,{className:"mt-5"},r.a.createElement(m.a,null,""===C.text&&r.a.createElement(f.a,{xs:2},r.a.createElement(d.a,{variant:"light",size:"sm",className:"add-photo-btn",onClick:function(){return O(!0)}},r.a.createElement(lt.a,{size:"21px",className:"text-primary"}))),r.a.createElement(f.a,{xs:""===C.text?8:10,className:"align-self-center",style:{background:"#e9ecef",borderRadius:"18px"}},C.isPhoto&&r.a.createElement("div",{className:"comment-img-container"},r.a.createElement(Je,{alt:"",storagePath:"/".concat(C.photoURL),className:"img-to-comment"}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){tt({state:C,setState:I,user:x,userID:y})}}))),r.a.createElement(St,{onChange:function(e){$e({e:e,state:C,setState:I})},onKeyPress:function(e){return at(e,B)},welcomeText:"Aa",value:C.text,className:"w-100 mt-2"})),r.a.createElement(f.a,{xs:2},r.a.createElement(d.a,{variant:"light",size:"sm",className:"add-photo-btn",onClick:function(){(""!==C.text||C.isPhoto)&&B()}},r.a.createElement(Be.c,{size:"23px",className:"text-primary"}))))),r.a.createElement(pt,{show:j,setShow:O,updatePost:function(e){et({state:C,setState:I,file:e,userID:y})},userID:y}))},r.a.createElement("button",{type:"button",className:"msg-btn",onClick:function(){return L(null)},"aria-label":"Message"},r.a.createElement(Gt.a,{size:"22px","aria-hidden":"true"}))))}),$t=(a(178),function(e){var t=e.className,a=Object(Ce.c)((function(e){return e.accountPage})),c=a.profileLink,l=a.isWatch,o=Object(Ce.b)();return Object(n.useEffect)((function(){o(Z(l?"watch":"home"))}),[l,o]),r.a.createElement(m.a,{className:"".concat(t," overflow-hidden vh-100")},r.a.createElement(f.a,{className:"mh-100 overflow-auto left-navbar-col"},r.a.createElement(qt,{profileLink:c})),r.a.createElement(f.a,{sm:9,md:l?12:9,lg:l?9:6,className:"mh-100 overflow-auto hide-scrollbar"},!l&&r.a.createElement(Vt,null),l&&r.a.createElement(Kt,null)),!l&&r.a.createElement(f.a,{className:"mh-100 overflow-auto contacts-col",style:{position:"relative"}},r.a.createElement(Zt,null)))}),ea=(a(179),a(134)),ta=a.n(ea),aa=function(e){var t=Object(rt.g)(),a=Object(Ce.b)(),c="/fakebook/friends/list"===t.pathname;return Object(n.useEffect)((function(){a(Z("friends"))}),[a]),window.innerWidth>600||c?r.a.createElement(m.a,{className:"overflow-hidden friends-list"},r.a.createElement(xt,null),r.a.createElement(f.a,{className:"overflow-auto mh-100 hide-scrollbar col-two"},c?r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column align-items-center justify-content-center"},r.a.createElement("img",{width:"200px",src:ta.a,alt:"cartoon of fakebook friends",className:"p-4"}),r.a.createElement("h5",{className:"text-muted"},r.a.createElement("b",null,"Select people's names to preview their profile."))):r.a.createElement("div",{className:"profile-container"},r.a.createElement(At,null)))):r.a.createElement(At,null)},na=a(135),ra=function(e){var t=Object(Ce.c)((function(e){return e.accountPage.profileLink})),a=Object(Ce.c)((function(e){return e.currentUser})),c=Object(Ce.c)((function(e){return e.users})),l=Object(Ce.c)((function(e){return e.accountPage.isFriendsListPage})),o=Object(Ce.b)();Object(n.useEffect)((function(){var e=(de=le.getState().user.id,(pe=Ee.doc(de)).onSnapshot((function(e){le.dispatch(D(e.data()))}))),t=Ee.onSnapshot((function(e){var t=[];e.forEach((function(e){var a=e.data();a.userID=e.id,t.push(a)})),le.dispatch(z(t))})),a=be.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.timestamp,r="";n&&(r=n.toDate().toLocaleString()),a.timestamp=r,a.postID=e.id,t.push(a)})),le.dispatch(T(t))}));he();window.addEventListener("beforeunload",(function(e){ge()}));return document.addEventListener("visibilitychange",(function(e){"visible"===document.visibilityState?he():ge()})),function(){e(),t(),a()}}),[]);var s=a&&a.index&&a.index>0?"".concat(t,".").concat(a.index):t;return Object(n.useEffect)((function(){return o(ae(s))}),[o,s]),0!==c.length&&a?r.a.createElement("div",{className:"bg-200 vw-100 main-container overflow-hidden"},r.a.createElement(na.a,{className:"w-100 p-0",fluid:!0},r.a.createElement(Fe.a,null,r.a.createElement(nt,null),r.a.createElement(rt.c,null,r.a.createElement(rt.a,{path:"/fakebook/friends/list",render:function(){return o(ne(!0)),r.a.createElement(aa,null)}}),r.a.createElement(rt.a,{path:"/fakebook/photo/:userID/:n",render:function(){return r.a.createElement(Wt,null)}}),r.a.createElement(rt.a,{path:"/fakebook/watch",render:function(){return o(ne(!1)),o(re(!0)),r.a.createElement($t,{className:"pt-5"})}}),r.a.createElement(rt.a,{path:"/fakebook/:userName",render:function(){return l?r.a.createElement(aa,null):r.a.createElement(At,null)}}),r.a.createElement(rt.a,{path:"/fakebook",render:function(){return o(ne(!1)),o(re(!1)),r.a.createElement($t,{className:"pt-5"})}}))))):r.a.createElement("div",null,"...Loading")},ca=a(202),la=function(e){var t=e.show,a=e.onHide,c=e.onExit,l=Object(Ce.c)((function(e){return e.user.error})),s=Object(Ce.b)(),i=Object(n.useState)(""),m=Object(o.a)(i,2),f=m[0],b=m[1];return r.a.createElement(p.a,{show:t,onHide:a,onExited:c},r.a.createElement(p.a.Header,null,r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Password Reset Email"))),r.a.createElement(p.a.Body,null,""!==l&&r.a.createElement(ca.a,{variant:"danger"},l),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Please enter the email address associated to your account to receive a password reset email."),r.a.createElement(u.a.Control,{type:"email",placeholder:"Email",name:"email",size:"lg",onChange:function(e){e.preventDefault();var t=e.target;b(t.value)},value:f}))),r.a.createElement(p.a.Footer,null,r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"light",onClick:function(){a(),s(P(""))}},r.a.createElement("b",null,"Cancel")),r.a.createElement(d.a,{variant:"primary",onClick:function(){(function(e){return fe.sendPasswordResetEmail(e)})(f).then((function(){a()})).catch((function(e){return s(P(e.message))}))}},r.a.createElement("b",{className:"px-2"},"Send"))))};var oa=function(){var e=Object(Ce.c)((function(e){return e.user})),t=Object(Ce.b)();Object(n.useEffect)((function(){return fe.onAuthStateChanged((function(e){if(e){var t=e.uid,a=e.emailVerified,n=e.displayName;le.dispatch(w({id:t,displayName:n,isEmailVerified:a}))}else le.dispatch(N());le.dispatch(C())}))}),[]);var a=Object(n.useState)(!1),c=Object(o.a)(a,2),l=c[0],s=c[1];function i(){s(!1)}function u(){s(!0)}var p=Object(n.useCallback)(i,[]),b=e&&e.displayName&&e.displayName.trim().split(" ")||[],E=b.pop(),h=b.join(" "),g="/fakebook/".concat(E,".").concat(h);Object(n.useEffect)((function(){return t(ae(g))}),[g,t]);var v=Object(n.useState)(!0),k=Object(o.a)(v,2),j=k[0],O=k[1];return e.isLoading?r.a.createElement("div",null,"...Loading"):e.isSignedIn&&!e.error?e.isEmailVerified?r.a.createElement(ra,null):r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{className:"bg-200 vh-100"},r.a.createElement(m.a,{className:"h-100 align-items-center"},r.a.createElement(f.a,{lg:{span:5,offset:1},className:"d-flex justify-content-center"},r.a.createElement(Le,null)),r.a.createElement(f.a,{lg:5,className:"bg-200 d-flex justify-content-center"},r.a.createElement("div",{className:"login p-3 bg-light"},r.a.createElement(Ie,{onClickForgottenPswd:function(){O(!1),u()}}),r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"success",size:"lg",className:"d-block w-60 mx-auto mt-4",onClick:u},r.a.createElement("b",null,"Create New Account")))),r.a.createElement(Se,{show:l&&j,onHide:p,onExit:function(){return O(!0)}}),r.a.createElement(la,{show:l&&!j,onHide:i,onExit:function(){return O(!0)}})))};l.a.render(r.a.createElement(Ce.a,{store:le},r.a.createElement(oa,null)),document.getElementById("root"))}},[[139,14,15]]]);
//# sourceMappingURL=main.bff549fa.chunk.js.map