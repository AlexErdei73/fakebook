(this.webpackJsonpfakebook=this.webpackJsonpfakebook||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/placeholder-image.d56c1d33.jpg"},127:function(e,t,a){e.exports=a.p+"static/media/fakebook-avatar.c2424276.jpeg"},128:function(e,t,a){e.exports=a.p+"static/media/background-server.070904ee.jpg"},134:function(e,t,a){e.exports=a.p+"static/media/friends.2536911b.jpg"},139:function(e,t,a){e.exports=a(180)},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(41),o=a.n(c),l=(a(144),a(17)),i=(a(145),a(6)),s=a(25),u=a(30),m=a(99),f=a(53),d=a(57),p=a(88),b=(a(146),a(2)),E=a.n(b),h=a(35),g=a(22),v=a(4),k=a(59),x=(a(181),a(148),a(183),a(182),{apiKey:"AIzaSyA6giH2VCl9pBrO86uGH3gcwbmeM-dYMPM",authDomain:"fakebook-2df7b.firebaseapp.com",projectId:"fakebook-2df7b",storageBucket:"fakebook-2df7b.appspot.com",messagingSenderId:"1030600439600",appId:"1:1030600439600:web:98617c1d503260115cfaf5",measurementId:"G-YN35E2SN2E"}),j=a(34),O=Object(j.b)({name:"user",initialState:{id:"",isSignedIn:!1,isEmailVerified:!1,error:"",isLoading:!0},reducers:{signIn:function(e,t){e.id=t.payload.id,e.displayName=t.payload.displayName,e.isEmailVerified=t.payload.isEmailVerified,e.isSignedIn=!0},signOut:function(e){e.isSignedIn=!1},errorOccured:function(e,t){e.error=t.payload},loadingStarted:function(e){e.isLoading=!0},loadingFinished:function(e){e.isLoading=!1}}}),y=O.actions,w=y.signIn,N=y.signOut,L=y.errorOccured,P=y.loadingStarted,S=y.loadingFinished,C=O.reducer,I=Object(j.b)({name:"currentUser",initialState:{firstname:"",lastname:"",profilePictureURL:"fakebook-avatar.jpeg",backgroundPictureURL:"background-server.jpg",photos:[],posts:[],isOnline:!1},reducers:{currentUserUpdated:function(e,t){var a=t.payload,n=a.firstname,r=a.lastname,c=a.profilePictureURL,o=a.backgroundPictureURL,l=a.photos,i=a.posts,s=a.isOnline,u=a.index;e.firstname=n,e.lastname=r,e.profilePictureURL=c,e.backgroundPictureURL=o,e.isOnline=s,u&&(e.index=u),e.photos=[],e.posts=[],l.forEach((function(t){return e.photos.push(t)})),i.forEach((function(t){return e.posts.push(t)}))}}}),R=I.actions.currentUserUpdated,D=I.reducer,U=Object(j.b)({name:"users",initialState:[],reducers:{usersUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),z=U.actions.usersUpdated,F=U.reducer,T=Object(j.b)({name:"posts",initialState:[],reducers:{postsUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),A=T.actions.postsUpdated,B=T.reducer,H=Object(j.b)({name:"incomingMessages",initialState:[],reducers:{incomingMessagesUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),M=H.actions.incomingMessagesUpdated,Y=H.reducer,W=Object(j.b)({name:"outgoingMessages",initialState:[],reducers:{outgoingMessagesUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),V=W.actions.outgoingMessagesUpdated,q=W.reducer,K=Object(j.b)({name:"images",initialState:[],reducers:{imageAdded:function(e,t){-1===e.map((function(e){return e.storagePath})).indexOf(t.payload.storagePath)&&e.push(t.payload)},imageUrlFound:function(e,t){var a=e.map((function(e){return e.storagePath})).indexOf(t.payload.storagePath);a>-1&&(e[a].url=t.payload.url)}}}),G=K.actions,J=G.imageAdded,_=G.imageUrlFound,Q=K.reducer,X=Object(j.b)({name:"link",initialState:{active:"home",previous:"home"},reducers:{linkUpdated:function(e,t){e.previous=e.active,e.active=t.payload}}}),Z=X.actions.linkUpdated,$=X.reducer,ee=Object(j.b)({name:"accountPage",initialState:{profileLink:"",isWatch:!1,isFriendsListPage:!1},reducers:{profileLinkSet:function(e,t){e.profileLink=t.payload},friendsListPageSet:function(e,t){e.isFriendsListPage=t.payload},watchSet:function(e,t){e.isWatch=t.payload}}}),te=ee.actions,ae=te.profileLinkSet,ne=te.friendsListPageSet,re=te.watchSet,ce=ee.reducer,oe=Object(j.a)({reducer:{user:C,currentUser:D,users:F,posts:B,incomingMessages:Y,outgoingMessages:q,images:Q,link:$,accountPage:ce}}),le=["timestamp"],ie={url:"https://alexerdei73.github.io/fakebook/"};k.a.initializeApp(x),k.a.appCheck().activate("6LfCG9UhAAAAAL8vSI4Hbustx8baJEDMA0Sz1zD2",!0);var se=k.a.storage();function ue(e){return me.apply(this,arguments)}function me(){return(me=Object(v.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=se.ref(t),e.next=3,a.getDownloadURL();case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=k.a.auth();var de,pe,be=k.a.firestore(),Ee=be.collection("users");function he(){pe.update({isOnline:!0})}function ge(){return pe.update({isOnline:!1})}function ve(){return(ve=Object(v.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe.dispatch(P()),e.next=3,ge();case 3:return e.next=5,fe.signOut();case 5:oe.dispatch(S());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){var t,a;return"incoming"===e?(t="recipient",a=M):(t="sender",a=V),be.collection("messages").where(t,"==",de).onSnapshot((function(e){var t=[];e.forEach((function(e){var a,n=e.data(),r=e.data().timestamp;a=r?r.toDate().toISOString():"",n.timestamp=a,n.id=e.id,""!==a&&t.push(n)})),oe.dispatch(a(t))}))}function xe(){return(xe=Object(v.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe.createUserWithEmailAndPassword(t.email,t.password);case 3:return a=e.sent,e.next=6,a.user.updateProfile({displayName:"".concat(t.firstname," ").concat(t.lastname)});case 6:return e.next=8,be.collection("users").where("firstname","==",t.firstname).where("lastname","==",t.lastname).get();case 8:return n=e.sent,r=n.size,e.next=12,be.collection("users").doc(a.user.uid).set({firstname:t.firstname,lastname:t.lastname,profilePictureURL:"fakebook-avatar.jpeg",backgroundPictureURL:"background-server.jpg",photos:[],posts:[],isOnline:!1,index:r});case 12:return e.next=14,k.a.auth().signOut();case 14:return e.next=16,a.user.sendEmailVerification(ie);case 16:console.log("Verification email has been sent."),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),oe.dispatch(L(e.t0.message)),console.log(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function je(){return(je=Object(v.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="Please verify your email before to continue",n="",e.prev=2,e.next=5,fe.signInWithEmailAndPassword(t.email,t.password);case 5:e.sent.user.emailVerified?oe.dispatch(L(n)):(fe.signOut(),oe.dispatch(L(a))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),oe.dispatch(L(e.t0.message));case 12:return e.prev=12,oe.dispatch(S()),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))).apply(this,arguments)}function Oe(){return(Oe=Object(v.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=be.collection("posts"),e.next=3,a.add(Object(s.a)(Object(s.a)({},t),{},{timestamp:k.a.firestore.FieldValue.serverTimestamp()}));case 3:return n=e.sent,ye(n.id),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e){var t,a=oe.getState().currentUser;(t=a.posts?Object(g.a)(a.posts):[]).unshift(e),pe.update({posts:t})}function we(e,t){var a=be.collection("posts").doc(t),n=(e.timestamp,Object(h.a)(e,le));a.update(n)}function Ne(e){return console.log(pe),console.log(e),pe.update(e)}var Le=be.collection("messages");var Pe=function(e){var t=e.show,a=e.onHide,c=e.onExit,o=Object(n.useState)({firstname:"",lastname:"",email:"",password:""}),b=Object(l.a)(o,2),E=b[0],h=b[1],g=function(e){return h(Object(s.a)(Object(s.a)({},E),{},Object(i.a)({},e.target.name,e.target.value)))},v=Object(n.useState)(!1),k=Object(l.a)(v,2),x=k[0],j=k[1],O=Object(n.useState)(!1),y=Object(l.a)(O,2),w=y[0],N=y[1];return Object(n.useEffect)((function(){w&&a()}),[w,a]),r.a.createElement(p.a,{show:t,onHide:a,onExited:c},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Sign Up"),r.a.createElement("div",{className:"title-footer"},"It's quick and easy."))),r.a.createElement(p.a.Body,null,r.a.createElement(u.a,{noValidate:!0,validated:x,onSubmit:function(e){e.preventDefault(),!0===e.currentTarget.checkValidity()&&(!function(e){xe.apply(this,arguments)}({firstname:E.firstname,lastname:E.lastname,email:E.email,password:E.password}),N(!0)),j(!0)}},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"First name",name:"firstname",onChange:g,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"First name required.")),r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"Surename",name:"lastname",onChange:g,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Last name required."))),r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"email",placeholder:"Email address",name:"email",onChange:g,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Email required in the right format."))),r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"New password",name:"password",onChange:g,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Password required."))),r.a.createElement(u.a.Row,null,r.a.createElement("p",{className:"text-muted p-1 text-legal"},"Signing Up for fakebook you agree to share the uploaded details with any other user. Please do not upload any sensitive data to the app, which is built strictly for demonstration purposes.")),r.a.createElement(m.a,null,r.a.createElement(d.a,{type:"submit",variant:"success",className:"w-50 mx-auto"},r.a.createElement("strong",null,"Sign Up"))))))},Se=a(18),Ce=function(e){var t=e.onClickForgottenPswd,a=Object(n.useState)({email:"",password:""}),c=Object(l.a)(a,2),o=c[0],i=c[1],m=function(e){var t=Object(s.a)({},o);t[e.target.name]=e.target.value,i(t),p(L(""))},f=Object(Se.c)((function(e){return e.user.error})),p=Object(Se.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),""!==o.email?""!==o.password?(p(P()),function(e){je.apply(this,arguments)}(o)):p(L("Password is required.")):p(L("Email is required."))},className:"w-100"},r.a.createElement(u.a.Control,{type:"email",placeholder:"Email",name:"email",size:"lg",className:"mb-2 w-100",onChange:m,isInvalid:-1!==f.indexOf("mail")||-1!==f.indexOf("identifier")}),r.a.createElement(u.a.Control,{type:"text",placeholder:"Password",name:"password",size:"lg",className:"mb-2 w-100",onChange:m,isInvalid:""!==f}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},f),r.a.createElement(d.a,{variant:"primary",type:"submit",size:"lg",className:"w-100"},r.a.createElement("b",null,"Log In"))),r.a.createElement(d.a,{variant:"link",type:"link",className:"w-100",id:"link-button",onClick:t},"Forgotten password?"))},Ie=(a(158),a(159),function(){return r.a.createElement("div",{className:"recent-logins"},r.a.createElement("h1",{className:"text-primary w-100"},r.a.createElement("strong",{style:{fontSize:"3.5rem"}},"fakebook")),r.a.createElement("h3",{className:"w-100"},r.a.createElement("p",null,"Fakebook helps you connect and share with the people in your life.")))}),Re=a(204),De=a(203),Ue=a(201),ze=a(136),Fe=a(23),Te=a(129),Ae=a(76),Be=a(45),He=a(108),Me=(a(160),a(126)),Ye=a.n(Me),We=a(127),Ve=a.n(We),qe=a(128),Ke=a.n(qe),Ge=["storagePath","alt"],Je=function(e){var t=e.storagePath,a=e.alt,c=Object(h.a)(e,Ge),o=Object(Se.c)((function(e){return e.images})),i=Object(Se.b)(),s=Object(n.useState)(Ye.a),u=Object(l.a)(s,2),m=u[0],f=u[1];function d(e){var t=e.split(".");return t[t.length-2]+="_400x400",t.join(".")}return Object(n.useEffect)((function(){var e=!0,a=function(){return e=!1};if("fakebook-avatar.jpeg"===t)return f(Ve.a),a;if("background-server.jpg"===t)return f(Ke.a),a;var n=o.map((function(e){return e.storagePath})).indexOf(t);if(-1===n)-1===(n=o.map((function(e){return e.storagePath})).indexOf(d(t)))&&i(J({storagePath:t,url:m})),ue(t).then((function(e){f(e),i(_({storagePath:t,url:e}))})).catch((function(e){ue(d(t)).then((function(e){f(e),i(_({storagePath:t,url:e}))}))}));else{var r=o[n].url;r!==m&&e&&f(r)}return a}),[o,t,m,i]),r.a.createElement("img",Object.assign({src:m,alt:a},c))},_e=["size","url","isOnline"],Qe=function(e){var t=e.size,a=e.url,n=e.isOnline,c=Object(h.a)(e,_e),o=Math.floor(t/6),l=Math.floor(.8536*t-o/2);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,Object.assign({style:{width:"".concat(t,"px"),height:"".concat(t,"px"),objectFit:"cover",borderRadius:"".concat(t/2,"px"),pointerEvents:"none",position:"relative"},storagePath:a,alt:""},c)),n&&r.a.createElement("div",{className:"bg-success",style:{width:"".concat(2*o,"px"),height:"".concat(2*o,"px"),borderRadius:"50%",position:"absolute",top:"".concat(l,"px"),left:"".concat(l,"px"),border:"2px solid white"}}))},Xe=function(e){var t,a=e.size,n=e.fullname,c=e.bold,o=e.user,l=o.firstname,i=o.lastname,s=o.profilePictureURL,u=o.isOnline;return t="true"===n?"".concat(l," ").concat(i):"".concat(l),r.a.createElement(m.a,{style:{minWidth:"150px",color:"inherited"}},r.a.createElement(f.a,{xs:"auto",className:"px-2 ml-2"},r.a.createElement(Qe,{size:a,url:s,isOnline:u})),r.a.createElement(f.a,{className:"align-self-center p-0",style:{color:"inherited"}},"true"===c?r.a.createElement("b",null,t):t))};function Ze(e,t,a){var n=e.currentTarget,r=t;if(r&&("profile"===r.id&&(r.style.backgroundColor="#e9ecef"),r.style.borderBottom="3px solid transparent",r.style.color=""),n){if(a&&a(n),n.style.color="dodgerblue","profile"===n.id)return void(n.style.backgroundColor="lightblue");n.style.borderBottom="3px solid dodgerblue"}}function $e(e){var t=e.e.target.value,a=Object(s.a)({},e.state);return a.text=t,e.setState(a),t}function et(e){var t=Object(s.a)({},e.state);t.isPhoto=!0,t.photoURL="".concat(e.userID,"/").concat(e.file.name),e.setState(t)}function tt(e){!function(e,t,a){var n=Object(s.a)({},e);n.isPhoto=!1,n.photoURL="",t(n),a&&a()}(e.state,e.setState,e.sideEffect)}function at(e,t){e.shiftKey||"Enter"===e.code&&(e.preventDefault(),t())}var nt=function(e){var t={home:Object(n.useRef)(null),friends:Object(n.useRef)(null),watch:Object(n.useRef)(null),profile:Object(n.useRef)(null)},a=Object(Se.c)((function(e){return e.currentUser})),c=Object(Se.c)((function(e){return e.link})),o=Object(Se.c)((function(e){return e.accountPage.profileLink})),l=Object(Se.b)();Object(n.useEffect)((function(){Ze({currentTarget:t[c.active].current},t[c.previous].current)}),[c,t]);function i(){l(ne(!1)),l(Z("profile"))}return r.a.createElement("div",{className:"titlebar bg-light"},r.a.createElement(Re.a,{bg:"light",className:"p-0 nav-container"},r.a.createElement(Re.a.Brand,{as:Fe.b,to:"/fakebook"},r.a.createElement(Ae.a,{color:"dodgerblue",fontSize:"2em",className:"mx-3"})),r.a.createElement("div",{style:{width:"450px"},className:"spaceing"}),r.a.createElement(De.a,{className:"w-75 justify-content-start mr-5"},r.a.createElement(De.a.Item,{className:"first"},r.a.createElement(Fe.b,{to:"/fakebook",className:"nav-link",ref:t.home},r.a.createElement(Te.a,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}}))),r.a.createElement(De.a.Item,null,r.a.createElement(Fe.b,{to:"/fakebook/friends/list",className:"nav-link",ref:t.friends},r.a.createElement(Ae.b,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}}))),r.a.createElement(De.a.Item,null,r.a.createElement(Fe.b,{to:"/fakebook/watch",className:"nav-link",ref:t.watch},r.a.createElement(Be.a,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}})))),r.a.createElement(De.a,{className:"w-25 justify-content-end align-self-center"},r.a.createElement(De.a.Item,{className:"align-self-center first"},r.a.createElement(Fe.b,{to:o,className:"nav-link profile",id:"profile",onClick:i,ref:t.profile},r.a.createElement(Xe,{user:a,size:"30",fullname:"false",bold:"true"}))),r.a.createElement(De.a.Item,{className:"align-self-center"},r.a.createElement(Ue.a,{title:"",className:"mr-4 custom-drop-down-btn",menuAlign:"right"},r.a.createElement(ze.a.Item,{as:Fe.b,to:o,onClick:i},r.a.createElement(Xe,{user:a,size:"60",fullname:"true",bold:"true"})),r.a.createElement(ze.a.Divider,null),r.a.createElement(ze.a.Item,{as:Fe.b,to:"/fakebook/",onClick:function(){!function(){ve.apply(this,arguments)}()},className:"p-0"},r.a.createElement(He.a,{fontSize:"1.5em",className:"mx-4"}),r.a.createElement("span",null,"Log Out"),r.a.createElement("div",{style:{width:"20em"}})))))))},rt=a(31),ct=a(132),ot=a(63),lt=a(207),it=function(e){var t,a=e.width,n=e.height,c=e.index,o=e.userID,l=e.photo,i=e.onClick,s=e.className;return t="true"===e.useStoragePath?l:"/".concat(o,"/").concat(l.fileName),r.a.createElement("div",{key:c,className:s,style:{display:"inline-block",position:"relative",width:"".concat(a),height:"0px",paddingBottom:"".concat(n)}},r.a.createElement(Je,{alt:"",id:c,storagePath:t,style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",objectFit:"cover"},onClick:i}))},st=function(e){var t=Object(rt.i)().url,a=e.userID,c=e.openFileInput,o=e.photosLinkRef,l=e.activeLink,i=e.setActiveLink,s=Object(Se.c)((function(e){return e.users})),u=Object(Se.c)((function(e){return e.user.id})),p=a===u,b=s.find((function(e){return e.userID===a})).photos;return Object(n.useEffect)((function(){Ze({currentTarget:o.current},l,i)}),[l,o,i]),r.a.createElement(lt.a,{variant:"light",className:"w-100"},r.a.createElement(lt.a.Body,null,r.a.createElement(lt.a.Title,null,r.a.createElement(Fe.b,{to:t,className:"text-body"},r.a.createElement("b",null,"Photos")),p&&r.a.createElement(d.a,{variant:"link",style:{textDecoration:"none",float:"right"},onClick:c},r.a.createElement("b",null,"Add Photos"))),r.a.createElement(m.a,{className:"w-100"},b.map((function(e,t){return r.a.createElement(f.a,{key:t,xs:6,sm:4,md:3,lg:2,className:"p-1"},r.a.createElement(Fe.b,{to:"/fakebook/photo/".concat(a,"/").concat(t)},r.a.createElement(it,{width:"100%",height:"100%",userID:a,photo:e,index:t})))})))))},ut=a(206),mt=(a(165),function(e){var t=e.user,a="".concat(t.firstname," ").concat(t.lastname),c=Object(n.useState)(!1),o=Object(l.a)(c,2),i=o[0],s=o[1],u=Object(rt.f)();function m(){u.push(t.index&&t.index>0?"/fakebook/".concat(t.lastname,".").concat(t.firstname,".").concat(t.index):"/fakebook/".concat(t.lastname,".").concat(t.firstname))}return r.a.createElement(f.a,{xs:6,className:"my-3"},r.a.createElement(ut.a,{placement:"auto",show:i,overlay:r.a.createElement("div",{className:"popup-card",onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},onClick:m},r.a.createElement("div",{className:"m-3"},r.a.createElement(Qe,{size:"120",url:t.profilePictureURL})),r.a.createElement("h4",{className:"name-tag"},r.a.createElement("b",null,a)))},r.a.createElement("button",{type:"button",onClick:m,className:"friend-btn",tabIndex:"-1"},r.a.createElement(Je,{storagePath:t.profilePictureURL,width:"90px",height:"90px",alt:"",className:"profile-picture",onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}}))),r.a.createElement("button",{type:"button",className:"ml-3 friend-btn",onClick:m},r.a.createElement("b",null,a)))}),ft=function(e){var t,a=Object(rt.i)().url,c=e.friendsLinkRef,o=e.activeLink,l=e.setActiveLink,i=Object(Se.c)((function(e){return e.users}));return Object(n.useEffect)((function(){Ze({currentTarget:c.current},o,l)}),[o,c,l]),t=i||[],r.a.createElement(lt.a,null,r.a.createElement(lt.a.Body,null,r.a.createElement(lt.a.Title,null,r.a.createElement(Fe.b,{to:a,className:"text-body"},r.a.createElement("b",null,"Friends"))),r.a.createElement(m.a,null,t.map((function(e,t){return r.a.createElement(mt,{user:e,key:t})})))))},dt=a(98),pt=function(e){var t=e.show,a=e.setShow,c=e.updateDatabase,o=Object(n.useRef)(null);return Object(n.useEffect)((function(){t&&(o.current.click(),a(!1))}),[t,a]),r.a.createElement("input",{type:"file",accept:"image/*",ref:o,style:{display:"none"},onChange:function(e){e.preventDefault();var t=e.target.files[0];(function(e){return se.ref(de).child(e.name).put(e)})(t).then((function(){return c(t)}))}})},bt=a(64),Et=(a(166),function(e){var t=e.show,a=e.onClose,c=e.setText,o=e.isYoutubeBtnPressed,i=e.placeholder,u=Object(Se.c)((function(e){return e.currentUser})),m=Object(Se.c)((function(e){return e.user.id})),f="For adding YouTube video do the following:\n     1. copy link of the video from the addresse bar of your browser\n     2. press YouTube button again to upload the YouTube video to your post\n     3. add your text for the post\n     4. push the post button",b={userID:"".concat(m),text:"",isPhoto:!1,photoURL:"",isYoutube:!1,youtubeURL:"",likes:[]},E=Object(n.useState)(b),h=Object(l.a)(E,2),g=h[0],v=h[1];var k,x,j=Object(n.useState)(!1),O=Object(l.a)(j,2),y=O[0],w=O[1];y?(k="primary",x=!1):(k="secondary",x=!0);var N=Object(n.useState)(!1),L=Object(l.a)(N,2),P=L[0],S=L[1];function C(){""!==g.text||g.isYoutube||w(!1)}function I(){return o&&!g.isYoutube?f:i}return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{show:t,onHide:a},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement("div",{className:"w-100 d-flex justify-content-center"},r.a.createElement(p.a.Title,null,r.a.createElement("b",null,"Create Post")))),r.a.createElement(p.a.Body,null,r.a.createElement(Xe,{user:u,size:"45",fullname:"true",bold:"true"}),r.a.createElement("div",{className:"mt-2 scrolling-container"},r.a.createElement("textarea",{type:"text",onChange:function(e){!function(e){w(""!==e);c(e)}($e({e:e,state:g,setState:v}))},className:"w-100 mt-2 textarea",placeholder:I(),rows:I()===f&&""===g.text?7:3,value:g.text}),g.isPhoto&&r.a.createElement("div",{className:"mb-2 img-container"},r.a.createElement(Je,{alt:"",storagePath:"/".concat(g.photoURL),className:"w-100 img-to-post"}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){tt({state:g,setState:v,user:u,userID:m,sideEffect:C})}}))),g.isYoutube&&r.a.createElement("div",{className:"mb-2 video-container"},r.a.createElement("iframe",{src:g.youtubeURL,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope",allowFullScreen:!0}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){var e=Object(s.a)({},g);e.isYoutube=!1,e.youtubeURL="",v(e),""!==g.text||g.isPhoto||w(!1)}})))),r.a.createElement("div",{className:"w-100 my-2 add-to-post"},r.a.createElement("b",null,"Add to your post"),r.a.createElement(d.a,{className:"ml-2 add-photo-btn",variant:"light",size:"sm",onClick:function(){var e=g.text,t="https://www.youtube.com/watch?v=";if(e.startsWith(t)||e.startsWith("https://m.youtube.com/watch?v=")){var a;a=e.startsWith(t)?t.length:"https://m.youtube.com/watch?v=".length;var n=e.slice(a),r="https://www.youtube.com/embed/".concat(n),o=Object(s.a)({},g);o.isYoutube=!0,o.youtubeURL=r,o.text="",v(o),c(""),w(!0)}},disabled:g.isPhoto||g.isYoutube},r.a.createElement(bt.b,{size:"26px",className:"text-danger","aria-label":"YouTube"})),r.a.createElement(d.a,{className:"ml-2 add-photo-btn",variant:"light",size:"sm",onClick:function(){return S(!0)},disabled:g.isPhoto||g.isYoutube},r.a.createElement(ot.a,{size:"26px",className:"text-success","aria-label":"photo"}))),r.a.createElement(d.a,{variant:k,className:"w-100 mt-3",disabled:x,onClick:function(){(function(e){return Oe.apply(this,arguments)})(g).then((function(){v(b),c(""),a()}))}},r.a.createElement("b",null,"Post")))),r.a.createElement(pt,{show:P,setShow:S,updatePost:function(e){et({state:g,setState:v,file:e,userID:m}),w(!0)}}))}),ht=(a(167),["firstname","isCurrentUser"]),gt=function(e){var t=e.firstname,a=e.isCurrentUser,c=Object(h.a)(e,ht),o=Object(Se.c)((function(e){return e.currentUser})),i="What's on your mind ".concat(o.firstname,"?"),s="Write something to ".concat(t),u=Object(n.useState)(!1),m=Object(l.a)(u,2),f=m[0],p=m[1],b=Object(n.useState)(!1),E=Object(l.a)(b,2),g=E[0],v=E[1],k=Object(n.useState)(""),x=Object(l.a)(k,2),j=x[0],O=x[1],y=function(){return p(!0)};function w(){return a?i:s}return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt.a,Object.assign({className:"create-post-card"},c),r.a.createElement(lt.a.Body,null,r.a.createElement(lt.a.Title,null,r.a.createElement(Qe,{size:"40",url:o.profilePictureURL}),r.a.createElement("button",{type:"button",className:"p-2 text-dark text-btn",onClick:y},function(){var e=j.length;if(0===e)return w();var t=j.slice(0,55);return e>55&&(t+="..."),t}())),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex"},r.a.createElement(d.a,{variant:"light",className:"add-btn",size:"sm",onClick:function(){v(!0),p(!0)}},r.a.createElement(bt.b,{size:"28px",className:"text-danger"}),"YouTube"),r.a.createElement(d.a,{variant:"light",className:"add-btn",size:"sm",onClick:y},r.a.createElement(ot.a,{size:"28px",className:"text-success"}),"Photo")))),r.a.createElement(Et,{show:f,onClose:function(){p(!1),v(!1)},setText:O,isYoutubeBtnPressed:g,placeholder:w()}))},vt=["user","userID","photosLinkRef","activeLink","setActiveLink"],kt=function(e){var t=e.user,a=e.userID,n=e.photosLinkRef,c=e.activeLink,o=e.setActiveLink,l=Object(h.a)(e,vt),i=t.photos,s="/fakebook/".concat(t.lastname,".").concat(t.firstname,"/Photos");function u(){Ze({currentTarget:n.current},c,o)}return r.a.createElement(lt.a,l,r.a.createElement(lt.a.Body,null,r.a.createElement(lt.a.Title,null,r.a.createElement(Fe.b,{to:s,className:"text-body",onClick:u},r.a.createElement("b",null,"Photos"))),r.a.createElement(m.a,null,i.map((function(e,t){return t<9&&r.a.createElement(f.a,{key:t,xs:4,className:"m-0",style:{paddingLeft:"3px",paddingRight:"3px",paddingTop:"0",paddingBottom:"0"}},r.a.createElement(Fe.b,{to:"/fakebook/photo/".concat(a,"/").concat(t),className:"text-body",onClick:u,tabIndex:"-1"},r.a.createElement(it,{photo:e,userID:a,index:t,width:"100%",height:"100%"})))})))))},xt=["user","friendsLinkRef","activeLink","setActiveLink"],jt=function(e){var t=e.user,a=e.friendsLinkRef,n=e.activeLink,c=e.setActiveLink,o=Object(h.a)(e,xt),l=t.index&&t.index>0?"/fakebook/".concat(t.lastname,".").concat(t.firstname,".").concat(t.index,"/Friends"):"/fakebook/".concat(t.lastname,".").concat(t.firstname,"/Friends");function i(){Ze({currentTarget:a.current},n,c)}var s=Object(Se.c)((function(e){return e.users}));return r.a.createElement(lt.a,o,r.a.createElement(lt.a.Body,null,r.a.createElement(lt.a.Title,null,r.a.createElement(Fe.b,{to:l,className:"text-body",onClick:i},r.a.createElement("b",null,"Friends"))),r.a.createElement(lt.a.Subtitle,{className:"text-muted"},s.length," friends"),r.a.createElement(m.a,null,s.map((function(e,t){var a=e.index&&e.index>0?"/fakebook/".concat(e.lastname,".").concat(e.firstname,".").concat(e.index):"/fakebook/".concat(e.lastname,".").concat(e.firstname),n="".concat(e.firstname," ").concat(e.lastname);return t<9&&r.a.createElement(f.a,{key:t,xs:4,className:"m-0",style:{paddingLeft:"3px",paddingRight:"3px",paddingTop:"0",paddingBottom:"3px"}},r.a.createElement(it,{photo:e.profilePictureURL,width:"100%",height:"100%",useStoragePath:"true"}),r.a.createElement(Fe.b,{to:a,className:"text-body",onClick:i},r.a.createElement("div",{className:"w-100",style:{height:"2.5em"}},r.a.createElement("p",{style:{fontSize:"0.9em"}},r.a.createElement("b",null,n)))))})))))},Ot=function(e){var t=e.users,a=e.variant,n=Object(Se.c)((function(e){return e.users}));t&&(n=t);var c="modal"===a;return r.a.createElement(f.a,{xs:"auto",className:"overflow-auto mh-100"},r.a.createElement("div",{id:"col-1",className:"m-2"},n.map((function(e,t){var a="/fakebook/".concat(e.lastname,".").concat(e.firstname);return e.index&&e.index>0&&(a+=".".concat(e.index)),r.a.createElement(Fe.b,{key:t,to:a,className:c?"p-1 text-dark":"nav-link text-dark"},r.a.createElement(Xe,{user:e,fullname:"true",size:c?"40":"60",bold:"true",className:"pb-1"}))}))))},yt=function(e){var t=e.show,a=e.onHide,n=e.likes,c=Object(Se.c)((function(e){return e.users})),o=n.map((function(e){return c.find((function(t){return t.userID===e}))}));return r.a.createElement(p.a,{show:t,onHide:a},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{className:"text-primary"},"All")),r.a.createElement(p.a.Body,{className:"overflow-hidden"},r.a.createElement(Ot,{users:o,variant:"modal"})))},wt=["comment"],Nt=function(e){var t=e.comment,a=Object(h.a)(e,wt),n=t.userID,c=Object(Se.c)((function(e){return e.users})).find((function(e){return e.userID===n}));return r.a.createElement(m.a,a,r.a.createElement(f.a,{xs:1},r.a.createElement(Qe,{size:"26",url:c.profilePictureURL})),r.a.createElement(f.a,{xs:11},r.a.createElement("p",null,r.a.createElement("b",null,"".concat(c.firstname," ").concat(c.lastname," ")),t.text),t.isPhoto&&r.a.createElement(Je,{alt:"",storagePath:t.photoURL,style:{width:"30%"}})))},Lt=["onChange","onKeyPress","value","welcomeText"],Pt=function(e){var t=e.onChange,a=e.onKeyPress,c=e.value,o=e.welcomeText,i=Object(h.a)(e,Lt),u={outline:"none",border:"none",resize:"none",overflow:"hidden",background:"#e9ecef",padding:"0",lineHeight:"0.8em"},m=Object(n.useRef)(u),f=Object(n.useState)(u),d=Object(l.a)(f,2),p=d[0],b=d[1],E=Object(n.useState)(null),g=Object(l.a)(E,2),v=g[0],k=g[1];return Object(n.useEffect)((function(){if("auto"===p.height&&v){var e=Object(s.a)({},p);e.height=v.scrollHeight+"px",b(e)}}),[p,v]),Object(n.useEffect)((function(){""===c&&v&&b(m.current)}),[c,v,m]),r.a.createElement("textarea",Object.assign({type:"text",onChange:function(e){t(e);var a=e.target;k(a),function(e){var t=Object(s.a)({},p);t.height="auto",b(t)}()},onKeyPress:a,placeholder:o,rows:"1",style:p,value:c},i))},St=(a(168),function(e){var t=e.post,a=Object(Se.c)((function(e){return e.currentUser})),c=Object(Se.c)((function(e){return e.user.id})),o={userID:c,text:"",isPhoto:!1,photoURL:""},i=Object(n.useState)(o),u=Object(l.a)(i,2),p=u[0],b=u[1],E=Object(n.useState)(!1),h=Object(l.a)(E,2),v=h[0],k=h[1];function x(){if(""!==p.text||p.isPhoto){var e=Object(s.a)(Object(s.a)({},t),{},{comments:[]}),a=t.postID;t.comments&&(e.comments=Object(g.a)(t.comments)),e.comments.push(p),we(e,a),b(o)}}return r.a.createElement(f.a,null,r.a.createElement("hr",null),t.comments&&t.comments.map((function(e,t){return r.a.createElement(Nt,{key:t,comment:e,className:"mb-2"})})),r.a.createElement(m.a,null,r.a.createElement(f.a,{xs:1},r.a.createElement(Qe,{size:"36",url:a.profilePictureURL})),r.a.createElement(f.a,{xs:11},r.a.createElement(m.a,{style:{background:"#e9ecef",borderRadius:"18px",marginLeft:"5px"}},r.a.createElement(f.a,{xs:9,className:"align-self-center"},r.a.createElement(Pt,{onChange:function(e){$e({e:e,state:p,setState:b})},onKeyPress:function(e){return at(e,x)},welcomeText:"Write a comment ...",value:p.text,className:"w-100 mt-2"})),r.a.createElement(f.a,{xs:3},r.a.createElement(m.a,{className:"justify-content-end align-items-baseline"},r.a.createElement(d.a,{variant:"light",size:"sm",className:"comment-btn",onClick:function(){return k(!0)},disabled:p.isPhoto},r.a.createElement(Be.b,{size:"18px",className:"text-muted","aria-label":"photo"})),r.a.createElement(d.a,{variant:"light",size:"sm",className:"comment-btn",onClick:function(){return x()}},r.a.createElement(Be.c,{size:"18px",className:"text-primary","aria-label":"send"}))))),p.isPhoto&&r.a.createElement("div",{className:"comment-img-container"},r.a.createElement(Je,{alt:"",storagePath:"/".concat(p.photoURL),className:"img-to-comment"}),r.a.createElement("div",{id:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){tt({state:p,setState:b,user:a,userID:c})}}))))),r.a.createElement(pt,{show:v,setShow:k,updatePost:function(e){et({state:p,setState:b,file:e,userID:c})}}))}),Ct=a(131),It=a(130),Rt=a.n(It),Dt=["post"],Ut=function(e){var t=e.post,a=Object(h.a)(e,Dt),c=Object(Se.c)((function(e){return e.user.id})),o=Object(Se.c)((function(e){return e.users})),i=Object(n.useState)(!1),s=Object(l.a)(i,2),u=s[0],m=s[1],f=Object(n.useState)(!1),p=Object(l.a)(f,2),b=p[0],E=p[1];if(!t)return r.a.createElement(r.a.Fragment,null);var v=t.postID,k=o.find((function(e){return e.userID===t.userID}));if(!k)return r.a.createElement(r.a.Fragment,null);function x(){return!(-1===t.likes.indexOf(c))}return r.a.createElement(lt.a,a,r.a.createElement(lt.a.Header,null,r.a.createElement(Xe,{user:k,size:"40",fullname:"true",bold:"true"}),r.a.createElement("span",{style:{fontSize:"12px"}},t.timestamp)),r.a.createElement(lt.a.Body,null,r.a.createElement(lt.a.Text,null,t.text),t.isPhoto&&r.a.createElement(Je,{alt:"",storagePath:t.photoURL,className:"w-100"}),t.isYoutube&&r.a.createElement("div",{className:"video-container"},r.a.createElement(Rt.a,{className:"react-player",url:function(e){var t=e.lastIndexOf("/"),a=e.slice(t+1);return"https://www.youtube.com/watch?v=".concat(a)}(t.youtubeURL),light:!0,width:"100%",height:"100%",playing:!0,controls:!0}))),r.a.createElement(lt.a.Footer,null,r.a.createElement(d.a,{variant:"link",className:"text-muted",onClick:function(){t.likes.length>0&&m(!0)},style:{boxShadow:"none"}},r.a.createElement(bt.a,{className:"bg-primary text-light mr-2",style:{borderRadius:"50%"},"aria-label":"likes"}),t.likes.length),r.a.createElement(d.a,{variant:"link",className:"text-muted float-right",onClick:function(){return E(!b)},style:{boxShadow:"none"}},"comments(",t.comments?t.comments.length:0,")"),r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"light",className:"".concat(x()?"text-primary":"text-muted"," w-50"),onClick:function(){var e=Object(g.a)(t.likes),a=e.indexOf(c);-1===a?e.push(c):e.splice(a,1),we({likes:e},v)}},x()?r.a.createElement(bt.a,{size:"22px"}):r.a.createElement(bt.c,{size:"22px"}),r.a.createElement("b",null," Like")),r.a.createElement(d.a,{variant:"light",className:"text-muted w-50",onClick:function(){E(!0)}},r.a.createElement(Ct.a,{size:"22px"}),r.a.createElement("b",null," Comment")),b&&r.a.createElement(St,{post:t})),r.a.createElement(yt,{show:u,onHide:function(){m(!1)},likes:t.likes}))},zt=function(e){var t=e.postID,a=Object(Se.c)((function(e){return e.posts})).find((function(e){return e.postID===t}));return r.a.createElement(Ut,{post:a})},Ft=(a(174),function(e){var t=e.userID,a=e.postsLinkRef,c=e.friendsLinkRef,o=e.photosLinkRef,l=e.activeLink,i=e.setActiveLink,s=Object(Se.c)((function(e){return e.users})),u=Object(Se.c)((function(e){return e.user.id})),d=t===u,p=s.find((function(e){return e.userID===t}));return Object(n.useEffect)((function(){Ze({currentTarget:a.current},l,i)}),[l,a,i]),r.a.createElement(m.a,{className:"w-100 posts"},r.a.createElement(f.a,{sm:5,className:"mh-100 overflow-hidden"},r.a.createElement(kt,{user:p,userID:t,photosLinkRef:o,activeLink:l,setActiveLink:i,className:"my-2"}),r.a.createElement(jt,{user:p,friendsLinkRef:c,activeLink:l,setActiveLink:i,className:"my-2"})),r.a.createElement(f.a,{sm:7,className:"mh-100 overflow-auto hide-scrollbar bg-200"},r.a.createElement(gt,{firstname:p.firstname,isCurrentUser:d,className:"mt-2"}),p.posts.map((function(e,t){return r.a.createElement(zt,{key:t,postID:e,className:"mx-auto my-2"})}))))}),Tt=function(e){var t=Object(rt.h)().itemId,a=e.userID,n=e.openFileInput,c=e.photosLinkRef,o=e.friendsLinkRef,l=e.postsLinkRef,i=e.activeLink,s=e.setActiveLink;return"Photos"===t?r.a.createElement(st,{userID:a,openFileInput:n,photosLinkRef:c,activeLink:i,setActiveLink:s}):"Friends"===t?r.a.createElement(ft,{friendsLinkRef:o,activeLink:i,setActiveLink:s}):r.a.createElement(Ft,{userID:a,photosLinkRef:c,friendsLinkRef:o,postsLinkRef:l,activeLink:i,setActiveLink:s})},At=function(e){var t=e.show,a=e.removeCoverPhoto,n=e.closeDlg;return r.a.createElement(p.a,{show:t,onHide:n},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Remove Cover Photo"))),r.a.createElement(p.a.Body,null,r.a.createElement("div",null,"Do you really want to remove the cover photo?")),r.a.createElement(p.a.Footer,null,r.a.createElement(d.a,{variant:"link",style:{textDecoration:"none"},onClick:n},r.a.createElement("b",null,"Cancel")),r.a.createElement(d.a,{variant:"primary",onClick:a},r.a.createElement("b",null,"Submit"))))},Bt=function(e){var t=e.show,a=e.onHide,n=e.onPhotoClick,c=e.userID,o=e.photos;return r.a.createElement(p.a,{show:t,onHide:a,scrollable:!0},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{style:{marginLeft:"35%"}},r.a.createElement("strong",null,"Select Photo"))),r.a.createElement(p.a.Body,null,o.map((function(e,t){return r.a.createElement(Je,{className:"m-1",width:"31%",height:"90px",alt:"",key:t,id:t,storagePath:"/".concat(c,"/").concat(e.fileName),style:{objectFit:"cover"},onClick:n})}))))},Ht=function(e){var t=e.show,a=e.onHide,n=e.onBtnClick,c=e.onPhotoClick,o=e.userID,l=e.photos;return r.a.createElement(p.a,{show:t,onHide:a,size:"lg",scrollable:!0},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{style:{margin:"auto"}},r.a.createElement("strong",null,"Update Profile Picture"))),r.a.createElement(p.a.Body,null,r.a.createElement(d.a,{size:"sm",variant:"outline-primary",className:"w-50 m-2 mb-3",onClick:n},r.a.createElement("b",null,"+ Upload Photo")),r.a.createElement("br",null),r.a.createElement("b",null,"Suggested Photos"),r.a.createElement(m.a,{className:"m-1"},l.map((function(e,t){return r.a.createElement(it,{key:t,width:"15%",height:"15%",userID:o,photo:e,index:t,onClick:c,className:"m-1"})})))))},Mt=(a(175),function(e){var t=Object(rt.h)().userName,a=Object(Se.c)((function(e){return e.user.id})),c=Object(Se.c)((function(e){return e.users})),o=Object(Se.c)((function(e){return e.link})),s=function(){var e=c.map((function(e){return e.index&&0!==e.index?"".concat(e.lastname,".").concat(e.firstname,".").concat(e.index):"".concat(e.lastname,".").concat(e.firstname)})).indexOf(t),a=c[e];return a},u=function(){return s().userID},p=a===u(),b=s(),E=b.firstname,h=b.lastname,v=b.profilePictureURL,k=b.backgroundPictureURL,x=b.photos,j=Object(n.useState)(!1),O=Object(l.a)(j,2),y=O[0],w=O[1],N=Object(n.useState)(!1),L=Object(l.a)(N,2),P=L[0],S=L[1],C=Object(n.useState)(!1),I=Object(l.a)(C,2),R=I[0],D=I[1],U=Object(n.useState)(!1),z=Object(l.a)(U,2),F=z[0],T=z[1],A=Object(n.useState)("backgroundPictureURL"),B=Object(l.a)(A,2),H=B[0],M=B[1],Y=Object(n.useState)(null),W=Object(l.a)(Y,2),V=W[0],q=W[1],K=Object(n.useRef)(null),G=Object(n.useRef)(null),J=Object(n.useRef)(null),_=Object(rt.i)(),Q=_.url,X=_.path;function $(e){M(e),T(!0)}function ee(e){switch(e){case"3":w(!0);break;case"2":$("backgroundPictureURL");break;case"1":S(!0);break;default:return}}function te(){w(!1)}function ae(){S(!1)}function ne(){D(!1)}function re(e,t){var n=Number(e.target.id),r=x[n],c="".concat(a,"/").concat(r.fileName);return Ne(Object(i.a)({},t,c))}var ce=Object(Se.b)();return Object(n.useEffect)((function(){("friends"!==o.active||window.innerWidth<600)&&ce(Z("profile"))}),[ce,o]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"justify-content-center grad"},r.a.createElement(f.a,{className:"m-0 p-0 profile-col"},r.a.createElement("div",{className:"background-pic-container"},r.a.createElement(Je,{className:"background-pic",storagePath:k,alt:""}),p&&r.a.createElement(Ue.a,{variant:"light",className:"background-pic-button",title:r.a.createElement("b",null,r.a.createElement(Be.b,{className:"mr-1",size:"20px"}),r.a.createElement("span",null,"Edit Cover Photo")),size:"sm"},r.a.createElement(ze.a.Item,{eventKey:"1",onSelect:ee},r.a.createElement(ot.a,{size:"20px",className:"mr-2"}),"Select Photo"),r.a.createElement(ze.a.Item,{eventKey:"2",onSelect:ee},r.a.createElement(He.b,{size:"20px",className:"mr-2"}),"Upload Photo"),r.a.createElement(ze.a.Divider,null),r.a.createElement(ze.a.Item,{eventKey:"3",onSelect:ee},r.a.createElement(ct.a,{size:"20px",className:"mr-2"})," Remove")),r.a.createElement("div",{className:"profile-pic-container"},r.a.createElement(Qe,{size:"180",url:v}),p&&r.a.createElement(d.a,{variant:"light",className:"profile-pic-button",onClick:function(){return D(!0)}},r.a.createElement(Be.b,{size:"19px","aria-label":"photo"})))),r.a.createElement("h2",{className:"text-center mt-5"},r.a.createElement("b",null,E," ",h)),r.a.createElement("hr",null),r.a.createElement(Re.a,{bg:"light"},r.a.createElement(De.a,null,r.a.createElement(De.a.Item,null,r.a.createElement(Fe.b,{key:"1",to:"".concat(Q,"/Posts"),className:"nav-link mx-2",ref:J},r.a.createElement("b",null,"Posts"))),r.a.createElement(De.a.Item,null,r.a.createElement(Fe.b,{key:"2",to:"".concat(Q,"/Friends"),className:"nav-link mx-2",ref:G},r.a.createElement("b",null,"Friends")," ",c.length)),r.a.createElement(De.a.Item,null,r.a.createElement(Fe.b,{key:"3",to:"".concat(Q,"/Photos"),className:"nav-link mx-2",ref:K},r.a.createElement("b",null,"Photos"))))))),r.a.createElement(m.a,{className:"justify-content-center"},r.a.createElement(f.a,{className:"profile-col"},r.a.createElement(rt.c,null,r.a.createElement(rt.a,{path:"".concat(X,"/:itemId")},r.a.createElement(Tt,{userID:u(),openFileInput:function(){return $("")},photosLinkRef:K,friendsLinkRef:G,postsLinkRef:J,activeLink:V,setActiveLink:q})),r.a.createElement(rt.a,{path:X},r.a.createElement(Ft,{userID:u(),photosLinkRef:K,friendsLinkRef:G,postsLinkRef:J,activeLink:V,setActiveLink:q}))))),r.a.createElement(At,{show:y,removeCoverPhoto:function(){return te(),Ne({backgroundPictureURL:"background-server.jpg"})},closeDlg:te}),r.a.createElement(Bt,{show:P,onHide:ae,onPhotoClick:function(e){ae(),re(e,"backgroundPictureURL")},userID:a,photos:x}),r.a.createElement(Ht,{show:R,onHide:ne,onBtnClick:function(){ne(),$("profilePictureURL")},onPhotoClick:function(e){ne(),re(e,"profilePictureURL")},userID:a,photos:x}),r.a.createElement(pt,{show:F,setShow:T,updateDatabase:function(e){var t={fileName:e.name},n=x.map((function(e){return e.fileName})),r=Object(g.a)(x);-1===n.indexOf(e.name)&&r.push(t);var c={photos:r};return""!==H&&(c[H]="".concat(a,"/").concat(e.name)),Ne(c)},userID:a}))}),Yt=a(205),Wt=function(){var e=Object(rt.h)(),t=e.userID,a=e.n,c=Object(Se.c)((function(e){return e.users})).find((function(e){return e.userID===t})).photos,o=Object(n.useState)(Number(a)),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(rt.f)(),p=Object(rt.g)();Object(n.useEffect)((function(){var e=p.pathname.split("/"),t=Number(e.pop());u(t)}),[p]);return r.a.createElement(m.a,{className:"bg-200",style:{position:"relative",top:"50px",height:"89vh"}},r.a.createElement(f.a,{md:9,className:"h-100",style:{backgroundColor:"black"}},r.a.createElement(Yt.a,{className:"w-100 h-100",interval:null,indicators:!1,activeIndex:s,onSelect:function(e,a){d.push("/fakebook/photo/".concat(t,"/").concat(e))}},c.map((function(e,a){return r.a.createElement(Yt.a.Item,{key:a,style:{width:"100%",height:"89vh"}},r.a.createElement(Je,{storagePath:"/".concat(t,"/").concat(e.fileName),alt:"",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"600px",height:"100%",objectFit:"contain"}}))})))),r.a.createElement(f.a,null))},Vt=function(){var e=Object(Se.c)((function(e){return e.posts}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(gt,{isCurrentUser:!0,className:"mw-100 m-auto p-0",style:{width:"450px"}}),e.map((function(e,t){return r.a.createElement(Ut,{key:t,post:e,className:"mw-100 mx-auto my-2",style:{width:"450px"}})})))},qt=(a(176),function(e){var t=Object(Se.c)((function(e){return e.currentUser}));return r.a.createElement(De.a,{className:"flex-column mt-3",id:"left-navbar"},r.a.createElement("div",{className:"navitem"},r.a.createElement(De.a.Link,{as:Fe.b,to:e.profileLink,className:"text-dark flex-column justify-content-center"},r.a.createElement(Xe,{user:t,size:"26",fullname:"true"}))),r.a.createElement("div",{className:"navitem"},r.a.createElement(De.a.Link,{as:Fe.b,to:"/fakebook/friends/list",className:"text-dark"},r.a.createElement(Ae.b,{size:"26px",className:"text-info mr-2"}),r.a.createElement("div",{className:"d-inline"},"Friends"))),r.a.createElement("div",{className:"navitem"},r.a.createElement(De.a.Link,{as:Fe.b,to:"/fakebook/watch",className:"text-dark"},r.a.createElement(Be.a,{size:"26px",className:"text-info mr-2"}),r.a.createElement("div",{className:"d-inline"},"Watch"))))}),Kt=function(){var e=Object(Se.c)((function(e){return e.posts})).filter((function(e){return e.isYoutube}));return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){return r.a.createElement(Ut,{key:t,post:e,className:"mw-100 mx-auto my-2",style:{width:"550px"}})})))},Gt=a(133),Jt=["message"],_t=function(e){var t=e.message,a=Object(h.a)(e,Jt),n=Object(Se.c)((function(e){return e.user.id}));return r.a.createElement(m.a,Object.assign({},a,{className:t.sender===n?"justify-content-end":"justify-content-start"}),r.a.createElement("div",{style:{fontSize:"12px",margin:"auto"}},new Date(t.timestamp).toLocaleString()),t.isPhoto&&r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement(Je,{alt:"",storagePath:t.photoURL,style:{display:"block",width:"50%",margin:"auto"}})),r.a.createElement("p",{style:t.sender===n?{width:"75%",backgroundColor:"dodgerblue",color:"white",padding:"16px",borderRadius:"16px"}:{width:"75%",backgroundColor:"lightgray",color:"black",padding:"16px",borderRadius:"16px"}},t.text))},Qt=function(e){var t=e.conversation;return r.a.createElement(f.a,null,t.map((function(e,t){return r.a.createElement(_t,{key:t,message:e})})))},Xt=function(e){var t=e.recipient,a=Object(n.useState)([]),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(Se.c)((function(e){return e.incomingMessages})),u=Object(Se.c)((function(e){return e.outgoingMessages})),m=s.filter((function(e){return e.sender===t})),f=u.filter((function(e){return e.recipient===t}));return Object(n.useEffect)((function(){var e=function(e,t){return[].concat(Object(g.a)(e),Object(g.a)(t)).sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)}))}(m,f);e.length!==o.length&&i(e)}),[m,f,o]),r.a.createElement(Qt,{conversation:o})},Zt=(a(177),function(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),i=Object(l.a)(o,2),u=i[0],p=i[1],b=Object(n.useState)(null),h=Object(l.a)(b,2),x=h[0],j=h[1],O=Object(Se.c)((function(e){return e.currentUser})),y=Object(Se.c)((function(e){return e.user.id})),w=Object(Se.c)((function(e){return e.users})),N={sender:"".concat(y),recipient:"",text:"",isPhoto:!1,photoURL:"",isRead:!1},L=Object(n.useState)(N),P=Object(l.a)(L,2),S=P[0],C=P[1];function I(e){if((e||!u)&&(!u||e.userID===u.userID)){var t;c(!0),t=e?e.userID:"";var a=Object(s.a)({},S);a.recipient=t,C(a),p(e)}}var R=Object(n.useCallback)(I,[O]);function D(){return(D=Object(v.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(u);case 2:K(),c(!1),p(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=Object(n.useRef)(null),z=Object(n.useState)(""),F=Object(l.a)(z,2),T=F[0],A=F[1];function B(){var e;(e=S,Le.add(Object(s.a)(Object(s.a)({},e),{},{timestamp:k.a.firestore.FieldValue.serverTimestamp()}))).then((function(){C(N),A(U.current.scrollHeight)}))}Object(n.useEffect)((function(){U.current&&(U.current.scrollTop=T)}),[T]),Object(n.useEffect)((function(){var e=ke("incoming"),t=ke("outgoing");return function(){e(),t()}}),[]);var H=Object(n.useState)([]),M=Object(l.a)(H,2),Y=M[0],W=M[1],V=Object(Se.c)((function(e){return e.incomingMessages})).filter((function(e){return!e.isRead}));function q(e){var t=V.filter((function(t){return t.sender===e.userID})),a=[];return t.forEach((function(e){var t=e.id;a.push(function(e){return Le.doc(e).update({isRead:!0})}(t))})),Promise.all(a)}function K(){var e=Object(g.a)(Y);e.pop(),W(e)}return Object(n.useEffect)((function(){var e=[];V.forEach((function(t){var a=t.sender;-1===e.indexOf(a)&&e.push(a)})),Y.length!==e.length&&W(e)}),[Y,V]),Object(n.useEffect)((function(){if(0!==Y.length){var e=Y.length-1,t=Y[e];R(w.find((function(e){return e.userID===t})))}}),[Y,w,R]),u&&a&&""===S.recipient&&I(u),r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{className:"flex-column"},r.a.createElement("h5",{className:"text-muted ml-3"},r.a.createElement("b",null,"Contacts")),w.map((function(e,t){return e.userID===y?r.a.createElement("div",{key:t}):r.a.createElement("button",{type:"button",key:t,className:"navitem text-dark flex-row justify-content-center p-2 mb-1 nav-btn bg-200",onClick:function(){return I(e)}},r.a.createElement(Xe,{size:"26",fullname:"true",bold:"false",user:e}))}))),r.a.createElement(ut.a,{placement:"left-start",show:a,overlay:r.a.createElement(lt.a,{style:{width:"350px",height:"450px",background:"white",fontSize:"1.2rem",maxHeight:"".concat(window.innerHeight-70,"px")}},r.a.createElement(lt.a.Body,{className:"overflow-none"},r.a.createElement(lt.a.Title,null,!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"New Message"),r.a.createElement("h6",null,"To:")),u&&r.a.createElement(Xe,{size:"26",fullname:"true",bold:"true",user:u}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){return D.apply(this,arguments)},className:"text-primary"}))),r.a.createElement("hr",null),u&&r.a.createElement(m.a,{className:"mh-100 overflow-auto flex-column-reverse",ref:U},r.a.createElement(Xt,{sender:y,recipient:u.userID})),!u&&r.a.createElement(f.a,{className:"h-75 overflow-auto"},w.map((function(e,t){return e.userID===y?r.a.createElement("div",{key:t}):r.a.createElement("button",{type:"button",key:t,className:"flex-row text-dark justify-content-start p-2 container-choose-to nav-btn w-100 mb-1 white",onClick:function(){return I(e)}},r.a.createElement(Xe,{size:"36",fullname:"true",bold:"false",user:e}))})))),u&&r.a.createElement(lt.a.Footer,{className:"mt-5"},r.a.createElement(m.a,null,""===S.text&&r.a.createElement(f.a,{xs:2},r.a.createElement(d.a,{variant:"light",size:"sm",className:"add-photo-btn",onClick:function(){return j(!0)}},r.a.createElement(ot.a,{size:"21px",className:"text-primary"}))),r.a.createElement(f.a,{xs:""===S.text?8:10,className:"align-self-center",style:{background:"#e9ecef",borderRadius:"18px"}},S.isPhoto&&r.a.createElement("div",{className:"comment-img-container"},r.a.createElement(Je,{alt:"",storagePath:"/".concat(S.photoURL),className:"img-to-comment"}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(dt.a,{onClick:function(){tt({state:S,setState:C,user:O,userID:y})}}))),r.a.createElement(Pt,{onChange:function(e){$e({e:e,state:S,setState:C})},onKeyPress:function(e){return at(e,B)},welcomeText:"Aa",value:S.text,className:"w-100 mt-2"})),r.a.createElement(f.a,{xs:2},r.a.createElement(d.a,{variant:"light",size:"sm",className:"add-photo-btn",onClick:function(){(""!==S.text||S.isPhoto)&&B()}},r.a.createElement(Be.c,{size:"23px",className:"text-primary"}))))),r.a.createElement(pt,{show:x,setShow:j,updatePost:function(e){et({state:S,setState:C,file:e,userID:y})},userID:y}))},r.a.createElement("button",{type:"button",className:"msg-btn",onClick:function(){return I(null)},"aria-label":"Message"},r.a.createElement(Gt.a,{size:"22px","aria-hidden":"true"}))))}),$t=(a(178),function(e){var t=e.className,a=Object(Se.c)((function(e){return e.accountPage})),c=a.profileLink,o=a.isWatch,l=Object(Se.b)();return Object(n.useEffect)((function(){l(Z(o?"watch":"home"))}),[o,l]),r.a.createElement(m.a,{className:"".concat(t," overflow-hidden vh-100")},r.a.createElement(f.a,{className:"mh-100 overflow-auto left-navbar-col"},r.a.createElement(qt,{profileLink:c})),r.a.createElement(f.a,{sm:9,md:o?12:9,lg:o?9:6,className:"mh-100 overflow-auto hide-scrollbar"},!o&&r.a.createElement(Vt,null),o&&r.a.createElement(Kt,null)),!o&&r.a.createElement(f.a,{className:"mh-100 overflow-auto contacts-col",style:{position:"relative"}},r.a.createElement(Zt,null)))}),ea=(a(179),a(134)),ta=a.n(ea),aa=function(e){var t=Object(rt.g)(),a=Object(Se.b)(),c="/fakebook/friends/list"===t.pathname;return Object(n.useEffect)((function(){a(Z("friends"))}),[a]),window.innerWidth>600||c?r.a.createElement(m.a,{className:"overflow-hidden friends-list"},r.a.createElement(Ot,null),r.a.createElement(f.a,{className:"overflow-auto mh-100 hide-scrollbar col-two"},c?r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column align-items-center justify-content-center"},r.a.createElement("img",{width:"200px",src:ta.a,alt:"cartoon of fakebook friends",className:"p-4"}),r.a.createElement("h5",{className:"text-muted"},r.a.createElement("b",null,"Select people's names to preview their profile."))):r.a.createElement("div",{className:"profile-container"},r.a.createElement(Mt,null)))):r.a.createElement(Mt,null)},na=a(135),ra=function(e){var t=Object(Se.c)((function(e){return e.accountPage.profileLink})),a=Object(Se.c)((function(e){return e.currentUser})),c=Object(Se.c)((function(e){return e.users})),o=Object(Se.c)((function(e){return e.accountPage.isFriendsListPage})),l=Object(Se.b)();Object(n.useEffect)((function(){var e=(de=oe.getState().user.id,(pe=Ee.doc(de)).onSnapshot((function(e){oe.dispatch(R(e.data()))}))),t=Ee.onSnapshot((function(e){var t=[];e.forEach((function(e){var a=e.data();a.userID=e.id,t.push(a)})),oe.dispatch(z(t))})),a=be.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.timestamp,r="";n&&(r=n.toDate().toLocaleString()),a.timestamp=r,a.postID=e.id,t.push(a)})),oe.dispatch(A(t))}));he();window.addEventListener("beforeunload",(function(e){ge()}));return document.addEventListener("visibilitychange",(function(e){"visible"===document.visibilityState?he():ge()})),function(){e(),t(),a()}}),[]);var i=a&&a.index&&a.index>0?"".concat(t,".").concat(a.index):t;return Object(n.useEffect)((function(){return l(ae(i))}),[l,i]),0!==c.length&&a?r.a.createElement("div",{className:"bg-200 vw-100 main-container overflow-hidden"},r.a.createElement(na.a,{className:"w-100 p-0",fluid:!0},r.a.createElement(Fe.a,null,r.a.createElement(nt,null),r.a.createElement(rt.c,null,r.a.createElement(rt.a,{path:"/fakebook/friends/list",render:function(){return l(ne(!0)),r.a.createElement(aa,null)}}),r.a.createElement(rt.a,{path:"/fakebook/photo/:userID/:n",render:function(){return r.a.createElement(Wt,null)}}),r.a.createElement(rt.a,{path:"/fakebook/watch",render:function(){return l(ne(!1)),l(re(!0)),r.a.createElement($t,{className:"pt-5"})}}),r.a.createElement(rt.a,{path:"/fakebook/:userName",render:function(){return o?r.a.createElement(aa,null):r.a.createElement(Mt,null)}}),r.a.createElement(rt.a,{path:"/fakebook",render:function(){return l(ne(!1)),l(re(!1)),r.a.createElement($t,{className:"pt-5"})}}))))):r.a.createElement("div",null,"...Loading")},ca=a(202),oa=function(e){var t=e.show,a=e.onHide,c=e.onExit,o=Object(Se.c)((function(e){return e.user.error})),i=Object(Se.b)(),s=Object(n.useState)(""),m=Object(l.a)(s,2),f=m[0],b=m[1];return r.a.createElement(p.a,{show:t,onHide:a,onExited:c},r.a.createElement(p.a.Header,null,r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Password Reset Email"))),r.a.createElement(p.a.Body,null,""!==o&&r.a.createElement(ca.a,{variant:"danger"},o),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Please enter the email address associated to your account to receive a password reset email."),r.a.createElement(u.a.Control,{type:"email",placeholder:"Email",name:"email",size:"lg",onChange:function(e){e.preventDefault();var t=e.target;b(t.value)},value:f}))),r.a.createElement(p.a.Footer,null,r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"light",onClick:function(){a(),i(L(""))}},r.a.createElement("b",null,"Cancel")),r.a.createElement(d.a,{variant:"primary",onClick:function(){(function(e){return fe.sendPasswordResetEmail(e)})(f).then((function(){a()})).catch((function(e){return i(L(e.message))}))}},r.a.createElement("b",{className:"px-2"},"Send"))))};var la=function(){var e=Object(Se.c)((function(e){return e.user})),t=Object(Se.b)();Object(n.useEffect)((function(){return fe.onAuthStateChanged((function(e){if(e){var t=e.uid,a=e.emailVerified,n=e.displayName;oe.dispatch(w({id:t,displayName:n,isEmailVerified:a}))}else oe.dispatch(N());oe.dispatch(S())}))}),[]);var a=Object(n.useState)(!1),c=Object(l.a)(a,2),o=c[0],i=c[1];function s(){i(!1)}function u(){i(!0)}var p=Object(n.useCallback)(s,[]),b=e&&e.displayName&&e.displayName.trim().split(" ")||[],E=b.pop(),h=b.join(" "),g="/fakebook/".concat(E,".").concat(h);Object(n.useEffect)((function(){return t(ae(g))}),[g,t]);var v=Object(n.useState)(!0),k=Object(l.a)(v,2),x=k[0],j=k[1];return e.isLoading?r.a.createElement("div",null,"...Loading"):e.isSignedIn&&!e.error?e.isEmailVerified?r.a.createElement(ra,null):r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{className:"bg-200 vh-100"},r.a.createElement(m.a,{className:"h-100 align-items-center"},r.a.createElement(f.a,{lg:{span:5,offset:1},className:"d-flex justify-content-center"},r.a.createElement(Ie,null)),r.a.createElement(f.a,{lg:5,className:"bg-200 d-flex justify-content-center"},r.a.createElement("div",{className:"login p-3 bg-light"},r.a.createElement(Ce,{onClickForgottenPswd:function(){j(!1),u()}}),r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"success",size:"lg",className:"d-block w-60 mx-auto mt-4",onClick:u},r.a.createElement("b",null,"Create New Account")))),r.a.createElement(Pe,{show:o&&x,onHide:p,onExit:function(){return j(!0)}}),r.a.createElement(oa,{show:o&&!x,onHide:s,onExit:function(){return j(!0)}})))};o.a.render(r.a.createElement(Se.a,{store:oe},r.a.createElement(la,null)),document.getElementById("root"))}},[[139,14,15]]]);
//# sourceMappingURL=main.76472654.chunk.js.map