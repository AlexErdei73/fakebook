{"version":3,"sources":["images/friends.jpg","firebaseConfig.js","components/Signup.js","components/Login.js","components/RecentLogins.js","components/CircularImage.jsx","components/ProfileLink.jsx","components/Titlebar.jsx","components/ResponsiveImage.jsx","components/helper.js","components/Photos.jsx","components/FriendCard.jsx","components/Friends.jsx","components/UploadPhoto.jsx","components/PostModal.jsx","components/CreatePost.jsx","components/MiniPhotos.jsx","components/MiniFriends.jsx","components/FriendList.jsx","components/LikesModal.jsx","components/DisplayComment.jsx","components/StyledTextarea.jsx","components/Comments.jsx","components/DisplayPost.jsx","components/DisplayUserPost.jsx","components/Posts.jsx","components/NestedRoute.jsx","components/RemoveCoverPhotoDlg.jsx","components/SelectBgPhotoModal.jsx","components/UpdateProfilePicModal.jsx","components/Profile.jsx","components/PhotoViewer.jsx","components/PostView.jsx","components/LeftNavbar.jsx","components/VideoView.jsx","components/Message.jsx","components/DisplayConversation.jsx","components/Conversation.jsx","components/Contacts.jsx","components/HomePage.jsx","components/FriendsListPage.jsx","components/UserAccount.jsx","components/PasswordReminder.jsx","App.js","index.js"],"names":["module","exports","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","Signup","props","user","onSubmit","onChange","onError","firebase","useFirebaseApp","handleChange","e","target","name","value","useState","firstname","lastname","setName","handleNameChange","error","setError","validated","setValidated","formIsValid","setFormIsValid","useEffect","message","Form","noValidate","preventDefault","currentTarget","checkValidity","auth","createUserWithEmailAndPassword","email","password","then","result","updateProfile","displayName","firestore","collection","where","get","querrySnapshot","i","size","doc","uid","set","profilePictureURL","backgroundPictureURL","photos","posts","isOnline","index","signOut","sendEmailVerification","url","console","log","catch","Row","Group","as","Col","Control","type","placeholder","required","Feedback","className","Button","variant","Login","onClickForgottenPswd","setErrorMsg","errorMsg","stopPropagation","signInWithEmailAndPassword","emailVerified","isInvalid","indexOf","id","onClick","RecentLogins","style","fontSize","CircularImage","rest","radius","Math","floor","shift","width","height","objectFit","borderRadius","pointerEvents","position","storagePath","alt","top","left","border","ProfileLink","fullname","bold","minWidth","color","xs","TitleBar","closeFriendsListPage","setUserOffline","refs","dimension","Navbar","bg","fixed","Brand","Link","to","Nav","Item","ref","home","friends","watch","profilelink","profile","DropdownButton","title","menuAlign","Dropdown","Divider","ResponsiveImage","userID","photo","useStoragePath","fileName","key","display","paddingBottom","handleClickLink","linkState","setLinkState","current","previous","backgroundColor","borderBottom","handleTextareaChange","input","newState","state","text","setState","addPhoto","isPhoto","photoURL","file","delPhoto","sideEffect","removePhotoFromPost","handleKeyPress","save","shiftKey","code","Photos","useRouteMatch","openFileInput","isCurrentUser","photosLinkRef","activeLink","setActiveLink","Card","Body","Title","textDecoration","float","map","sm","md","lg","FriendCard","userName","showOverlay","setShowOverlay","history","useHistory","handleClick","push","OverlayTrigger","placement","show","overlay","onMouseEnter","onMouseLeave","Friends","copyUsers","users","friendsLinkRef","UploadPhoto","setShow","updateDatabase","storage","useStorage","fileInputRef","useRef","click","accept","event","files","child","put","PostModal","onClose","setText","isYoutubeBtnPressed","WELCOME_TEXT","INIT_POST","isYoutube","youtubeURL","likes","post","setPost","disabled","isBtnEnabled","setBtnEnabled","showUploadPhotoDlg","setShowUploadPhotoDlg","setPostBtnAsSideEffect","useFirestore","getPlaceholder","Modal","onHide","Header","closeButton","setPostBtnEnabled","rows","CloseButton","src","frameborder","allow","allowfullscreen","newPost","URL_PATTERN","startsWith","patternLength","length","videoID","slice","add","timestamp","fb","FieldValue","serverTimestamp","docRef","postID","newPosts","unshift","update","updateUserPosts","CreatePost","PLACEHOLDER_FOR_CURRENT_USER","PLACEHOLDER_FOR_ANOTHER_USER","showPostModal","setShowPostModal","setYoutubeBtnPressed","newText","getText","MiniPhotos","photosLink","paddingLeft","paddingRight","paddingTop","MiniFriends","friendsLink","Subtitle","userProfileURL","FriendList","isModal","profileLink","LikesModal","usersWhoLike","find","DisplayComment","comment","StyledTextarea","onKeyPress","welcomeText","TEXTAREA_STYLE_INIT","outline","resize","overflow","background","padding","lineHeight","styleInitRef","setStyle","textarea","setTextarea","newStyle","scrollHeight","restyleTextarea","Comments","updatePost","INIT_COMMENT","setComment","saveComment","comments","marginLeft","DisplayPost","showComments","setShowComments","currentUser","postRef","isLiked","toDate","toLocaleString","Text","frameBorder","allowFullScreen","Footer","boxShadow","splice","DisplayUserPost","useFirestoreDocData","initialData","data","Posts","postsLinkRef","NestedRoute","itemId","useParams","RemoveCoverPhotoDlg","removeCoverPhoto","closeDlg","SelectBgPhotoModal","onPhotoClick","scrollable","UpdateProfilePicModal","onBtnClick","margin","Profile","linkRef","activeMainLink","setActiveMainLink","userId","profileRef","showRemoveCoverPhotoDlg","setShowRemoveCoverPhotoDlg","showSelectPhoto","setShowSelectPhoto","showUpdateProfilePic","setShowUpdateProfilePic","nameOfURL","setNameOfURL","path","handleSelect","hideBgPhotoModal","hideProfilePicModal","handlePhotoClick","Number","eventKey","onSelect","newPhoto","newProfile","PhotoViewer","n","activeIndex","setActiveIndex","location","useLocation","locArr","pathname","split","pop","Carousel","interval","indicators","selectedIndex","transform","maxWidth","PostView","LeftNavbar","VideoView","videos","filter","video","Message","sender","DisplayConversation","conversation","msg","Conversation","recipient","setConversation","messagesRef","useFirestoreCollectionData","orderBy","idField","statusOut","status","outgoing","statusIn","incoming","faultyMessages","indexOfNewMsg","forEach","sorted","sort","msgA","msgB","getConversation","Contacts","setRecipient","showPhotoDlg","setShowPhotoDlg","INIT_MESSAGE","isRead","setMessage","newMessage","handleClickCallback","useCallback","convRowRef","setScrollHeight","saveMessage","scrollTop","senders","setSenders","unread","sendersWithUnreadMsg","last","usr","maxHeight","window","innerHeight","messageID","newSenders","removeSender","bottom","right","HomePage","isWatch","postsRef","FriendsListPage","isNoUser","imgFriends","UserAccount","userState","usersCollection","userDocRef","modifyProfileLink","isFriendsListPage","addEventListener","document","visibilityState","innerWidth","setDimension","debouncedHandleResize","fn","ms","timer","clearTimeout","setTimeout","debounce","removeEventListener","Container","fluid","signoutFn","render","PasswordReminder","setEmail","Alert","Label","sendPasswordResetEmail","errorMessage","App","useUser","setUserState","updateUser","handleClose","handleShow","addErrorCallback","handleCloseCallback","trim","lastName","firstName","join","isModalSignup","setModalSignup","useSigninCheck","signInCheckResult","signedIn","span","offset","onExited","reload","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.b964f046.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/friends.2536911b.jpg\";","const firebaseConfig = {\n  apiKey: \"AIzaSyA6giH2VCl9pBrO86uGH3gcwbmeM-dYMPM\",\n  authDomain: \"fakebook-2df7b.firebaseapp.com\",\n  projectId: \"fakebook-2df7b\",\n  storageBucket: \"fakebook-2df7b.appspot.com\",\n  messagingSenderId: \"1030600439600\",\n  appId: \"1:1030600439600:web:98617c1d503260115cfaf5\",\n  measurementId: \"G-YN35E2SN2E\",\n};\n\nexport default firebaseConfig;\n","import React, { useEffect, useState } from \"react\";\nimport { useFirebaseApp } from \"reactfire\";\nimport Form from \"react-bootstrap/Form\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Button from \"react-bootstrap/Button\";\nimport \"./Signup.css\";\n\nconst Signup = (props) => {\n  const { user, onSubmit, onChange, onError } = props;\n\n  // Import firebase\n  var firebase = useFirebaseApp();\n\n  // onChange function\n  const handleChange = (e) => {\n    onChange(e.target.name, e.target.value);\n  };\n\n  // Handle name change on form differently because of first and last name\n  const [name, setName] = useState({\n    firstname: \"\",\n    lastname: \"\",\n  });\n\n  const handleNameChange = (e) => {\n    setName({\n      ...name,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const [error, setError] = useState(null);\n  const [validated, setValidated] = useState(false);\n  const [formIsValid, setFormIsValid] = useState(false);\n\n  // Submit function (Create account)\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const form = e.currentTarget;\n    if (form.checkValidity() === true)\n      firebase\n        .auth()\n        .createUserWithEmailAndPassword(user.email, user.password)\n        .then((result) => {\n          // Update the nickname\n          result.user.updateProfile({\n            displayName: `${name.firstname} ${name.lastname}`,\n          });\n          // get the index of the new user with the same username\n          firebase\n            .firestore()\n            .collection(\"users\")\n            .where(\"firstname\", \"==\", name.firstname)\n            .where(\"lastname\", \"==\", name.lastname)\n            .get()\n            .then((querrySnapshot) => {\n              const i = querrySnapshot.size;\n              // Create firestore document\n              firebase\n                .firestore()\n                .collection(\"users\")\n                .doc(result.user.uid)\n                .set({\n                  firstname: name.firstname,\n                  lastname: name.lastname,\n                  profilePictureURL: \"fakebook-avatar.jpeg\",\n                  backgroundPictureURL: \"background-server.jpg\",\n                  photos: [],\n                  posts: [],\n                  isOnline: false,\n                  index: i,\n                })\n                .then(() => {\n                  // Sign out the user\n                  firebase.auth().signOut();\n                });\n            });\n\n          // URL of my website.\n          const myURL = { url: \"https://alexerdei73.github.io/fakebook/\" };\n\n          // Send Email Verification and redirect to my website.\n          return result.user.sendEmailVerification(myURL).then(() => {\n            console.log(\"Verification email has been sent.\");\n            setFormIsValid(true);\n          });\n        })\n        .catch((error) => {\n          // Update the error\n          setError(error);\n          console.log(error.message);\n          setFormIsValid(true);\n        });\n    setValidated(true);\n  };\n\n  useEffect(() => {\n    if (formIsValid) {\n      if (error) onError(error.message);\n      onSubmit();\n    }\n  }, [formIsValid, error, onError, onSubmit]);\n\n  return (\n    <Form noValidate validated={validated} onSubmit={handleSubmit}>\n      <Form.Row>\n        <Form.Group as={Col}>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"First name\"\n            name=\"firstname\"\n            onChange={handleNameChange}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            First name required.\n          </Form.Control.Feedback>\n        </Form.Group>\n        <Form.Group as={Col}>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Surename\"\n            name=\"lastname\"\n            onChange={handleNameChange}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            Last name required.\n          </Form.Control.Feedback>\n        </Form.Group>\n      </Form.Row>\n      <Form.Row>\n        <Form.Group as={Col}>\n          <Form.Control\n            type=\"email\"\n            placeholder=\"Email address\"\n            name=\"email\"\n            onChange={handleChange}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            Email required in the right format.\n          </Form.Control.Feedback>\n        </Form.Group>\n      </Form.Row>\n      <Form.Row>\n        <Form.Group as={Col}>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"New password\"\n            name=\"password\"\n            onChange={handleChange}\n            required\n          />\n          <Form.Control.Feedback type=\"invalid\">\n            Password required.\n          </Form.Control.Feedback>\n        </Form.Group>\n      </Form.Row>\n      <Form.Row>\n        <p className=\"text-muted p-1 text-legal\">\n          Signing Up for fakebook you agree to share the uploaded details with\n          any other user. Please do not upload any sensitive data to the app,\n          which is built strictly for demonstration purposes.\n        </p>\n      </Form.Row>\n      <Row>\n        <Button type=\"submit\" variant=\"success\" className=\"w-50 mx-auto\">\n          <strong>Sign Up</strong>\n        </Button>\n      </Row>\n    </Form>\n  );\n};\n\nexport default Signup;\n","import React, { useState, useEffect } from \"react\";\nimport { useFirebaseApp } from \"reactfire\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\n\nconst Login = (props) => {\n  const { onError, onChange, user, onClickForgottenPswd } = props;\n\n  // Import firebase\n  var firebase = useFirebaseApp();\n\n  // onChange function\n  const handleChange = (e) => {\n    onChange(e.target.name, e.target.value);\n    setErrorMsg(\"\");\n  };\n\n  const [errorMsg, setErrorMsg] = useState(user.error);\n\n  // Submit function (Create account)\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    //signIn code here ...\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(user.email, user.password)\n      .then((result) => {\n        // email has been verified?\n        if (!result.user.emailVerified) {\n          firebase.auth().signOut();\n          setErrorMsg(\"Please verify your email before to continue\");\n        } else {\n          setErrorMsg(\"\");\n        }\n      })\n      .catch((error) => {\n        // Update the error\n        if (user.email === \"\") setErrorMsg(\"Email is required.\");\n        else if (user.password === \"\") setErrorMsg(\"Password is required.\");\n        else setErrorMsg(error.message);\n      });\n  };\n\n  useEffect(() => {\n    onError(errorMsg);\n  }, [errorMsg, onError]);\n\n  useEffect(() => {\n    setErrorMsg(user.error);\n  }, [user]);\n\n  return (\n    <>\n      <Form noValidate onSubmit={handleSubmit} className=\"w-100\">\n        <Form.Control\n          type=\"email\"\n          placeholder=\"Email\"\n          name=\"email\"\n          size=\"lg\"\n          className=\"mb-2 w-100\"\n          onChange={handleChange}\n          isInvalid={\n            errorMsg.indexOf(\"mail\") !== -1 ||\n            errorMsg.indexOf(\"identifier\") !== -1\n          }\n        />\n        <Form.Control\n          type=\"text\"\n          placeholder=\"Password\"\n          name=\"password\"\n          size=\"lg\"\n          className=\"mb-2 w-100\"\n          onChange={handleChange}\n          isInvalid={errorMsg !== \"\"}\n        />\n        <Form.Control.Feedback type=\"invalid\">{errorMsg}</Form.Control.Feedback>\n        <Button variant=\"primary\" type=\"submit\" size=\"lg\" className=\"w-100\">\n          <b>Log In</b>\n        </Button>\n      </Form>\n      <Button\n        variant=\"link\"\n        type=\"link\"\n        className=\"w-100\"\n        id=\"link-button\"\n        onClick={onClickForgottenPswd}\n      >\n        Forgotten password?\n      </Button>\n    </>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\nimport \"./RecentLogins.css\";\n\nconst RecentLogins = () => {\n  return (\n    <div className=\"recent-logins\">\n      <h1 className=\"text-primary w-100\">\n        <strong style={{ fontSize: \"3.5rem\" }}>fakebook</strong>\n      </h1>\n      <h3 className=\"w-100\">\n        <p>\n          Fakebook helps you connect and share with the people in your life.\n        </p>\n      </h3>\n    </div>\n  );\n};\n\nexport default RecentLogins;\n","import React from \"react\";\nimport { StorageImage } from \"reactfire\";\nimport \"firebase/storage\";\n\nconst CircularImage = (props) => {\n  const { size, url, isOnline, ...rest } = props;\n\n  const radius = Math.floor(size / 6);\n\n  const shift = Math.floor(0.8536 * size - radius / 2);\n\n  return (\n    <>\n      <StorageImage\n        style={{\n          width: `${size}px`,\n          height: `${size}px`,\n          objectFit: \"cover\",\n          borderRadius: `${size / 2}px`,\n          pointerEvents: \"none\",\n          position: \"relative\",\n        }}\n        storagePath={url}\n        alt=\"\"\n        {...rest}\n      />\n      {isOnline && (\n        <div\n          className=\"bg-success\"\n          style={{\n            width: `${2 * radius}px`,\n            height: `${2 * radius}px`,\n            borderRadius: \"50%\",\n            position: \"absolute\",\n            top: `${shift}px`,\n            left: `${shift}px`,\n            border: \"2px solid white\",\n          }}\n        />\n      )}\n    </>\n  );\n};\n\nexport default CircularImage;\n","import React from \"react\";\nimport CircularImage from \"./CircularImage\";\nimport { Row, Col } from \"react-bootstrap\";\n\nconst ProfileLink = (props) => {\n  const { size, fullname, bold } = props;\n\n  const { firstname, lastname, profilePictureURL, isOnline } = props.user;\n\n  let name;\n  if (fullname === \"true\") name = `${firstname} ${lastname}`;\n  else name = `${firstname}`;\n\n  return (\n    <Row\n      style={{\n        minWidth: \"150px\",\n        color: \"inherited\",\n      }}\n    >\n      <Col xs=\"auto\" className=\"px-2 ml-2\">\n        <CircularImage\n          size={size}\n          url={profilePictureURL}\n          isOnline={isOnline}\n        />\n      </Col>\n      <Col className=\"align-self-center p-0\" style={{ color: \"inherited\" }}>\n        {bold === \"true\" ? <b>{name}</b> : name}\n      </Col>\n    </Row>\n  );\n};\n\nexport default ProfileLink;\n","import React from \"react\";\nimport { Navbar, Nav, Dropdown, DropdownButton } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { VscHome } from \"react-icons/vsc\";\nimport { FaFacebook } from \"react-icons/fa\";\nimport { FaUserFriends } from \"react-icons/fa\";\nimport { MdOndemandVideo } from \"react-icons/md\";\nimport { ImExit } from \"react-icons/im\";\nimport \"./Titlebar.css\";\nimport ProfileLink from \"./ProfileLink\";\nimport { useFirebaseApp } from \"reactfire\";\n\nconst TitleBar = (props) => {\n  //get the signed in user and closeFriendsListPage function\n  const { user, closeFriendsListPage, setUserOffline, refs, dimension } = props;\n\n  // Import firebase\n  const firebase = useFirebaseApp();\n\n  // Log out function\n  const handleClick = () => {\n    setUserOffline(() => firebase.auth().signOut());\n  };\n\n  const SM_WINDOW = 640;\n\n  return (\n    <Navbar bg=\"light\" fixed=\"top\" className=\"p-0\">\n      <Navbar.Brand as={Link} to=\"/fakebook\">\n        <FaFacebook color=\"dodgerblue\" fontSize=\"2em\" className=\"mx-3\" />\n      </Navbar.Brand>\n      {dimension.width > SM_WINDOW && <div style={{ width: \"450px\" }} />}\n      <Nav className=\"w-75 justify-content-start mr-5\">\n        {dimension.width > SM_WINDOW && (\n          <Nav.Item>\n            <Link to=\"/fakebook\" className=\"nav-link\" ref={refs.home}>\n              <VscHome\n                fontSize=\"2rem\"\n                className=\"mx-4\"\n                style={{ pointerEvents: \"none\" }}\n              />\n            </Link>\n          </Nav.Item>\n        )}\n        <Nav.Item>\n          <Link\n            to=\"/fakebook/friends/list\"\n            className=\"nav-link\"\n            ref={refs.friends}\n          >\n            <FaUserFriends\n              fontSize=\"2rem\"\n              className=\"mx-4\"\n              style={{ pointerEvents: \"none\" }}\n            />\n          </Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Link to=\"/fakebook/watch\" className=\"nav-link\" ref={refs.watch}>\n            <MdOndemandVideo\n              fontSize=\"2rem\"\n              className=\"mx-4\"\n              style={{ pointerEvents: \"none\" }}\n            />\n          </Link>\n        </Nav.Item>\n      </Nav>\n\n      <Nav className=\"w-25 justify-content-end align-self-center\">\n        {dimension.width > SM_WINDOW && (\n          <Nav.Item className=\"align-self-center\">\n            <Link\n              to={props.profilelink}\n              className=\"nav-link profile\"\n              id=\"profile\"\n              onClick={(e) => {\n                closeFriendsListPage();\n              }}\n              ref={refs.profile}\n            >\n              <ProfileLink user={user} size=\"30\" fullname=\"false\" bold=\"true\" />\n            </Link>\n          </Nav.Item>\n        )}\n        <Nav.Item className=\"align-self-center\">\n          <DropdownButton\n            title=\"\"\n            className=\"mr-4 custom-drop-down-btn\"\n            menuAlign=\"right\"\n          >\n            <Dropdown.Item\n              as={Link}\n              to={props.profilelink}\n              onClick={() => closeFriendsListPage()}\n            >\n              <ProfileLink user={user} size=\"60\" fullname=\"true\" bold=\"true\" />\n            </Dropdown.Item>\n            <Dropdown.Divider />\n            <Dropdown.Item\n              as={Link}\n              to=\"/fakebook/\"\n              onClick={handleClick}\n              className=\"p-0\"\n            >\n              <ImExit fontSize=\"1.5em\" className=\"mx-4\" />\n              <span>Log Out</span>\n              <div style={{ width: \"20em\" }}></div>\n            </Dropdown.Item>\n          </DropdownButton>\n        </Nav.Item>\n      </Nav>\n    </Navbar>\n  );\n};\n\nexport default TitleBar;\n","import React from \"react\";\nimport { StorageImage } from \"reactfire\";\n\nconst ResponsiveImage = (props) => {\n  const {\n    width,\n    height,\n    index,\n    userID,\n    photo,\n    onClick,\n    className,\n    useStoragePath,\n  } = props;\n\n  let storagePath;\n  if (useStoragePath === \"true\") storagePath = photo;\n  else storagePath = `/${userID}/${photo.fileName}`;\n\n  return (\n    <div\n      key={index}\n      className={className}\n      style={{\n        display: \"inline-block\",\n        position: \"relative\",\n        width: `${width}`,\n        height: \"0px\",\n        paddingBottom: `${height}`,\n      }}\n    >\n      <StorageImage\n        alt=\"\"\n        id={index}\n        storagePath={storagePath}\n        style={{\n          position: \"absolute\",\n          top: \"0px\",\n          left: \"0px\",\n          width: \"100%\",\n          height: \"100%\",\n          objectFit: \"cover\",\n        }}\n        onClick={onClick}\n      ></StorageImage>\n    </div>\n  );\n};\n\nexport default ResponsiveImage;\n","export function handleClickLink(e, linkState, setLinkState) {\n  const current = e.currentTarget;\n  const previous = linkState;\n  if (previous) {\n    if (previous.id === \"profile\") previous.style.backgroundColor = \"#e9ecef\";\n    previous.style.borderBottom = \"3px solid transparent\";\n    previous.style.color = \"\";\n  }\n  if (current) {\n    setLinkState(current);\n    current.style.color = \"dodgerblue\";\n    if (current.id === \"profile\") {\n      current.style.backgroundColor = \"lightblue\";\n      return;\n    }\n    current.style.borderBottom = \"3px solid dodgerblue\";\n  }\n}\n\nexport function handleTextareaChange(input) {\n  let value = input.e.target.value;\n  const newState = { ...input.state };\n  newState.text = value;\n  input.setState(newState);\n  return value;\n}\n\nexport function addPhoto(input) {\n  const newState = { ...input.state };\n  newState.isPhoto = true;\n  newState.photoURL = `${input.userID}/${input.file.name}`;\n  input.setState(newState);\n}\n\nexport function delPhoto(input) {\n  //We do not remove the photo from the storage, because in the case of multiple occurances, the removal\n  //of the photo causes error. If we want to take into account the storage efficiency, we have to store\n  //the number of occurences of each photo and only delete those from the storage, which only occure once.\n  //This would cause unnecessary extra logic in a demonstration app like this.\n  removePhotoFromPost(input.state, input.setState, input.sideEffect);\n}\n\nfunction removePhotoFromPost(state, setState, sideEffect) {\n  const newState = { ...state };\n  newState.isPhoto = false;\n  newState.photoURL = \"\";\n  setState(newState);\n  if (sideEffect) sideEffect();\n}\n\nexport function handleKeyPress(e, save) {\n  if (e.shiftKey) return;\n  const code = e.code;\n  if (code !== \"Enter\") return;\n  e.preventDefault();\n  save();\n}\n","import React, { useEffect } from \"react\";\nimport { Row, Col, Card, Button } from \"react-bootstrap\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport ResponsiveImage from \"./ResponsiveImage\";\nimport { handleClickLink } from \"./helper\";\n\nconst Photos = (props) => {\n  const { url } = useRouteMatch();\n  const {\n    userID,\n    photos,\n    openFileInput,\n    isCurrentUser,\n    photosLinkRef,\n    activeLink,\n    setActiveLink,\n  } = props;\n\n  useEffect(() => {\n    handleClickLink(\n      { currentTarget: photosLinkRef.current },\n      activeLink,\n      setActiveLink\n    );\n  }, [activeLink, photosLinkRef, setActiveLink]);\n\n  return (\n    <Card variant=\"light\" className=\"w-100\">\n      <Card.Body>\n        <Card.Title>\n          <Link to={url} className=\"text-body\">\n            <b>Photos</b>\n          </Link>\n          {isCurrentUser && (\n            <Button\n              variant=\"link\"\n              style={{\n                textDecoration: \"none\",\n                float: \"right\",\n              }}\n              onClick={openFileInput}\n            >\n              <b>Add Photos</b>\n            </Button>\n          )}\n        </Card.Title>\n        <Row className=\"w-100\">\n          {photos.map((photo, index) => {\n            return (\n              <Col key={index} xs={6} sm={4} md={3} lg={2} className=\"px-1\">\n                <Link to={`/fakebook/photo/${userID}/${index}`}>\n                  <ResponsiveImage\n                    width=\"100%\"\n                    height=\"100%\"\n                    userID={userID}\n                    photo={photo}\n                    index={index}\n                    className=\"m-2\"\n                  />\n                </Link>\n              </Col>\n            );\n          })}\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default Photos;\n","import React, { useState } from \"react\";\nimport { Col, OverlayTrigger } from \"react-bootstrap\";\nimport { useHistory } from \"react-router-dom\";\nimport CircularImage from \"./CircularImage\";\nimport { StorageImage } from \"reactfire\";\nimport \"./FriendCard.css\";\n\nconst FriendCard = (props) => {\n  const { user } = props;\n\n  const userName = `${user.firstname} ${user.lastname}`;\n\n  const [showOverlay, setShowOverlay] = useState(false);\n\n  const history = useHistory();\n\n  function handleClick() {\n    history.push(\n      user.index && user.index > 0\n        ? `/fakebook/${user.lastname}.${user.firstname}.${user.index}`\n        : `/fakebook/${user.lastname}.${user.firstname}`\n    );\n  }\n\n  return (\n    <Col xs={6} className=\"my-3\">\n      <OverlayTrigger\n        placement=\"auto\"\n        show={showOverlay}\n        overlay={\n          <div\n            className=\"popup-card\"\n            onMouseEnter={() => setShowOverlay(true)}\n            onMouseLeave={() => setShowOverlay(false)}\n            onClick={handleClick}\n          >\n            <div className=\"m-3\">\n              <CircularImage size=\"120\" url={user.profilePictureURL} />\n            </div>\n            <h4 className=\"name-tag\">\n              <b>{userName}</b>\n            </h4>\n          </div>\n        }\n      >\n        <StorageImage\n          storagePath={user.profilePictureURL}\n          width=\"90px\"\n          height=\"90px\"\n          alt=\"\"\n          className=\"profile-picture\"\n          onMouseEnter={() => setShowOverlay(true)}\n          onMouseLeave={() => setShowOverlay(false)}\n          onClick={handleClick}\n        />\n      </OverlayTrigger>\n      <b className=\"ml-3\" onClick={handleClick}>\n        {userName}\n      </b>\n    </Col>\n  );\n};\n\nexport default FriendCard;\n","import React, { useEffect } from \"react\";\nimport { Card, Row } from \"react-bootstrap\";\nimport { Link, useRouteMatch } from \"react-router-dom\";\nimport FriendCard from \"./FriendCard\";\nimport { handleClickLink } from \"./helper\";\n\nconst Friends = (props) => {\n  const { url } = useRouteMatch();\n\n  const { users, friendsLinkRef, activeLink, setActiveLink } = props;\n\n  useEffect(() => {\n    handleClickLink(\n      { currentTarget: friendsLinkRef.current },\n      activeLink,\n      setActiveLink\n    );\n  }, [activeLink, friendsLinkRef, setActiveLink]);\n\n  //copyUsers never undefined to avoid error\n  let copyUsers;\n  if (!users) copyUsers = [];\n  else copyUsers = users;\n\n  return (\n    <Card>\n      <Card.Body>\n        <Card.Title>\n          <Link to={url} className=\"text-body\">\n            <b>Friends</b>\n          </Link>\n        </Card.Title>\n\n        <Row>\n          {copyUsers.map((user, index) => (\n            <FriendCard user={user} key={index} />\n          ))}\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default Friends;\n","import React, { useRef, useEffect } from \"react\";\nimport { useStorage } from \"reactfire\";\n\nconst UploadPhoto = (props) => {\n  const { show, setShow, updateDatabase, userID } = props;\n\n  const storage = useStorage();\n\n  const fileInputRef = useRef(null);\n\n  useEffect(() => {\n    if (!show) return;\n    fileInputRef.current.click();\n    setShow(false);\n  }, [show, setShow]);\n\n  function onChange(event) {\n    event.preventDefault();\n    const file = event.target.files[0];\n    const ref = storage.ref(userID).child(file.name);\n    ref.put(file).then(() => {\n      return updateDatabase(file);\n    });\n  }\n\n  return (\n    <input\n      type=\"file\"\n      accept=\"image/*\"\n      ref={fileInputRef}\n      style={{ display: \"none\" }}\n      onChange={onChange}\n    />\n  );\n};\n\nexport default UploadPhoto;\n","import React, { useState } from \"react\";\nimport { Modal, Button, CloseButton } from \"react-bootstrap\";\nimport { StorageImage, useStorage, useFirestore } from \"reactfire\";\nimport ProfileLink from \"./ProfileLink\";\nimport UploadPhoto from \"./UploadPhoto\";\nimport { HiOutlinePhotograph } from \"react-icons/hi\";\nimport { AiFillYoutube } from \"react-icons/ai\";\nimport * as fb from \"firebase\"; //this is only needed, because we want to use server timestamps\nimport \"./PostModal.css\";\nimport { handleTextareaChange, addPhoto, delPhoto } from \"./helper\";\n\nconst PostModal = (props) => {\n  const {\n    show,\n    onClose,\n    user,\n    userID,\n    setText,\n    isYoutubeBtnPressed,\n    placeholder,\n  } = props;\n\n  const WELCOME_TEXT = `For adding YouTube video do the following:\n     1. copy link of the video from the addresse bar of your browser\n     2. press YouTube button again to upload the YouTube video to your post\n     3. add your text for the post\n     4. push the post button`;\n  const INIT_POST = {\n    userID: `${userID}`,\n    text: \"\",\n    isPhoto: false,\n    photoURL: \"\",\n    isYoutube: false,\n    youtubeURL: \"\",\n    likes: [],\n  };\n  const [post, setPost] = useState(INIT_POST);\n\n  function handleChange(e) {\n    const value = handleTextareaChange({\n      e: e,\n      state: post,\n      setState: setPost,\n    });\n    setPostBtnEnabled(value);\n  }\n\n  function setPostBtnEnabled(value) {\n    if (value === \"\") setBtnEnabled(false);\n    else setBtnEnabled(true);\n    setText(value);\n  }\n\n  const [isBtnEnabled, setBtnEnabled] = useState(false);\n  let variant, disabled;\n  if (isBtnEnabled) {\n    variant = \"primary\";\n    disabled = false;\n  } else {\n    variant = \"secondary\";\n    disabled = true;\n  }\n\n  const [showUploadPhotoDlg, setShowUploadPhotoDlg] = useState(false);\n\n  function addPhotoToPost(file) {\n    addPhoto({\n      state: post,\n      setState: setPost,\n      file: file,\n      userID: userID,\n    });\n    setBtnEnabled(true);\n  }\n\n  const storage = useStorage();\n\n  function deletePhoto() {\n    delPhoto({\n      state: post,\n      setState: setPost,\n      user: user,\n      userID: userID,\n      storage: storage,\n      sideEffect: setPostBtnAsSideEffect,\n    });\n  }\n\n  function setPostBtnAsSideEffect() {\n    if (post.text === \"\" && !post.isYoutube) setBtnEnabled(false);\n  }\n\n  const firestore = useFirestore();\n\n  function uploadPost() {\n    const refPosts = firestore.collection(\"posts\");\n    refPosts\n      .add({\n        ...post,\n        timestamp: fb.default.firestore.FieldValue.serverTimestamp(),\n      })\n      .then((docRef) => {\n        const postID = docRef.id;\n        updateUserPosts(postID);\n        setPost(INIT_POST);\n        setText(\"\");\n        onClose();\n      });\n  }\n\n  function updateUserPosts(postID) {\n    let newPosts;\n    if (user.posts) newPosts = [...user.posts];\n    else newPosts = [];\n    newPosts.unshift(postID);\n    const refUser = firestore.collection(\"users\").doc(userID);\n    refUser.update({\n      posts: newPosts,\n    });\n  }\n\n  function addYoutubeVideo() {\n    const url = post.text;\n    const URL_PATTERN = \"https://www.youtube.com/watch?v=\";\n    const MOBILE_URL_PATTERN = \"https://m.youtube.com/watch?v=\";\n    if (!url.startsWith(URL_PATTERN) && !url.startsWith(MOBILE_URL_PATTERN))\n      return;\n    let patternLength;\n    if (url.startsWith(URL_PATTERN)) patternLength = URL_PATTERN.length;\n    else patternLength = MOBILE_URL_PATTERN.length;\n    const videoID = url.slice(patternLength);\n    const youtubeURL = `https://www.youtube.com/embed/${videoID}`;\n    const newPost = { ...post };\n    newPost.isYoutube = true;\n    newPost.youtubeURL = youtubeURL;\n    newPost.text = \"\";\n    setPost(newPost);\n    setText(\"\");\n    setBtnEnabled(true);\n  }\n\n  function deleteYoutubeVideo() {\n    const newPost = { ...post };\n    newPost.isYoutube = false;\n    newPost.youtubeURL = \"\";\n    setPost(newPost);\n    if (post.text === \"\" && !post.isPhoto) setBtnEnabled(false);\n  }\n\n  function getPlaceholder() {\n    if (isYoutubeBtnPressed && !post.isYoutube) return WELCOME_TEXT;\n    else return placeholder;\n  }\n\n  function getRows() {\n    if (getPlaceholder() === WELCOME_TEXT && post.text === \"\") return 7;\n    else return 3;\n  }\n\n  return (\n    <>\n      <Modal show={show} onHide={onClose}>\n        <Modal.Header closeButton>\n          <div className=\"w-100 d-flex justify-content-center\">\n            <Modal.Title>\n              <b>Create Post</b>\n            </Modal.Title>\n          </div>\n        </Modal.Header>\n        <Modal.Body>\n          <ProfileLink user={user} size=\"45\" fullname=\"true\" bold=\"true\" />\n          <div className=\"mt-2 scrolling-container\">\n            <textarea\n              type=\"text\"\n              onChange={handleChange}\n              className=\"w-100 mt-2 textarea\"\n              placeholder={getPlaceholder()}\n              rows={getRows()}\n              value={post.text}\n            ></textarea>\n            {post.isPhoto && (\n              <div className=\"mb-2 img-container\">\n                <StorageImage\n                  alt=\"\"\n                  storagePath={`/${post.photoURL}`}\n                  className=\"w-100 img-to-post\"\n                />\n                <div className=\"close-btn-container\">\n                  <CloseButton onClick={deletePhoto} />\n                </div>\n              </div>\n            )}\n            {post.isYoutube && (\n              <div className=\"mb-2 video-container\">\n                <iframe\n                  src={post.youtubeURL}\n                  title=\"YouTube video player\"\n                  frameborder=\"0\"\n                  allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope\"\n                  allowfullscreen\n                ></iframe>\n                <div className=\"close-btn-container\">\n                  <CloseButton onClick={deleteYoutubeVideo} />\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"w-100 my-2 add-to-post\">\n            <b>Add to your post</b>\n            <Button\n              className=\"ml-2 add-photo-btn\"\n              variant=\"light\"\n              size=\"sm\"\n              onClick={addYoutubeVideo}\n              disabled={post.isPhoto || post.isYoutube}\n            >\n              <AiFillYoutube size=\"26px\" className=\"text-danger\" />\n            </Button>\n            <Button\n              className=\"ml-2 add-photo-btn\"\n              variant=\"light\"\n              size=\"sm\"\n              onClick={() => setShowUploadPhotoDlg(true)}\n              disabled={post.isPhoto || post.isYoutube}\n            >\n              <HiOutlinePhotograph size=\"26px\" className=\"text-success\" />\n            </Button>\n          </div>\n          <Button\n            variant={variant}\n            className=\"w-100 mt-3\"\n            disabled={disabled}\n            onClick={uploadPost}\n          >\n            <b>Post</b>\n          </Button>\n        </Modal.Body>\n      </Modal>\n      <UploadPhoto\n        show={showUploadPhotoDlg}\n        setShow={setShowUploadPhotoDlg}\n        updateDatabase={addPhotoToPost}\n        userID={userID}\n      />\n    </>\n  );\n};\n\nexport default PostModal;\n","import React, { useState } from \"react\";\nimport { Card, Button } from \"react-bootstrap\";\nimport CircularImage from \"./CircularImage\";\nimport PostModal from \"./PostModal\";\nimport \"./CreatePost.css\";\nimport { HiOutlinePhotograph } from \"react-icons/hi\";\nimport { AiFillYoutube } from \"react-icons/ai\";\n\nconst CreatePost = (props) => {\n  const { user, userID, firstname, isCurrentUser, ...rest } = props;\n\n  const PLACEHOLDER_FOR_CURRENT_USER = `What's on your mind ${user.firstname}?`;\n  const PLACEHOLDER_FOR_ANOTHER_USER = `Write something to ${firstname}`;\n\n  const [showPostModal, setShowPostModal] = useState(false);\n  const [isYoutubeBtnPressed, setYoutubeBtnPressed] = useState(false);\n\n  const [text, setText] = useState(\"\");\n\n  const handleClose = () => {\n    setShowPostModal(false);\n    setYoutubeBtnPressed(false);\n  };\n\n  const handleClick = () => setShowPostModal(true);\n\n  const handleYoutubeBtnClick = () => {\n    setYoutubeBtnPressed(true);\n    setShowPostModal(true);\n  };\n\n  function getPlaceholder() {\n    if (isCurrentUser) return PLACEHOLDER_FOR_CURRENT_USER;\n    else return PLACEHOLDER_FOR_ANOTHER_USER;\n  }\n\n  function getText() {\n    const MAX_LENGTH = 55;\n    const length = text.length;\n    if (length === 0) return getPlaceholder();\n    else {\n      let newText = text.slice(0, MAX_LENGTH);\n      if (length > MAX_LENGTH) newText += \"...\";\n      return newText;\n    }\n  }\n\n  return (\n    <>\n      <Card className=\"create-post-card\" {...rest}>\n        <Card.Body>\n          <Card.Title>\n            <CircularImage size=\"40\" url={user.profilePictureURL} />\n            <div className=\"p-2 w-75 text-dark text-div\" onClick={handleClick}>\n              {getText()}\n            </div>\n          </Card.Title>\n          <hr></hr>\n          <Button\n            variant=\"light\"\n            className=\"add-btn\"\n            size=\"sm\"\n            onClick={handleYoutubeBtnClick}\n          >\n            <AiFillYoutube size=\"28px\" className=\"text-danger\" />\n            YouTube\n          </Button>\n          <Button\n            variant=\"light\"\n            className=\"add-btn\"\n            size=\"sm\"\n            onClick={handleClick}\n          >\n            <HiOutlinePhotograph size=\"28px\" className=\"text-success\" />\n            Photo\n          </Button>\n        </Card.Body>\n      </Card>\n\n      <PostModal\n        show={showPostModal}\n        onClose={handleClose}\n        user={user}\n        userID={userID}\n        setText={setText}\n        isYoutubeBtnPressed={isYoutubeBtnPressed}\n        placeholder={getPlaceholder()}\n      />\n    </>\n  );\n};\n\nexport default CreatePost;\n","import React from \"react\";\nimport { Card, Row, Col } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport ResponsiveImage from \"./ResponsiveImage\";\nimport { handleClickLink } from \"./helper\";\n\nconst MiniPhotos = (props) => {\n  const { user, userID, photosLinkRef, activeLink, setActiveLink, ...rest } =\n    props;\n\n  const photos = user.photos;\n\n  const NUMBER_OF_PHOTOS = 9;\n\n  const photosLink = `/fakebook/${user.lastname}.${user.firstname}/Photos`;\n\n  function handleClick() {\n    handleClickLink(\n      { currentTarget: photosLinkRef.current },\n      activeLink,\n      setActiveLink\n    );\n  }\n\n  return (\n    <Card {...rest}>\n      <Card.Body>\n        <Card.Title>\n          <Link to={photosLink} className=\"text-body\" onClick={handleClick}>\n            <b>Photos</b>\n          </Link>\n        </Card.Title>\n        <Row>\n          {photos.map((photo, index) => {\n            return (\n              //we only render maximum 9 photos\n              index < NUMBER_OF_PHOTOS && (\n                <Col\n                  key={index}\n                  xs={4}\n                  className=\"m-0\"\n                  style={{\n                    paddingLeft: \"3px\",\n                    paddingRight: \"3px\",\n                    paddingTop: \"0\",\n                    paddingBottom: \"0\",\n                  }}\n                >\n                  <Link\n                    to={`/fakebook/photo/${userID}/${index}`}\n                    className=\"text-body\"\n                    onClick={handleClick}\n                  >\n                    <ResponsiveImage\n                      photo={photo}\n                      userID={userID}\n                      index={index}\n                      width=\"100%\"\n                      height=\"100%\"\n                    />\n                  </Link>\n                </Col>\n              )\n            );\n          })}\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default MiniPhotos;\n","import React from \"react\";\nimport { Card, Row, Col } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { handleClickLink } from \"./helper\";\nimport ResponsiveImage from \"./ResponsiveImage\";\n\nconst MiniFriends = (props) => {\n  const {\n    user,\n    userID,\n    users,\n    friendsLinkRef,\n    activeLink,\n    setActiveLink,\n    ...rest\n  } = props;\n\n  const NUMBER_OF_FRIENDS = 9;\n\n  const friendsLink =\n    user.index && user.index > 0\n      ? `/fakebook/${user.lastname}.${user.firstname}.${user.index}/Friends`\n      : `/fakebook/${user.lastname}.${user.firstname}/Friends`;\n\n  function handleClick() {\n    handleClickLink(\n      { currentTarget: friendsLinkRef.current },\n      activeLink,\n      setActiveLink\n    );\n  }\n\n  return (\n    <Card {...rest}>\n      <Card.Body>\n        <Card.Title>\n          <Link to={friendsLink} className=\"text-body\" onClick={handleClick}>\n            <b>Friends</b>\n          </Link>\n        </Card.Title>\n        <Card.Subtitle className=\"text-muted\">\n          {users.length} friends\n        </Card.Subtitle>\n        <Row>\n          {users.map((user, index) => {\n            const userProfileURL =\n              user.index && user.index > 0\n                ? `/fakebook/${user.lastname}.${user.firstname}.${user.index}`\n                : `/fakebook/${user.lastname}.${user.firstname}`;\n            const userName = `${user.firstname} ${user.lastname}`;\n            return (\n              //we render maximum 9 friends\n              index < NUMBER_OF_FRIENDS && (\n                <Col\n                  key={index}\n                  xs={4}\n                  className=\"m-0\"\n                  style={{\n                    paddingLeft: \"3px\",\n                    paddingRight: \"3px\",\n                    paddingTop: \"0\",\n                    paddingBottom: \"0\",\n                  }}\n                >\n                  <Link\n                    to={userProfileURL}\n                    className=\"text-body\"\n                    onClick={handleClick}\n                  >\n                    <ResponsiveImage\n                      photo={user.profilePictureURL}\n                      width=\"100%\"\n                      height=\"100%\"\n                      useStoragePath=\"true\"\n                    />\n                    <div className=\"w-100\" style={{ height: \"2.7em\" }}>\n                      <p style={{ fontSize: \"0.9em\" }}>\n                        <b>{userName}</b>\n                      </p>\n                    </div>\n                  </Link>\n                </Col>\n              )\n            );\n          })}\n        </Row>\n      </Card.Body>\n    </Card>\n  );\n};\n\nexport default MiniFriends;\n","import React from \"react\";\nimport ProfileLink from \"./ProfileLink\";\nimport { Col } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\n\nconst FriendList = (props) => {\n  const { users, variant } = props;\n\n  const isModal = variant === \"modal\";\n\n  return (\n    <Col xs=\"auto\" className=\"overflow-auto mh-100\">\n      <div id=\"col-1\" className=\"m-2\">\n        {users.map((user, index) => {\n          let profileLink = `/fakebook/${user.lastname}.${user.firstname}`;\n          if (user.index && user.index > 0)\n            profileLink = profileLink + `.${user.index}`;\n          return (\n            <Link\n              key={index}\n              to={profileLink}\n              className={isModal ? \"p-1 text-dark\" : \"nav-link text-dark\"}\n            >\n              <ProfileLink\n                user={user}\n                fullname=\"true\"\n                size={isModal ? \"40\" : \"60\"}\n                bold=\"true\"\n                className=\"pb-1\"\n              />\n            </Link>\n          );\n        })}\n      </div>\n    </Col>\n  );\n};\n\nexport default FriendList;\n","import React from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport FriendList from \"./FriendList\";\n\nconst LikesModal = (props) => {\n  const { show, onHide, users, likes } = props;\n\n  const usersWhoLike = likes.map((userID) =>\n    users.find((user) => user.userID === userID)\n  );\n\n  return (\n    <Modal show={show} onHide={onHide}>\n      <Modal.Header closeButton>\n        <Modal.Title className=\"text-primary\">All</Modal.Title>\n      </Modal.Header>\n      <Modal.Body className=\"overflow-hidden\">\n        <FriendList users={usersWhoLike} variant=\"modal\" />\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default LikesModal;\n","import React from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport { StorageImage } from \"reactfire\";\nimport CircularImage from \"./CircularImage\";\n\nconst DisplayComment = (props) => {\n  const { comment, users, ...rest } = props;\n\n  const userID = comment.userID;\n\n  const user = users.find((user) => user.userID === userID);\n\n  return (\n    <Row {...rest}>\n      <Col xs={1}>\n        <CircularImage size=\"26\" url={user.profilePictureURL} />\n      </Col>\n      <Col xs={11}>\n        <p>\n          <b>{`${user.firstname} ${user.lastname} `}</b>\n          {comment.text}\n        </p>\n        {comment.isPhoto && (\n          <StorageImage\n            alt=\"\"\n            storagePath={comment.photoURL}\n            style={{\n              width: \"30%\",\n            }}\n          />\n        )}\n      </Col>\n    </Row>\n  );\n};\n\nexport default DisplayComment;\n","import React, { useState, useEffect, useRef } from \"react\";\n\nconst StyledTextarea = (props) => {\n  const { onChange, onKeyPress, value, welcomeText, ...rest } = props;\n\n  const TEXTAREA_STYLE_INIT = {\n    outline: \"none\",\n    border: \"none\",\n    resize: \"none\",\n    overflow: \"hidden\",\n    background: \"#e9ecef\",\n    padding: \"0\",\n    lineHeight: \"0.8em\",\n  };\n  const styleInitRef = useRef(TEXTAREA_STYLE_INIT);\n  const [style, setStyle] = useState(TEXTAREA_STYLE_INIT);\n  const [textarea, setTextarea] = useState(null); //We save the textarea in the state, so the effect hook can use it\n\n  //When content changes we first change the height to auto,\n  //which changes back the scrollHeight property of the textarea\n  //to a low value and the component rerenders\n  function restyleTextarea(textarea) {\n    const newStyle = { ...style };\n    newStyle.height = \"auto\";\n    setStyle(newStyle);\n  }\n\n  //When the component has rerendered and the height is auto\n  //we set the height to the scrollHeight property of textarea\n  //This way when the height of the content decreses the textarea\n  //can follow it down too. Without this trick the textarea can\n  //grow but unable to shrink back\n  useEffect(() => {\n    if (style.height !== \"auto\") return;\n    if (!textarea) return;\n    const newStyle = { ...style };\n    newStyle.height = textarea.scrollHeight + \"px\";\n    setStyle(newStyle);\n  }, [style, textarea]);\n\n  //This restyles the text area, when we send the message, so the\n  //value goes back to \"\" without executing the onChange handler\n  useEffect(() => {\n    if (value === \"\" && textarea) setStyle(styleInitRef.current);\n  }, [value, textarea, styleInitRef]);\n\n  return (\n    <textarea\n      type=\"text\"\n      onChange={(e) => {\n        onChange(e);\n        const textarea = e.target;\n        setTextarea(textarea);\n        restyleTextarea(textarea);\n      }}\n      onKeyPress={onKeyPress}\n      placeholder={welcomeText}\n      rows=\"1\"\n      style={style}\n      value={value}\n      {...rest}\n    ></textarea>\n  );\n};\n\nexport default StyledTextarea;\n","import React, { useState } from \"react\";\nimport { Col, Row, CloseButton, Button } from \"react-bootstrap\";\nimport { StorageImage, useStorage } from \"reactfire\";\nimport CircularImage from \"./CircularImage\";\nimport UploadPhoto from \"./UploadPhoto\";\nimport DisplayComment from \"./DisplayComment\";\nimport StyledTextarea from \"./StyledTextarea\";\nimport { MdPhotoCamera } from \"react-icons/md\";\nimport { MdSend } from \"react-icons/md\";\nimport {\n  addPhoto,\n  handleTextareaChange,\n  delPhoto,\n  handleKeyPress,\n} from \"./helper\";\nimport \"./Comments.css\";\n\nconst Comments = (props) => {\n  const { user, post, updatePost, users } = props;\n\n  const WELCOME_TEXT = \"Write a comment ...\";\n  const INIT_COMMENT = {\n    userID: `${user.userID}`,\n    text: \"\",\n    isPhoto: false,\n    photoURL: \"\",\n  };\n  const [comment, setComment] = useState(INIT_COMMENT);\n\n  const [show, setShow] = useState(false);\n\n  function handleChange(e) {\n    handleTextareaChange({\n      e: e,\n      state: comment,\n      setState: setComment,\n    });\n  }\n\n  function addPhotoToComment(file) {\n    addPhoto({\n      state: comment,\n      setState: setComment,\n      file: file,\n      userID: user.userID,\n    });\n  }\n\n  const storage = useStorage();\n\n  function deletePhoto() {\n    delPhoto({\n      state: comment,\n      setState: setComment,\n      user: user,\n      userID: user.userID,\n      storage: storage,\n    });\n  }\n\n  function saveComment() {\n    if (comment.text === \"\" && !comment.isPhoto) return;\n    const newPost = { ...post };\n    if (!post.comments) newPost.comments = [];\n    newPost.comments.push(comment);\n    updatePost(newPost);\n    setComment(INIT_COMMENT);\n  }\n\n  return (\n    <Col>\n      <hr />\n      {post.comments &&\n        post.comments.map((comment, index) => (\n          <DisplayComment\n            key={index}\n            comment={comment}\n            users={users}\n            className=\"mb-2\"\n          />\n        ))}\n      <Row>\n        <Col xs={1}>\n          <CircularImage size=\"36\" url={user.profilePictureURL} />\n        </Col>\n        <Col xs={11}>\n          <Row\n            style={{\n              background: \"#e9ecef\",\n              borderRadius: \"18px\",\n              marginLeft: \"5px\",\n            }}\n          >\n            <Col xs={9} className=\"align-self-center\">\n              <StyledTextarea\n                onChange={handleChange}\n                onKeyPress={(e) => handleKeyPress(e, saveComment)}\n                welcomeText={WELCOME_TEXT}\n                value={comment.text}\n                className=\"w-100 mt-2\"\n              />\n            </Col>\n            <Col xs={3}>\n              <Row className=\"justify-content-end align-items-baseline\">\n                <Button\n                  variant=\"light\"\n                  size=\"sm\"\n                  className=\"comment-btn\"\n                  onClick={() => setShow(true)}\n                  disabled={comment.isPhoto}\n                >\n                  <MdPhotoCamera size=\"18px\" className=\"text-muted\" />\n                </Button>\n                <Button\n                  variant=\"light\"\n                  size=\"sm\"\n                  className=\"comment-btn\"\n                  onClick={() => saveComment()}\n                >\n                  <MdSend size=\"18px\" className=\"text-primary\" />\n                </Button>\n              </Row>\n            </Col>\n          </Row>\n          {comment.isPhoto && (\n            <div className=\"comment-img-container\">\n              <StorageImage\n                alt=\"\"\n                storagePath={`/${comment.photoURL}`}\n                className=\"img-to-comment\"\n              />\n              <div id=\"close-btn-container\">\n                <CloseButton onClick={deletePhoto} />\n              </div>\n            </div>\n          )}\n        </Col>\n      </Row>\n\n      <UploadPhoto\n        show={show}\n        setShow={setShow}\n        updateDatabase={addPhotoToComment}\n        userID={user.userID}\n      />\n    </Col>\n  );\n};\n\nexport default Comments;\n","import React, { useState } from \"react\";\nimport { Card, Button } from \"react-bootstrap\";\nimport { StorageImage, useFirestore } from \"reactfire\";\nimport ProfileLink from \"./ProfileLink\";\nimport LikesModal from \"./LikesModal\";\nimport Comments from \"./Comments\";\nimport { AiOutlineLike, AiFillLike } from \"react-icons/ai\";\nimport { GoComment } from \"react-icons/go\";\n\nconst DisplayPost = (props) => {\n  const { post, postID, users, userID, ...rest } = props;\n\n  const [show, setShow] = useState(false);\n\n  const [showComments, setShowComments] = useState(false);\n\n  function handleHide() {\n    setShow(false);\n  }\n\n  const firestore = useFirestore();\n\n  //We avoid error if post is undefind\n  if (!post) return <></>;\n\n  const user = users.find((user) => user.userID === post.userID);\n\n  const currentUser = users.find((user) => user.userID === userID);\n\n  const postRef = firestore.collection(\"posts\").doc(postID);\n\n  function updatePost(post) {\n    postRef.update(post);\n  }\n\n  function index() {\n    return post.likes.indexOf(userID);\n  }\n\n  function isLiked() {\n    return !(index() === -1);\n  }\n\n  function handleClick() {\n    const likes = post.likes;\n    const index = likes.indexOf(userID);\n    if (index === -1) likes.push(userID);\n    else likes.splice(index, 1);\n    updatePost({ likes: likes });\n  }\n\n  function handleCommentClick() {\n    setShowComments(true);\n  }\n\n  return (\n    <Card {...rest}>\n      <Card.Header>\n        <ProfileLink user={user} size=\"40\" fullname=\"true\" bold=\"true\" />\n        <span\n          style={{\n            fontSize: \"12px\",\n          }}\n        >\n          {post.timestamp && post.timestamp.toDate().toLocaleString()}\n        </span>\n      </Card.Header>\n      <Card.Body>\n        <Card.Text>{post.text}</Card.Text>\n        {post.isPhoto && (\n          <StorageImage alt=\"\" storagePath={post.photoURL} className=\"w-100\" />\n        )}\n        {post.isYoutube && (\n          <div className=\"video-container\">\n            <iframe\n              src={post.youtubeURL}\n              title=\"YouTube video player\"\n              frameBorder=\"0\"\n              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope\"\n              allowFullScreen\n            ></iframe>\n          </div>\n        )}\n      </Card.Body>\n      <Card.Footer>\n        <Button\n          variant=\"link\"\n          className=\"text-muted\"\n          onClick={() => {\n            if (post.likes.length > 0) setShow(true);\n          }}\n          style={{ boxShadow: \"none\" }}\n        >\n          <AiFillLike\n            className=\"bg-primary text-light mr-2\"\n            style={{ borderRadius: \"50%\" }}\n          />\n          {post.likes.length}\n        </Button>\n        <Button\n          variant=\"link\"\n          className=\"text-muted float-right\"\n          onClick={() => setShowComments(!showComments)}\n          style={{ boxShadow: \"none\" }}\n        >\n          comments({post.comments ? post.comments.length : 0})\n        </Button>\n        <hr />\n        <Button\n          variant=\"light\"\n          className={`${isLiked() ? \"text-primary\" : \"text-muted\"} w-50`}\n          onClick={handleClick}\n        >\n          {isLiked() ? (\n            <AiFillLike size=\"22px\" />\n          ) : (\n            <AiOutlineLike size=\"22px\" />\n          )}\n          <b> Like</b>\n        </Button>\n        <Button\n          variant=\"light\"\n          className=\"text-muted w-50\"\n          onClick={handleCommentClick}\n        >\n          <GoComment size=\"22px\" />\n          <b> Comment</b>\n        </Button>\n        {showComments && (\n          <Comments\n            user={currentUser}\n            post={post}\n            updatePost={updatePost}\n            users={users}\n          />\n        )}\n      </Card.Footer>\n\n      <LikesModal\n        show={show}\n        onHide={handleHide}\n        users={users}\n        likes={post.likes}\n      />\n    </Card>\n  );\n};\n\nexport default DisplayPost;\n","import React from \"react\";\nimport { useFirestore, useFirestoreDocData } from \"reactfire\";\nimport DisplayPost from \"./DisplayPost\";\n\nconst DisplayUserPost = (props) => {\n  const { postID, userID, ...rest } = props;\n\n  const INIT_POST = {\n    userID: `${userID}`,\n    text: \"\",\n    isPhoto: false,\n    photoURL: \"\",\n    likes: [],\n  };\n\n  const firestore = useFirestore();\n  const postRef = firestore.collection(\"posts\").doc(postID);\n  const post = useFirestoreDocData(postRef, { initialData: INIT_POST }).data;\n\n  return <DisplayPost post={post} postID={postID} userID={userID} {...rest} />;\n};\n\nexport default DisplayUserPost;\n","import React, { useEffect } from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport CreatePost from \"./CreatePost\";\nimport MiniPhotos from \"./MiniPhotos\";\nimport MiniFriends from \"./MiniFriends\";\nimport DisplayUserPost from \"./DisplayUserPost\";\nimport { handleClickLink } from \"./helper\";\n\nconst Posts = (props) => {\n  const {\n    userID,\n    users,\n    currentUser,\n    isCurrentUser,\n    postsLinkRef,\n    friendsLinkRef,\n    photosLinkRef,\n    activeLink,\n    setActiveLink,\n  } = props;\n\n  const user = users.find((user) => user.userID === userID);\n\n  useEffect(() => {\n    handleClickLink(\n      { currentTarget: postsLinkRef.current },\n      activeLink,\n      setActiveLink\n    );\n  }, [activeLink, postsLinkRef, setActiveLink]);\n\n  return (\n    <Row className=\"w-100\" style={{ height: \"1000px\" }}>\n      <Col sm={5} className=\"mh-100 overflow-hidden\">\n        <MiniPhotos\n          user={user}\n          userID={userID}\n          photosLinkRef={photosLinkRef}\n          activeLink={activeLink}\n          setActiveLink={setActiveLink}\n          className=\"my-2\"\n        />\n        <MiniFriends\n          user={user}\n          userID={userID}\n          users={users}\n          friendsLinkRef={friendsLinkRef}\n          activeLink={activeLink}\n          setActiveLink={setActiveLink}\n          className=\"my-2\"\n        />\n      </Col>\n      <Col sm={7} className=\"mh-100 overflow-auto hide-scrollbar bg-200\">\n        <CreatePost\n          user={currentUser}\n          userID={currentUser.userID}\n          firstname={user.firstname}\n          isCurrentUser={isCurrentUser}\n          className=\"mt-2\"\n        />\n        {user.posts.map((postID, index) => {\n          return (\n            <DisplayUserPost\n              key={index}\n              postID={postID}\n              userID={userID}\n              users={users}\n              className=\"mx-auto my-2\"\n            />\n          );\n        })}\n      </Col>\n    </Row>\n  );\n};\n\nexport default Posts;\n","import React from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport Photos from \"./Photos\";\nimport Friends from \"./Friends\";\nimport Posts from \"./Posts\";\n\nconst NestedRoute = (props) => {\n  const { itemId } = useParams();\n\n  const {\n    photos,\n    userID,\n    openFileInput,\n    users,\n    isCurrentUser,\n    photosLinkRef,\n    friendsLinkRef,\n    postsLinkRef,\n    activeLink,\n    setActiveLink,\n  } = props;\n\n  if (itemId === \"Photos\")\n    return (\n      <Photos\n        photos={photos}\n        userID={userID}\n        //the rendering of the component changes the activeLink\n        openFileInput={openFileInput}\n        isCurrentUser={isCurrentUser}\n        photosLinkRef={photosLinkRef}\n        activeLink={activeLink}\n        setActiveLink={setActiveLink}\n      />\n    );\n  if (itemId === \"Friends\")\n    return (\n      <Friends\n        users={users}\n        //the rendering of the component changes the activeLink\n        friendsLinkRef={friendsLinkRef}\n        activeLink={activeLink}\n        setActiveLink={setActiveLink}\n      />\n    );\n  else\n    return (\n      <Posts\n        userID={userID}\n        users={users}\n        currentUser={users.find((user) => user.userID === userID)}\n        isCurrentUser={isCurrentUser}\n        //the rendering of the component changes the activeLink\n        photosLinkRef={photosLinkRef}\n        friendsLinkRef={friendsLinkRef}\n        postsLinkRef={postsLinkRef}\n        activeLink={activeLink}\n        setActiveLink={setActiveLink}\n      ></Posts>\n    );\n};\n\nexport default NestedRoute;\n","import React from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\n\nconst RemoveCoverPhotoDlg = (props) => {\n  const { show, removeCoverPhoto, closeDlg } = props;\n\n  return (\n    <Modal show={show} onHide={closeDlg}>\n      <Modal.Header closeButton>\n        <Modal.Title>\n          <strong className=\"fs-2\">Remove Cover Photo</strong>\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div>Do you really want to remove the cover photo?</div>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button\n          variant=\"link\"\n          style={{ textDecoration: \"none\" }}\n          onClick={closeDlg}\n        >\n          <b>Cancel</b>\n        </Button>\n        <Button variant=\"primary\" onClick={removeCoverPhoto}>\n          <b>Submit</b>\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nexport default RemoveCoverPhotoDlg;\n","import React from \"react\";\nimport { Modal } from \"react-bootstrap\";\nimport { StorageImage } from \"reactfire\";\n\nconst SelectBgPhotoModal = (props) => {\n  const { show, onHide, onPhotoClick, userID, photos } = props;\n\n  return (\n    <Modal show={show} onHide={onHide} scrollable>\n      <Modal.Header closeButton>\n        <Modal.Title style={{ marginLeft: \"35%\" }}>\n          <strong>Select Photo</strong>\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        {photos.map((photo, index) => {\n          return (\n            <StorageImage\n              className=\"m-1\"\n              width=\"31%\"\n              height=\"90px\"\n              alt=\"\"\n              key={index}\n              id={index}\n              storagePath={`/${userID}/${photo.fileName}`}\n              style={{\n                objectFit: \"cover\",\n              }}\n              onClick={onPhotoClick}\n            ></StorageImage>\n          );\n        })}\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default SelectBgPhotoModal;\n","import React from \"react\";\nimport { Modal, Button, Row } from \"react-bootstrap\";\nimport ResponsiveImage from \"./ResponsiveImage\";\n\nconst UpdateProfilePicModal = (props) => {\n  const { show, onHide, onBtnClick, onPhotoClick, userID, photos } = props;\n\n  return (\n    <Modal show={show} onHide={onHide} size=\"lg\" scrollable>\n      <Modal.Header closeButton>\n        <Modal.Title style={{ margin: \"auto\" }}>\n          <strong>Update Profile Picture</strong>\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <Button\n          size=\"sm\"\n          variant=\"outline-primary\"\n          className=\"w-50 m-2 mb-3\"\n          onClick={onBtnClick}\n        >\n          <b>+ Upload Photo</b>\n        </Button>\n        <br />\n        <b>Suggested Photos</b>\n        <Row className=\"m-1\">\n          {photos.map((photo, index) => {\n            return (\n              <ResponsiveImage\n                key={index}\n                width=\"15%\"\n                height=\"15%\"\n                userID={userID}\n                photo={photo}\n                index={index}\n                onClick={onPhotoClick}\n                className=\"m-1\"\n              />\n            );\n          })}\n        </Row>\n      </Modal.Body>\n    </Modal>\n  );\n};\n\nexport default UpdateProfilePicModal;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { useFirestore, StorageImage } from \"reactfire\";\nimport {\n  Row,\n  Col,\n  DropdownButton,\n  Dropdown,\n  Button,\n  Nav,\n  Navbar,\n} from \"react-bootstrap\";\nimport {\n  Link,\n  Switch,\n  Route,\n  useRouteMatch,\n  useParams,\n} from \"react-router-dom\";\nimport { MdPhotoCamera } from \"react-icons/md\";\nimport { IoTrashOutline } from \"react-icons/io5\";\nimport { ImUpload2 } from \"react-icons/im\";\nimport { HiOutlinePhotograph } from \"react-icons/hi\";\nimport CircularImage from \"./CircularImage\";\nimport NestedRoute from \"./NestedRoute\";\nimport RemoveCoverPhotoDlg from \"./RemoveCoverPhotoDlg\";\nimport SelectBgPhotoModal from \"./SelectBgPhotoModal\";\nimport UpdateProfilePicModal from \"./UpdateProfilePicModal\";\nimport UploadPhoto from \"./UploadPhoto\";\nimport Posts from \"./Posts\";\nimport \"./Profile.css\";\nimport { handleClickLink } from \"./helper\";\n\nconst Profile = (props) => {\n  const { userName } = useParams();\n\n  const {\n    users,\n    userID,\n    linkRef,\n    activeMainLink,\n    setActiveMainLink,\n    dimension,\n  } = props;\n\n  const SM_WINDOW = 640;\n\n  const user = () => {\n    const userNames = users.map((user) => {\n      if (!user.index || user.index === 0)\n        return `${user.lastname}.${user.firstname}`;\n      else return `${user.lastname}.${user.firstname}.${user.index}`;\n    });\n    const index = userNames.indexOf(userName);\n    const user = users[index];\n    return user;\n  };\n\n  const userId = () => user().userID;\n\n  const isCurrentUser = userID === userId();\n\n  let { firstname, lastname, profilePictureURL, backgroundPictureURL, photos } =\n    user();\n\n  const profileRef = useFirestore().collection(\"users\").doc(userId());\n\n  const [showRemoveCoverPhotoDlg, setShowRemoveCoverPhotoDlg] = useState(false);\n\n  const [showSelectPhoto, setShowSelectPhoto] = useState(false);\n\n  const [showUpdateProfilePic, setShowUpdateProfilePic] = useState(false);\n\n  const [showUploadPhotoDlg, setShowUploadPhotoDlg] = useState(false);\n\n  const [nameOfURL, setNameOfURL] = useState(\"backgroundPictureURL\");\n\n  const [activeLink, setActiveLink] = useState(null);\n\n  //we need the refs to handle the activeLink changes\n  const photosLinkRef = useRef(null);\n  const friendsLinkRef = useRef(null);\n  const postsLinkRef = useRef(null);\n\n  const { url, path } = useRouteMatch();\n\n  function openFileInput(nameOfURL) {\n    setNameOfURL(nameOfURL);\n    setShowUploadPhotoDlg(true);\n  }\n\n  function handleSelect(key) {\n    switch (key) {\n      case \"3\":\n        setShowRemoveCoverPhotoDlg(true);\n        break;\n      case \"2\":\n        openFileInput(\"backgroundPictureURL\");\n        break;\n      case \"1\":\n        setShowSelectPhoto(true);\n        break;\n      default:\n        return;\n    }\n  }\n\n  function closeDlg() {\n    setShowRemoveCoverPhotoDlg(false);\n  }\n\n  function removeCoverPhoto() {\n    closeDlg();\n    return profileRef.update({ backgroundPictureURL: \"background-server.jpg\" });\n  }\n\n  function hideBgPhotoModal() {\n    setShowSelectPhoto(false);\n  }\n\n  function handleBgPhotoClick(event) {\n    hideBgPhotoModal();\n    handlePhotoClick(event, \"backgroundPictureURL\");\n  }\n\n  function hideProfilePicModal() {\n    setShowUpdateProfilePic(false);\n  }\n\n  function handleUploadProfilePicClick() {\n    hideProfilePicModal();\n    openFileInput(\"profilePictureURL\");\n  }\n\n  function handleProfilePicClick(event) {\n    hideProfilePicModal();\n    handlePhotoClick(event, \"profilePictureURL\");\n  }\n\n  function updatePhotos(file) {\n    const newPhoto = { fileName: file.name };\n    const filenames = photos.map((photo) => photo.fileName);\n    if (filenames.indexOf(file.name) === -1) {\n      photos.push(newPhoto);\n    }\n    const newProfile = { photos: photos };\n    if (nameOfURL !== \"\") newProfile[nameOfURL] = `${userID}/${file.name}`;\n    return profileRef.update(newProfile);\n  }\n\n  function handlePhotoClick(e, name) {\n    const index = Number(e.target.id);\n    const photo = photos[index];\n    const storagePath = `${userID}/${photo.fileName}`;\n    return profileRef.update({ [name]: storagePath });\n  }\n\n  useEffect(() => {\n    //we set the active link to the profile link when it renders\n    handleClickLink(\n      { currentTarget: linkRef.current },\n      activeMainLink,\n      setActiveMainLink\n    );\n  }, [linkRef, activeMainLink, setActiveMainLink]);\n\n  return (\n    <>\n      <Row className=\"justify-content-center grad\">\n        <Col className=\"m-0 p-0 profile-col\">\n          <div className=\"background-pic-container\">\n            <StorageImage\n              className=\"background-pic\"\n              storagePath={backgroundPictureURL}\n              alt=\"\"\n            />\n            {isCurrentUser && (\n              <DropdownButton\n                variant=\"light\"\n                className=\"background-pic-button\"\n                title={\n                  <b>\n                    <MdPhotoCamera className=\"mr-1\" size=\"20px\" />\n                    {dimension.width > SM_WINDOW ? \"Edit Cover Photo\" : \"\"}\n                  </b>\n                }\n                size=\"sm\"\n              >\n                <Dropdown.Item eventKey=\"1\" onSelect={handleSelect}>\n                  <HiOutlinePhotograph size=\"20px\" className=\"mr-2\" />\n                  Select Photo\n                </Dropdown.Item>\n                <Dropdown.Item eventKey=\"2\" onSelect={handleSelect}>\n                  <ImUpload2 size=\"20px\" className=\"mr-2\" />\n                  Upload Photo\n                </Dropdown.Item>\n                <Dropdown.Divider />\n                <Dropdown.Item eventKey=\"3\" onSelect={handleSelect}>\n                  <IoTrashOutline size=\"20px\" className=\"mr-2\" /> Remove\n                </Dropdown.Item>\n              </DropdownButton>\n            )}\n            <div className=\"profile-pic-container\">\n              <CircularImage size=\"180\" url={profilePictureURL} />\n              {isCurrentUser && (\n                <Button\n                  variant=\"light\"\n                  className=\"profile-pic-button\"\n                  onClick={() => setShowUpdateProfilePic(true)}\n                >\n                  <MdPhotoCamera size=\"19px\" />\n                </Button>\n              )}\n            </div>\n          </div>\n          <h2 className=\"text-center mt-5\">\n            <b>\n              {firstname} {lastname}\n            </b>\n          </h2>\n          <hr></hr>\n          <Navbar bg=\"light\">\n            <Nav>\n              <Nav.Item>\n                <Link\n                  key=\"1\"\n                  to={`${url}/Posts`}\n                  className=\"nav-link mx-2\"\n                  ref={postsLinkRef}\n                >\n                  <b>Posts</b>\n                </Link>\n              </Nav.Item>\n              <Nav.Item>\n                <Link\n                  key=\"2\"\n                  to={`${url}/Friends`}\n                  className=\"nav-link mx-2\"\n                  ref={friendsLinkRef}\n                >\n                  <b>Friends</b> {users.length}\n                </Link>\n              </Nav.Item>\n              <Nav.Item>\n                <Link\n                  key=\"3\"\n                  to={`${url}/Photos`}\n                  className=\"nav-link mx-2\"\n                  ref={photosLinkRef}\n                >\n                  <b>Photos</b>\n                </Link>\n              </Nav.Item>\n            </Nav>\n          </Navbar>\n        </Col>\n      </Row>\n      <Row className=\"justify-content-center\">\n        <Col className=\"profile-col\">\n          <Switch>\n            <Route path={`${path}/:itemId`}>\n              <NestedRoute\n                photos={photos}\n                userID={userId()}\n                users={users}\n                openFileInput={() => openFileInput(\"\")}\n                isCurrentUser={isCurrentUser}\n                //we only need the rest to handle the changes of the activeLink\n                photosLinkRef={photosLinkRef}\n                friendsLinkRef={friendsLinkRef}\n                postsLinkRef={postsLinkRef}\n                activeLink={activeLink}\n                setActiveLink={setActiveLink}\n              />\n            </Route>\n            <Route path={path}>\n              <Posts\n                userID={userId()}\n                users={users}\n                currentUser={users.find((user) => user.userID === userID)}\n                isCurrentUser={isCurrentUser}\n                //we only need the rest to handle the changes of the activeLink\n                photosLinkRef={photosLinkRef}\n                friendsLinkRef={friendsLinkRef}\n                postsLinkRef={postsLinkRef}\n                activeLink={activeLink}\n                setActiveLink={setActiveLink}\n              />\n            </Route>\n          </Switch>\n        </Col>\n      </Row>\n\n      <RemoveCoverPhotoDlg\n        show={showRemoveCoverPhotoDlg}\n        removeCoverPhoto={removeCoverPhoto}\n        closeDlg={closeDlg}\n      />\n\n      <SelectBgPhotoModal\n        show={showSelectPhoto}\n        onHide={hideBgPhotoModal}\n        onPhotoClick={handleBgPhotoClick}\n        userID={userID}\n        photos={photos}\n      />\n\n      <UpdateProfilePicModal\n        show={showUpdateProfilePic}\n        onHide={hideProfilePicModal}\n        onBtnClick={handleUploadProfilePicClick}\n        onPhotoClick={handleProfilePicClick}\n        userID={userID}\n        photos={photos}\n      />\n\n      <UploadPhoto\n        show={showUploadPhotoDlg}\n        setShow={setShowUploadPhotoDlg}\n        updateDatabase={updatePhotos}\n        userID={userID}\n      />\n    </>\n  );\n};\n\nexport default Profile;\n","import React, { useState, useEffect } from \"react\";\nimport { useFirestore, useFirestoreDocData, StorageImage } from \"reactfire\";\nimport { Row, Col, Carousel } from \"react-bootstrap\";\nimport { useHistory, useParams, useLocation } from \"react-router-dom\";\n\nconst PhotoViewer = () => {\n  const { userID, n } = useParams();\n\n  const profileRef = useFirestore().collection(\"users\").doc(userID);\n  let result = useFirestoreDocData(profileRef, { initialData: { photos: [] } });\n\n  let { photos } = result.data;\n\n  const [activeIndex, setActiveIndex] = useState(Number(n));\n\n  const history = useHistory();\n\n  const location = useLocation();\n\n  useEffect(() => {\n    const locArr = location.pathname.split(\"/\");\n    const index = Number(locArr.pop());\n    setActiveIndex(index);\n  }, [location]);\n\n  const handleSelect = (selectedIndex, e) => {\n    history.push(`/fakebook/photo/${userID}/${selectedIndex}`);\n  };\n\n  return (\n    <Row\n      className=\"bg-200\"\n      style={{\n        position: \"relative\",\n        top: \"50px\",\n        height: \"89vh\",\n      }}\n    >\n      <Col md={9} className=\"h-100\" style={{ backgroundColor: \"black\" }}>\n        <Carousel\n          className=\"w-100 h-100\"\n          interval={null}\n          indicators={false}\n          activeIndex={activeIndex}\n          onSelect={handleSelect}\n        >\n          {photos.map((photo, index) => {\n            return (\n              <Carousel.Item\n                key={index}\n                style={{\n                  width: \"100%\",\n                  height: \"89vh\",\n                }}\n              >\n                <StorageImage\n                  storagePath={`/${userID}/${photo.fileName}`}\n                  alt=\"\"\n                  style={{\n                    position: \"absolute\",\n                    top: \"50%\",\n                    left: \"50%\",\n                    transform: \"translate(-50%, -50%)\",\n                    width: \"100%\",\n                    maxWidth: \"600px\",\n                    height: \"100%\",\n                    objectFit: \"contain\",\n                  }}\n                ></StorageImage>\n              </Carousel.Item>\n            );\n          })}\n        </Carousel>\n      </Col>\n      <Col></Col>\n    </Row>\n  );\n};\n\nexport default PhotoViewer;\n","import React from \"react\";\nimport CreatePost from \"./CreatePost\";\nimport DisplayPost from \"./DisplayPost\";\n\nconst PostView = (props) => {\n  const { user, userID, posts, users } = props;\n\n  return (\n    <>\n      <CreatePost\n        user={user}\n        userID={userID}\n        isCurrentUser={true}\n        className=\"mw-100 m-auto p-0\"\n        style={{ width: \"450px\" }}\n      />\n      {posts.map((post, index) => {\n        return (\n          <DisplayPost\n            key={index}\n            post={post}\n            postID={post.postID}\n            users={users}\n            userID={userID}\n            className=\"mw-100 mx-auto my-2\"\n            style={{ width: \"450px\" }}\n          />\n        );\n      })}\n    </>\n  );\n};\n\nexport default PostView;\n","import React from \"react\";\nimport { Nav } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport ProfileLink from \"./ProfileLink\";\nimport { FaUserFriends } from \"react-icons/fa\";\nimport { MdOndemandVideo } from \"react-icons/md\";\nimport \"./LeftNavbar.css\";\n\nconst LeftNavbar = (props) => {\n  return (\n    <Nav className=\"flex-column mt-3\" id=\"left-navbar\">\n      <div className=\"navitem\">\n        <Nav.Link\n          as={Link}\n          to={props.profileLink}\n          className=\"text-dark flex-column justify-content-center\"\n        >\n          <ProfileLink user={props.user} size=\"26\" fullname=\"true\" />\n        </Nav.Link>\n      </div>\n      <div className=\"navitem\">\n        <Nav.Link as={Link} to=\"/fakebook/friends/list\" className=\"text-dark\">\n          <FaUserFriends size=\"26px\" className=\"text-info mr-2\" />\n          <div className=\"d-inline\">Friends</div>\n        </Nav.Link>\n      </div>\n      <div className=\"navitem\">\n        <Nav.Link as={Link} to=\"/fakebook/watch\" className=\"text-dark\">\n          <MdOndemandVideo size=\"26px\" className=\"text-info mr-2\" />\n          <div className=\"d-inline\">Watch</div>\n        </Nav.Link>\n      </div>\n    </Nav>\n  );\n};\n\nexport default LeftNavbar;\n","import React from \"react\";\nimport DisplayPost from \"./DisplayPost\";\n\nconst VideoView = (props) => {\n  const { posts, users, userID } = props;\n\n  const videos = posts.filter((post) => post.isYoutube);\n\n  return (\n    <>\n      {videos.map((video, index) => (\n        <DisplayPost\n          key={index}\n          post={video}\n          postID={video.postID}\n          users={users}\n          userID={userID}\n          className=\"mw-100 mx-auto my-2\"\n          style={{ width: \"550px\" }}\n        />\n      ))}\n    </>\n  );\n};\n\nexport default VideoView;\n","import React from \"react\";\nimport { Row } from \"react-bootstrap\";\nimport { StorageImage } from \"reactfire\";\n\nconst Message = (props) => {\n  const { message, userID, ...rest } = props;\n\n  const senderStyle = {\n    width: \"75%\",\n    backgroundColor: \"dodgerblue\",\n    color: \"white\",\n    padding: \"16px\",\n    borderRadius: \"16px\",\n  };\n\n  const receiverStyle = {\n    width: \"75%\",\n    backgroundColor: \"lightgray\",\n    color: \"black\",\n    padding: \"16px\",\n    borderRadius: \"16px\",\n  };\n\n  return (\n    <Row\n      {...rest}\n      className={\n        message.sender === userID\n          ? \"justify-content-end\"\n          : \"justify-content-start\"\n      }\n    >\n      <div\n        style={{\n          fontSize: \"12px\",\n          margin: \"auto\",\n        }}\n      >\n        {message.timestamp && message.timestamp.toDate().toLocaleString()}\n      </div>\n      {message.isPhoto && (\n        <div className=\"w-100 p-3\">\n          <StorageImage\n            alt=\"\"\n            storagePath={message.photoURL}\n            style={{\n              display: \"block\",\n              width: \"50%\",\n              margin: \"auto\",\n            }}\n          />\n        </div>\n      )}\n      <p style={message.sender === userID ? senderStyle : receiverStyle}>\n        {message.text}\n      </p>\n    </Row>\n  );\n};\n\nexport default Message;\n","import React from \"react\";\nimport { Col } from \"react-bootstrap\";\nimport Message from \"./Message\";\n\nconst DisplayConversation = (props) => {\n  const { conversation, userID } = props;\n\n  return (\n    <Col>\n      {conversation.map((msg, index) => (\n        <Message key={index} message={msg} userID={userID} />\n      ))}\n    </Col>\n  );\n};\n\nexport default DisplayConversation;\n","import React, { useEffect, useState } from \"react\";\nimport { useFirestore, useFirestoreCollectionData } from \"reactfire\";\nimport DisplayConversation from \"./DisplayConversation\";\n\nconst Conversation = (props) => {\n  const { sender, recipient } = props;\n\n  const [conversation, setConversation] = useState([]);\n\n  const firestore = useFirestore();\n  const messagesRef = firestore.collection(\"messages\");\n\n  const { status: statusOut, data: outgoing } = useFirestoreCollectionData(\n    messagesRef\n      .where(\"sender\", \"==\", sender)\n      .where(\"recipient\", \"==\", recipient)\n      .orderBy(\"timestamp\"),\n    { idField: \"messageID\" }\n  );\n\n  const { status: statusIn, data: incoming } = useFirestoreCollectionData(\n    messagesRef\n      .where(\"sender\", \"==\", recipient)\n      .where(\"recipient\", \"==\", sender)\n      .orderBy(\"timestamp\"),\n    { idField: \"messageID\" }\n  );\n\n  function getConversation(incoming, outgoing) {\n    const conversation = [...incoming, ...outgoing];\n    //When new message sent, it appears with timestamp null.\n    //It needs to be removed and added to the end after sorting the messages in the oreder of timestamps.\n    let indexOfNewMsg = -1;\n    conversation.forEach((msg, index) => {\n      if (!msg.timestamp) indexOfNewMsg = index;\n    });\n    let faultyMessages;\n    if (indexOfNewMsg !== -1)\n      faultyMessages = conversation.splice(indexOfNewMsg, 1);\n    const sorted = conversation.sort(\n      (msgA, msgB) => msgA.timestamp.toDate() - msgB.timestamp.toDate()\n    );\n    if (faultyMessages) sorted.push(faultyMessages[0]);\n    return sorted;\n  }\n\n  useEffect(() => {\n    if (statusOut === \"success\" && statusIn === \"success\") {\n      setConversation(getConversation(incoming, outgoing));\n    }\n  }, [statusOut, statusIn, incoming, outgoing]);\n\n  return <DisplayConversation conversation={conversation} userID={sender} />;\n};\n\nexport default Conversation;\n","import React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport {\n  Card,\n  CloseButton,\n  Nav,\n  OverlayTrigger,\n  Button,\n  Col,\n  Row,\n} from \"react-bootstrap\";\nimport {\n  StorageImage,\n  useStorage,\n  useFirestore,\n  useFirestoreCollectionData,\n} from \"reactfire\";\nimport ProfileLink from \"./ProfileLink\";\nimport { FiEdit } from \"react-icons/fi\";\nimport { HiOutlinePhotograph } from \"react-icons/hi\";\nimport { MdSend } from \"react-icons/md\";\nimport StyledTextarea from \"./StyledTextarea\";\nimport UploadPhoto from \"./UploadPhoto\";\nimport Conversation from \"./Conversation\";\nimport {\n  addPhoto,\n  handleTextareaChange,\n  delPhoto,\n  handleKeyPress,\n} from \"./helper\";\nimport * as fb from \"firebase\"; //this is only needed, because we want to use server timestamps\nimport \"./Contacts.css\";\n\nconst Contacts = (props) => {\n  const [showOverlay, setShowOverlay] = useState(false);\n  const [recipient, setRecipient] = useState(null);\n  const [showPhotoDlg, setShowPhotoDlg] = useState(null);\n\n  const { user, userID, users } = props;\n\n  const WELCOME_TEXT = \"Aa\";\n  const INIT_MESSAGE = {\n    sender: `${userID}`,\n    recipient: \"\",\n    text: \"\",\n    isPhoto: false,\n    photoURL: \"\",\n    isRead: false,\n  };\n  const [message, setMessage] = useState(INIT_MESSAGE);\n\n  function handleClick(user) {\n    if (!user && recipient) return;\n    if (recipient && user.userID !== recipient.userID) return;\n    setShowOverlay(true);\n    let id;\n    if (user) id = user.userID;\n    else id = \"\";\n    const newMessage = { ...message };\n    newMessage.recipient = id;\n    setMessage(newMessage);\n    setRecipient(user);\n  }\n\n  const handleClickCallback = useCallback(handleClick, [user]);\n\n  function handleClose() {\n    updateReadStatusOfMessages(recipient);\n    removeSender();\n    setShowOverlay(false);\n    setRecipient(null);\n  }\n\n  function handleChange(e) {\n    handleTextareaChange({\n      e: e,\n      state: message,\n      setState: setMessage,\n    });\n  }\n\n  function addPhotoToMessage(file) {\n    addPhoto({\n      state: message,\n      setState: setMessage,\n      file: file,\n      userID: userID,\n    });\n  }\n\n  const storage = useStorage();\n\n  function deletePhoto() {\n    delPhoto({\n      state: message,\n      setState: setMessage,\n      user: user,\n      userID: userID,\n      storage: storage,\n    });\n  }\n\n  const convRowRef = useRef(null);\n  const [scrollHeight, setScrollHeight] = useState(\"\");\n\n  function saveMessage() {\n    uploadMessage(message);\n  }\n\n  useEffect(() => {\n    if (convRowRef.current) convRowRef.current.scrollTop = scrollHeight;\n  }, [scrollHeight]);\n\n  const firestore = useFirestore();\n\n  function uploadMessage(msg) {\n    const refMessages = firestore.collection(\"messages\");\n    refMessages\n      .add({\n        ...msg,\n        timestamp: fb.default.firestore.FieldValue.serverTimestamp(),\n      })\n      .then(() => {\n        setMessage(INIT_MESSAGE);\n        setScrollHeight(convRowRef.current.scrollHeight);\n      });\n  }\n\n  const [senders, setSenders] = useState([]);\n\n  const messagesRef = firestore.collection(\"messages\");\n\n  const { status, data: unread } = useFirestoreCollectionData(\n    messagesRef.where(\"recipient\", \"==\", userID).where(\"isRead\", \"==\", false),\n    { idField: \"messageID\" }\n  );\n\n  useEffect(() => {\n    if (status === \"success\") {\n      const sendersWithUnreadMsg = [];\n      unread.forEach((msg) => {\n        const sender = msg.sender;\n        if (sendersWithUnreadMsg.indexOf(sender) === -1)\n          sendersWithUnreadMsg.push(sender);\n      });\n      setSenders(sendersWithUnreadMsg);\n    }\n  }, [status, unread]);\n\n  useEffect(() => {\n    if (senders.length === 0) return;\n    const last = senders.length - 1;\n    const sender = senders[last];\n    handleClickCallback(users.find((usr) => usr.userID === sender));\n  }, [senders, users, handleClickCallback]);\n\n  function updateReadStatusOfMessages(sender) {\n    const messagesToUpdate = unread.filter(\n      (msg) => msg.sender === sender.userID\n    );\n    messagesToUpdate.forEach((msg) => {\n      const messageID = msg.messageID;\n      messagesRef.doc(messageID).update({ isRead: true });\n    });\n  }\n\n  function removeSender() {\n    const newSenders = [...senders];\n    newSenders.pop();\n    setSenders(newSenders);\n  }\n\n  //We open the overlay card programmatically again, otherwise the user is unable to send\n  //more than one message.\n  if (recipient)\n    if (showOverlay && message.recipient === \"\")\n      //We only do this if we set back the INIT_MESSAGE after previous message had sent.\n      handleClick(recipient);\n  return (\n    <>\n      <Nav className=\"flex-column\">\n        <h5 className=\"text-muted ml-3\">\n          <b>Contacts</b>\n        </h5>\n        {users.map((user, index) =>\n          user.userID === userID ? (\n            <div key={index}></div>\n          ) : (\n            <div\n              key={index}\n              className=\"navitem text-dark flex-row justify-content-center p-2\"\n              onClick={() => handleClick(user)}\n            >\n              <ProfileLink size=\"26\" fullname=\"true\" bold=\"false\" user={user} />\n            </div>\n          )\n        )}\n      </Nav>\n\n      <OverlayTrigger\n        placement=\"left-start\"\n        show={showOverlay}\n        overlay={\n          <Card\n            style={{\n              width: \"350px\",\n              height: \"450px\",\n              background: \"white\",\n              fontSize: \"1.2rem\",\n              maxHeight: `${window.innerHeight - 70}px`,\n            }}\n          >\n            <Card.Body className=\"overflow-none\">\n              <Card.Title>\n                {!recipient && (\n                  <>\n                    <h6>New Message</h6>\n                    <h6>To:</h6>\n                  </>\n                )}\n                {recipient && (\n                  <ProfileLink\n                    size=\"26\"\n                    fullname=\"true\"\n                    bold=\"true\"\n                    user={recipient}\n                  />\n                )}\n                <div id=\"close-btn-container\">\n                  <CloseButton onClick={handleClose} className=\"text-primary\" />\n                </div>\n              </Card.Title>\n              <hr />\n              {recipient && (\n                <Row\n                  className=\"mh-100 overflow-auto flex-column-reverse\"\n                  ref={convRowRef}\n                >\n                  <Conversation sender={userID} recipient={recipient.userID} />\n                </Row>\n              )}\n              {!recipient && (\n                <Col className=\"h-75 overflow-auto\">\n                  {users.map((user, index) =>\n                    user.userID === userID ? (\n                      <div key={index}></div>\n                    ) : (\n                      <Row\n                        key={index}\n                        className=\"text-dark justify-content-start p-2 container-choose-to\"\n                        onClick={() => handleClick(user)}\n                      >\n                        <ProfileLink\n                          size=\"36\"\n                          fullname=\"true\"\n                          bold=\"false\"\n                          user={user}\n                        />\n                      </Row>\n                    )\n                  )}\n                </Col>\n              )}\n            </Card.Body>\n            {recipient && (\n              <Card.Footer className=\"mt-5\">\n                <Row>\n                  {message.text === \"\" && (\n                    <Col xs={2}>\n                      <Button\n                        variant=\"light\"\n                        size=\"sm\"\n                        id=\"add-photo-btn\"\n                        onClick={() => setShowPhotoDlg(true)}\n                      >\n                        <HiOutlinePhotograph\n                          size=\"21px\"\n                          className=\"text-primary\"\n                        />\n                      </Button>\n                    </Col>\n                  )}\n                  <Col\n                    xs={message.text === \"\" ? 8 : 10}\n                    className=\"align-self-center\"\n                    style={{\n                      background: \"#e9ecef\",\n                      borderRadius: \"18px\",\n                    }}\n                  >\n                    {message.isPhoto && (\n                      <div id=\"comment-img-container\">\n                        <StorageImage\n                          alt=\"\"\n                          storagePath={`/${message.photoURL}`}\n                          id=\"img-to-comment\"\n                        />\n                        <div id=\"close-btn-container\">\n                          <CloseButton onClick={deletePhoto} />\n                        </div>\n                      </div>\n                    )}\n                    <StyledTextarea\n                      onChange={handleChange}\n                      onKeyPress={(e) => handleKeyPress(e, saveMessage)}\n                      welcomeText={WELCOME_TEXT}\n                      value={message.text}\n                      className=\"w-100 mt-2\"\n                    />\n                  </Col>\n                  <Col xs={2}>\n                    <Button\n                      variant=\"light\"\n                      size=\"sm\"\n                      id=\"add-photo-btn\"\n                      onClick={() => {\n                        if (message.text !== \"\" || message.isPhoto)\n                          saveMessage();\n                      }}\n                    >\n                      <MdSend size=\"23px\" className=\"text-primary\" />\n                    </Button>\n                  </Col>\n                </Row>\n              </Card.Footer>\n            )}\n\n            <UploadPhoto\n              show={showPhotoDlg}\n              setShow={setShowPhotoDlg}\n              updateDatabase={addPhotoToMessage}\n              userID={userID}\n            />\n          </Card>\n        }\n      >\n        <div\n          style={{\n            position: \"fixed\",\n            background: \"white\",\n            padding: \"12px\",\n            borderRadius: \"50%\",\n            bottom: \"20px\",\n            right: \"26px\",\n            boxShadow: \"0px 5px 5px 0px lightgray\",\n          }}\n          onClick={() => handleClick(null)}\n        >\n          <FiEdit size=\"22px\" />\n        </div>\n      </OverlayTrigger>\n    </>\n  );\n};\n\nexport default Contacts;\n","import React, { useEffect } from \"react\";\nimport { Row, Col } from \"react-bootstrap\";\nimport { useFirestore, useFirestoreCollectionData } from \"reactfire\";\nimport PostView from \"./PostView\";\nimport LeftNavbar from \"./LeftNavbar\";\nimport VideoView from \"./VideoView\";\nimport Contacts from \"./Contacts\";\nimport \"./HomePage.css\";\nimport { handleClickLink } from \"./helper\";\n\nconst HomePage = (props) => {\n  const LG_WINDOW = 992;\n  const SM_WINDOW = 640;\n\n  const {\n    dimension,\n    user,\n    userID,\n    users,\n    profileLink,\n    className,\n    isWatch,\n    linkRef,\n    activeLink,\n    setActiveLink,\n  } = props;\n\n  const firestore = useFirestore();\n  const postsRef = firestore.collection(\"posts\");\n\n  const { status, data: posts } = useFirestoreCollectionData(\n    postsRef.orderBy(\"timestamp\", \"desc\"),\n    { idField: \"postID\" }\n  );\n\n  //we set the active link to the home link when it renders\n  useEffect(() => {\n    handleClickLink(\n      { currentTarget: linkRef.current },\n      activeLink,\n      setActiveLink\n    );\n  }, [isWatch, linkRef, activeLink, setActiveLink]);\n\n  if (status !== \"success\") return <div>...loading</div>;\n  else\n    return (\n      <Row className={`${className} overflow-hidden vh-100`}>\n        {dimension.width > LG_WINDOW && (\n          <Col className=\"mh-100 overflow-auto\">\n            <LeftNavbar user={user} profileLink={profileLink} />\n          </Col>\n        )}\n        <Col\n          sm={9}\n          md={isWatch ? 12 : 9}\n          lg={isWatch ? 9 : 6}\n          className=\"mh-100 overflow-auto hide-scrollbar\"\n        >\n          {!isWatch && (\n            <PostView user={user} userID={userID} posts={posts} users={users} />\n          )}\n          {isWatch && <VideoView users={users} posts={posts} userID={userID} />}\n        </Col>\n        {dimension.width > SM_WINDOW && !isWatch && (\n          <Col\n            className=\"mh-100 overflow-auto\"\n            style={{ position: \"relative\" }}\n          >\n            <Contacts users={users} user={user} userID={userID} />\n          </Col>\n        )}\n      </Row>\n    );\n};\n\nexport default HomePage;\n","import React, { useEffect } from \"react\";\nimport Profile from \"./Profile\";\nimport FriendList from \"./FriendList\";\nimport { Row, Col } from \"react-bootstrap\";\nimport { useLocation } from \"react-router-dom\";\nimport \"./FriendsListPage.css\";\nimport imgFriends from \"../images/friends.jpg\";\nimport { handleClickLink } from \"./helper\";\n\nconst FriendsListPage = (props) => {\n  const { users, user, userID, linkRef, activeLink, setActiveLink, dimension } =\n    props;\n\n  const FRIENDS_LIST_PAGE_PATH = \"/fakebook/friends/list\";\n\n  const location = useLocation();\n\n  const isNoUser = FRIENDS_LIST_PAGE_PATH === location.pathname;\n\n  //we set the active link to the friends link when it renders\n  useEffect(() => {\n    handleClickLink(\n      { currentTarget: linkRef.current },\n      activeLink,\n      setActiveLink\n    );\n  }, [activeLink, linkRef, setActiveLink]);\n\n  return (\n    <Row className=\"overflow-hidden friends-list\">\n      <FriendList users={users} />\n      <Col className=\"overflow-auto mh-100 hide-scrollbar col-two\">\n        {isNoUser ? (\n          <div className=\"h-100 w-100 d-flex flex-column align-items-center justify-content-center\">\n            <img\n              width=\"200px\"\n              src={imgFriends}\n              alt=\"cartoon of fakebook friends\"\n              className=\"p-4\"\n            />\n            <h5 className=\"text-muted\">\n              <b>Select people's names to preview their profile.</b>\n            </h5>\n          </div>\n        ) : (\n          <div className=\"profile-container\">\n            <Profile\n              user={user}\n              userID={userID}\n              users={users}\n              linkRef={linkRef}\n              activeMainLink={activeLink}\n              setActiveMainLink={setActiveLink}\n              dimension={dimension}\n            />\n          </div>\n        )}\n      </Col>\n    </Row>\n  );\n};\n\nexport default FriendsListPage;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport TitleBar from \"./Titlebar\";\nimport Profile from \"./Profile\";\nimport PhotoViewer from \"./PhotoViewer\";\nimport HomePage from \"./HomePage\";\nimport FriendsListPage from \"./FriendsListPage\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport Container from \"react-bootstrap/Container\";\nimport {\n  useFirestore,\n  useFirestoreDocData,\n  useFirestoreCollectionData,\n} from \"reactfire\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst UserAccount = (props) => {\n  const { profileLink, userID, userState } = props;\n\n  const firestore = useFirestore();\n  const usersCollection = firestore.collection(\"users\");\n\n  const userDocRef = usersCollection.doc(userID);\n  const result = useFirestoreDocData(userDocRef, {\n    initialData: {\n      firstname: \"\",\n      lastname: \"\",\n      profilePictureURL: \"fakebook-avatar.jpeg\",\n      backgroundPictureURL: \"background-server.jpg\",\n      photos: [],\n      posts: [],\n      isOnline: false,\n    },\n  });\n\n  const currentUser = result.data;\n\n  //We add the index of user to the profileLink if there are more users with the exact same userName\n  function modifyProfileLink() {\n    if (currentUser && currentUser.index && currentUser.index > 0) {\n      return `${profileLink}.${currentUser.index}`;\n    } else return profileLink;\n  }\n\n  const { status, data: users } = useFirestoreCollectionData(usersCollection, {\n    idField: \"userID\",\n  });\n\n  const isFriendsListPage = useRef(false);\n\n  function closeFriendsListPage() {\n    isFriendsListPage.current = false;\n  }\n\n  function setUserOffline(signoutFn) {\n    userDocRef.update({ isOnline: false }).then(() => signoutFn());\n  }\n\n  useEffect(() => {\n    //Update the online status if the current user does not seem to be online\n    if (!currentUser.isOnline) userDocRef.update({ isOnline: true });\n  }, [currentUser.isOnline, userDocRef]);\n\n  useEffect(() => {\n    //We add event listener for the event when the user closes the browser window\n    window.addEventListener(\"beforeunload\", (e) => {\n      //We put the user offline\n      userDocRef.update({ isOnline: false });\n    });\n    //we add event listener for the event when the browser window change visibility\n    document.addEventListener(\"visibilitychange\", (e) => {\n      if (document.visibilityState === \"visible\")\n        userDocRef.update({ isOnline: true });\n      else userDocRef.update({ isOnline: false });\n    });\n  }, [userDocRef]);\n\n  //This part is responsible for responsive behaviour only\n  const [dimension, setDimension] = useState({\n    height: window.innerHeight,\n    width: window.innerWidth,\n  });\n\n  function debounce(fn, ms) {\n    let timer;\n    return () => {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        fn();\n        clearTimeout(timer);\n      }, ms);\n    };\n  }\n\n  useEffect(() => {\n    const debouncedHandleResize = debounce(function handleResize() {\n      setDimension({\n        height: window.innerHeight,\n        width: window.innerWidth,\n      });\n    }, 100);\n\n    window.addEventListener(\"resize\", debouncedHandleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", debouncedHandleResize);\n    };\n  });\n\n  //code responsible for changing activelink with url changes\n\n  const refs = {\n    home: useRef(null),\n    friends: useRef(null),\n    watch: useRef(null),\n    profile: useRef(null),\n  };\n\n  //add the active status of the link DOM elements\n  const [activeLink, setActiveLink] = useState(null);\n\n  if (status === \"loading\" || !currentUser) {\n    return <div>...Loading</div>;\n  }\n\n  return (\n    <div className=\"bg-200 vw-100\">\n      <Container className=\"w-100 p-0\" fluid>\n        <BrowserRouter>\n          <TitleBar\n            profilelink={modifyProfileLink()}\n            user={currentUser}\n            closeFriendsListPage={closeFriendsListPage}\n            setUserOffline={setUserOffline}\n            refs={refs}\n            dimension={dimension}\n          />\n          <Switch>\n            <Route\n              path=\"/fakebook/friends/list\"\n              render={() => {\n                isFriendsListPage.current = true;\n                return (\n                  <FriendsListPage\n                    users={users}\n                    user={currentUser}\n                    userID={userID}\n                    // the components need the above props to change the active link\n                    linkRef={refs.friends}\n                    activeLink={activeLink}\n                    setActiveLink={setActiveLink}\n                  />\n                );\n              }}\n            />\n            <Route\n              path={`/fakebook/photo/:userID/:n`}\n              render={() => <PhotoViewer />}\n            />\n            <Route\n              path=\"/fakebook/watch\"\n              render={() => {\n                isFriendsListPage.current = false;\n                return (\n                  <HomePage\n                    className=\"pt-5\"\n                    profileLink={modifyProfileLink()}\n                    user={currentUser}\n                    userID={userID}\n                    users={users}\n                    dimension={dimension}\n                    isWatch={true}\n                    // the components need the above props to change the active link\n                    linkRef={refs.watch}\n                    activeLink={activeLink}\n                    setActiveLink={setActiveLink}\n                  />\n                );\n              }}\n            />\n            <Route\n              path={`/fakebook/:userName`}\n              render={() => {\n                if (isFriendsListPage.current)\n                  return (\n                    <FriendsListPage\n                      users={users}\n                      user={currentUser}\n                      userID={userID}\n                      dimension={dimension}\n                      // the components need the above props to change the active link\n                      linkRef={refs.friends}\n                      activeLink={activeLink}\n                      setActiveLink={setActiveLink}\n                    />\n                  );\n                else\n                  return (\n                    <Profile\n                      user={currentUser}\n                      userID={userID}\n                      users={users}\n                      dimension={dimension}\n                      // the components need the above props to change the active link\n                      linkRef={refs.profile}\n                      activeMainLink={activeLink}\n                      setActiveMainLink={setActiveLink}\n                    />\n                  );\n              }}\n            />\n            <Route\n              path=\"/fakebook\"\n              render={() => {\n                isFriendsListPage.current = false;\n                return (\n                  <HomePage\n                    className=\"pt-5\"\n                    profileLink={modifyProfileLink()}\n                    user={currentUser}\n                    userID={userID}\n                    users={users}\n                    dimension={dimension}\n                    isWatch={false}\n                    // the components need the above props to change the active link\n                    linkRef={refs.home}\n                    activeLink={activeLink}\n                    setActiveLink={setActiveLink}\n                  />\n                );\n              }}\n            />\n          </Switch>\n        </BrowserRouter>\n        <div>{userState.error && <h4>{userState.error}</h4>}</div>\n      </Container>\n    </div>\n  );\n};\n\nexport default UserAccount;\n","import React, { useState } from \"react\";\nimport { Form, Button, Modal, Alert } from \"react-bootstrap\";\nimport { useFirebaseApp } from \"reactfire\";\n\nconst PasswordReminder = (props) => {\n  const { onHide } = props;\n\n  const [email, setEmail] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  function handleChange(e) {\n    e.preventDefault();\n    const input = e.target;\n    setEmail(input.value);\n  }\n\n  const firebase = useFirebaseApp();\n\n  function handleClickSend() {\n    firebase\n      .auth()\n      .sendPasswordResetEmail(email)\n      .then(() => {\n        // Password reset email sent!\n        onHide();\n      })\n      .catch((error) => {\n        const errorMessage = error.message;\n        setErrorMsg(errorMessage);\n      });\n  }\n\n  return (\n    <>\n      <Modal.Body>\n        {errorMsg !== \"\" && <Alert variant=\"danger\">{errorMsg}</Alert>}\n        <Form.Group>\n          <Form.Label>\n            Please enter the email address associated to your account to receive\n            a password reset email.\n          </Form.Label>\n          <Form.Control\n            type=\"email\"\n            placeholder=\"Email\"\n            name=\"email\"\n            size=\"lg\"\n            onChange={handleChange}\n            value={email}\n          />\n        </Form.Group>\n      </Modal.Body>\n\n      <Modal.Footer>\n        <hr />\n        <Button variant=\"light\" onClick={onHide}>\n          <b>Cancel</b>\n        </Button>\n        <Button variant=\"primary\" onClick={handleClickSend}>\n          <b className=\"px-2\">Send</b>\n        </Button>\n      </Modal.Footer>\n    </>\n  );\n};\n\nexport default PasswordReminder;\n","import React, { useState, useCallback } from \"react\";\nimport \"./App.css\";\nimport Signup from \"./components/Signup\";\nimport Login from \"./components/Login\";\nimport { useSigninCheck } from \"reactfire\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport Col from \"react-bootstrap/Col\";\nimport Row from \"react-bootstrap/Row\";\nimport RecentLogins from \"./components/RecentLogins\";\nimport Button from \"react-bootstrap/Button\";\nimport Modal from \"react-bootstrap/Modal\";\nimport { useUser } from \"reactfire\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport UserAccount from \"./components/UserAccount\";\nimport PasswordReminder from \"./components/PasswordReminder\";\n\nfunction App() {\n  const { data: user } = useUser();\n\n  // User State\n  const initUser = {\n    email: \"\",\n    password: \"\",\n    error: \"\",\n  };\n\n  const [userState, setUserState] = useState(initUser);\n\n  function addError(errorMsg) {\n    setUserState({\n      ...userState,\n      error: errorMsg,\n    });\n  }\n\n  function updateUser(name, value) {\n    setUserState({\n      ...userState,\n      [name]: value,\n      error: \"\",\n    });\n  }\n\n  //Handle the modal\n  const [show, setShow] = useState(false);\n\n  function handleClose() {\n    console.log(\"modal closed\");\n    setShow(false);\n  }\n\n  function handleShow() {\n    setShow(true);\n  }\n\n  const addErrorCallback = useCallback(addError, []);\n  const handleCloseCallback = useCallback(handleClose, []);\n\n  //get the first and lastName for the route of the profile\n  const name =\n    (user && user.displayName && user.displayName.trim().split(\" \")) || [];\n\n  const lastName = name.pop();\n\n  const firstName = name.join(\" \");\n\n  const profileLink = `/fakebook/${lastName}.${firstName}`;\n\n  //handling the password reminder button\n  const [isModalSignup, setModalSignup] = useState(true);\n\n  function handleClickPasswordReminderBtn() {\n    setModalSignup(false);\n    handleShow();\n  }\n\n  const { status, data: signInCheckResult } = useSigninCheck();\n\n  if (status === \"loading\") {\n    return <div>...Loading</div>;\n  }\n\n  if (signInCheckResult.signedIn === true && !userState.error) {\n    //Reactfire is still buggy in ver 3.0.0\n    //Even if user is signed in, the useUser\n    //hook can give back null for the current\n    //user. In this case the user has no\n    //premission to read firebase and the error\n    //is not caught by reactfire. Strangely\n    //refreshing the browser solves the issue.\n    if (!user) {\n      window.location.reload(false);\n    }\n\n    if (user.emailVerified)\n      return (\n        <UserAccount\n          userID={user.uid}\n          profileLink={profileLink}\n          userState={userState}\n        />\n      );\n    else return <></>;\n  } else {\n    return (\n      <Col className=\"bg-200 vh-100\">\n        <Row className=\"h-100 align-items-center\">\n          <Col\n            lg={{ span: 5, offset: 1 }}\n            className=\"d-flex justify-content-center\"\n          >\n            <RecentLogins></RecentLogins>\n          </Col>\n          <Col lg={5} className=\"bg-200 d-flex justify-content-center\">\n            <div className=\"login p-3 bg-light\">\n              <Login\n                onError={addErrorCallback}\n                onChange={updateUser}\n                user={userState}\n                onClickForgottenPswd={handleClickPasswordReminderBtn}\n                disabled\n              ></Login>\n              <hr />\n              <Button\n                variant=\"success\"\n                size=\"lg\"\n                className=\"d-block w-60 mx-auto mt-4\"\n                onClick={handleShow}\n              >\n                <b>Create New Account</b>\n              </Button>\n            </div>\n          </Col>\n          <Modal\n            show={show}\n            onHide={handleClose}\n            onExited={() => setModalSignup(true)}\n          >\n            <Modal.Header closeButton={isModalSignup}>\n              <Modal.Title>\n                <strong className=\"fs-2\">\n                  {isModalSignup ? \"Sign Up\" : \"Password Reset Email\"}\n                </strong>\n                {isModalSignup && (\n                  <div className=\"title-footer\">It's quick and easy.</div>\n                )}\n              </Modal.Title>\n            </Modal.Header>\n\n            {isModalSignup ? (\n              <Modal.Body>\n                <Signup\n                  onError={addErrorCallback}\n                  onChange={updateUser}\n                  onSubmit={handleCloseCallback}\n                  user={userState}\n                ></Signup>\n              </Modal.Body>\n            ) : (\n              <PasswordReminder onHide={handleClose} />\n            )}\n          </Modal>\n        </Row>\n      </Col>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { FirebaseAppProvider } from \"reactfire\";\nimport firebaseConfig from \"./firebaseConfig\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <FirebaseAppProvider firebaseConfig={firebaseConfig}>\n    <App />\n  </FirebaseAppProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}