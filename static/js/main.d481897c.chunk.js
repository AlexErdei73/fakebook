(this.webpackJsonpfakebook=this.webpackJsonpfakebook||[]).push([[0],{126:function(e,t,a){e.exports=a.p+"static/media/placeholder-image.d56c1d33.jpg"},127:function(e,t,a){e.exports=a.p+"static/media/fakebook-avatar.c2424276.jpeg"},128:function(e,t,a){e.exports=a.p+"static/media/background-server.070904ee.jpg"},134:function(e,t,a){e.exports=a.p+"static/media/friends.2536911b.jpg"},139:function(e,t,a){e.exports=a(180)},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(41),l=a.n(c),o=(a(144),a(17)),i=(a(145),a(6)),s=a(25),u=a(30),m=a(99),f=a(53),d=a(57),p=a(88),b=(a(146),a(2)),E=a.n(b),h=a(34),v=a(22),g=a(4),k=a(59),x=(a(181),a(148),a(183),a(182),{apiKey:"AIzaSyA6giH2VCl9pBrO86uGH3gcwbmeM-dYMPM",authDomain:"fakebook-2df7b.firebaseapp.com",projectId:"fakebook-2df7b",storageBucket:"fakebook-2df7b.appspot.com",messagingSenderId:"1030600439600",appId:"1:1030600439600:web:98617c1d503260115cfaf5",measurementId:"G-YN35E2SN2E"}),j=a(37),O=Object(j.b)({name:"user",initialState:{id:"",isSignedIn:!1,isEmailVerified:!1,error:"",isLoading:!0},reducers:{signIn:function(e,t){e.id=t.payload.id,e.displayName=t.payload.displayName,e.isEmailVerified=t.payload.isEmailVerified,e.isSignedIn=!0},signOut:function(e){e.isSignedIn=!1},errorOccured:function(e,t){e.error=t.payload},loadingStarted:function(e){e.isLoading=!0},loadingFinished:function(e){e.isLoading=!1}}}),y=O.actions,N=y.signIn,w=y.signOut,L=y.errorOccured,P=y.loadingStarted,S=y.loadingFinished,C=O.reducer,R=Object(j.b)({name:"currentUser",initialState:{firstname:"",lastname:"",profilePictureURL:"fakebook-avatar.jpeg",backgroundPictureURL:"background-server.jpg",photos:[],posts:[],isOnline:!1},reducers:{currentUserUpdated:function(e,t){var a=t.payload,n=a.firstname,r=a.lastname,c=a.profilePictureURL,l=a.backgroundPictureURL,o=a.photos,i=a.posts,s=a.isOnline,u=a.index;e.firstname=n,e.lastname=r,e.profilePictureURL=c,e.backgroundPictureURL=l,e.isOnline=s,u&&(e.index=u),e.photos=[],e.posts=[],o.forEach((function(t){return e.photos.push(t)})),i.forEach((function(t){return e.posts.push(t)}))}}}),I=R.actions.currentUserUpdated,D=R.reducer,U=Object(j.b)({name:"users",initialState:[],reducers:{usersUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),z=U.actions.usersUpdated,F=U.reducer,A=Object(j.b)({name:"posts",initialState:[],reducers:{postsUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),T=A.actions.postsUpdated,B=A.reducer,H=Object(j.b)({name:"incomingMessages",initialState:[],reducers:{incomingMessagesUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),M=H.actions.incomingMessagesUpdated,Y=H.reducer,V=Object(j.b)({name:"outgoingMessages",initialState:[],reducers:{outgoingMessagesUpdated:function(e,t){var a=[];return t.payload.forEach((function(e){return a.push(e)})),a}}}),W=V.actions.outgoingMessagesUpdated,q=V.reducer,K=Object(j.b)({name:"images",initialState:[],reducers:{imageAdded:function(e,t){-1===e.map((function(e){return e.storagePath})).indexOf(t.payload.storagePath)&&e.push(t.payload)},imageUrlFound:function(e,t){var a=e.map((function(e){return e.storagePath})).indexOf(t.payload.storagePath);a>-1&&(e[a].url=t.payload.url)}}}),G=K.actions,J=G.imageAdded,_=G.imageUrlFound,Q=K.reducer,X=Object(j.a)({reducer:{user:C,currentUser:D,users:F,posts:B,incomingMessages:Y,outgoingMessages:q,images:Q}}),Z=["timestamp"],$={url:"https://alexerdei73.github.io/fakebook/"};k.a.initializeApp(x),k.a.appCheck().activate("6LfCG9UhAAAAAL8vSI4Hbustx8baJEDMA0Sz1zD2",!0);var ee=k.a.storage();function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(g.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ee.ref(t),e.next=3,a.getDownloadURL();case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=k.a.auth();var re,ce,le=k.a.firestore(),oe=le.collection("users");function ie(){ce.update({isOnline:!0})}function se(){return ce.update({isOnline:!1})}function ue(){return(ue=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X.dispatch(P()),e.next=3,se();case 3:return e.next=5,ne.signOut();case 5:X.dispatch(S());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){var t,a;return"incoming"===e?(t="recipient",a=M):(t="sender",a=W),le.collection("messages").where(t,"==",re).onSnapshot((function(e){var t=[];e.forEach((function(e){var a,n=e.data(),r=e.data().timestamp;a=r?r.toDate().toISOString():"",n.timestamp=a,n.id=e.id,""!==a&&t.push(n)})),X.dispatch(a(t))}))}function fe(){return(fe=Object(g.a)(E.a.mark((function e(t){var a,n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ne.createUserWithEmailAndPassword(t.email,t.password);case 3:return a=e.sent,e.next=6,a.user.updateProfile({displayName:"".concat(t.firstname," ").concat(t.lastname)});case 6:return e.next=8,le.collection("users").where("firstname","==",t.firstname).where("lastname","==",t.lastname).get();case 8:return n=e.sent,r=n.size,e.next=12,le.collection("users").doc(a.user.uid).set({firstname:t.firstname,lastname:t.lastname,profilePictureURL:"fakebook-avatar.jpeg",backgroundPictureURL:"background-server.jpg",photos:[],posts:[],isOnline:!1,index:r});case 12:return e.next=14,k.a.auth().signOut();case 14:return e.next=16,a.user.sendEmailVerification($);case 16:console.log("Verification email has been sent."),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),X.dispatch(L(e.t0.message)),console.log(e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}function de(){return(de=Object(g.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="Please verify your email before to continue",n="",e.prev=2,e.next=5,ne.signInWithEmailAndPassword(t.email,t.password);case 5:e.sent.user.emailVerified?X.dispatch(L(n)):(ne.signOut(),X.dispatch(L(a))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),X.dispatch(L(e.t0.message));case 12:return e.prev=12,X.dispatch(S()),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})))).apply(this,arguments)}function pe(){return(pe=Object(g.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=le.collection("posts"),e.next=3,a.add(Object(s.a)(Object(s.a)({},t),{},{timestamp:k.a.firestore.FieldValue.serverTimestamp()}));case 3:return n=e.sent,be(n.id),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){var t,a=X.getState().currentUser;(t=a.posts?Object(v.a)(a.posts):[]).unshift(e),ce.update({posts:t})}function Ee(e,t){var a=le.collection("posts").doc(t),n=(e.timestamp,Object(h.a)(e,Z));a.update(n)}function he(e){return console.log(ce),console.log(e),ce.update(e)}var ve=le.collection("messages");var ge=function(e){var t=e.show,a=e.onHide,c=e.onExit,l=Object(n.useState)({firstname:"",lastname:"",email:"",password:""}),b=Object(o.a)(l,2),E=b[0],h=b[1],v=function(e){return h(Object(s.a)(Object(s.a)({},E),{},Object(i.a)({},e.target.name,e.target.value)))},g=Object(n.useState)(!1),k=Object(o.a)(g,2),x=k[0],j=k[1],O=Object(n.useState)(!1),y=Object(o.a)(O,2),N=y[0],w=y[1];return Object(n.useEffect)((function(){N&&a()}),[N,a]),r.a.createElement(p.a,{show:t,onHide:a,onExited:c},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Sign Up"),r.a.createElement("div",{className:"title-footer"},"It's quick and easy."))),r.a.createElement(p.a.Body,null,r.a.createElement(u.a,{noValidate:!0,validated:x,onSubmit:function(e){e.preventDefault(),!0===e.currentTarget.checkValidity()&&(!function(e){fe.apply(this,arguments)}({firstname:E.firstname,lastname:E.lastname,email:E.email,password:E.password}),w(!0)),j(!0)}},r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"First name",name:"firstname",onChange:v,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"First name required.")),r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"Surename",name:"lastname",onChange:v,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Last name required."))),r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"email",placeholder:"Email address",name:"email",onChange:v,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Email required in the right format."))),r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Group,{as:f.a},r.a.createElement(u.a.Control,{type:"text",placeholder:"New password",name:"password",onChange:v,required:!0}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},"Password required."))),r.a.createElement(u.a.Row,null,r.a.createElement("p",{className:"text-muted p-1 text-legal"},"Signing Up for fakebook you agree to share the uploaded details with any other user. Please do not upload any sensitive data to the app, which is built strictly for demonstration purposes.")),r.a.createElement(m.a,null,r.a.createElement(d.a,{type:"submit",variant:"success",className:"w-50 mx-auto"},r.a.createElement("strong",null,"Sign Up"))))))},ke=a(20),xe=function(e){var t=e.onClickForgottenPswd,a=Object(n.useState)({email:"",password:""}),c=Object(o.a)(a,2),l=c[0],i=c[1],m=function(e){var t=Object(s.a)({},l);t[e.target.name]=e.target.value,i(t),p(L(""))},f=Object(ke.c)((function(e){return e.user.error})),p=Object(ke.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{noValidate:!0,onSubmit:function(e){e.preventDefault(),e.stopPropagation(),""!==l.email?""!==l.password?(p(P()),function(e){de.apply(this,arguments)}(l)):p(L("Password is required.")):p(L("Email is required."))},className:"w-100"},r.a.createElement(u.a.Control,{type:"email",placeholder:"Email",name:"email",size:"lg",className:"mb-2 w-100",onChange:m,isInvalid:-1!==f.indexOf("mail")||-1!==f.indexOf("identifier")}),r.a.createElement(u.a.Control,{type:"text",placeholder:"Password",name:"password",size:"lg",className:"mb-2 w-100",onChange:m,isInvalid:""!==f}),r.a.createElement(u.a.Control.Feedback,{type:"invalid"},f),r.a.createElement(d.a,{variant:"primary",type:"submit",size:"lg",className:"w-100"},r.a.createElement("b",null,"Log In"))),r.a.createElement(d.a,{variant:"link",type:"link",className:"w-100",id:"link-button",onClick:t},"Forgotten password?"))},je=(a(158),a(159),function(){return r.a.createElement("div",{className:"recent-logins"},r.a.createElement("h1",{className:"text-primary w-100"},r.a.createElement("strong",{style:{fontSize:"3.5rem"}},"fakebook")),r.a.createElement("h3",{className:"w-100"},r.a.createElement("p",null,"Fakebook helps you connect and share with the people in your life.")))}),Oe=a(204),ye=a(203),Ne=a(201),we=a(136),Le=a(23),Pe=a(129),Se=a(76),Ce=a(45),Re=a(108),Ie=(a(160),a(126)),De=a.n(Ie),Ue=a(127),ze=a.n(Ue),Fe=a(128),Ae=a.n(Fe),Te=["storagePath","alt"],Be=function(e){var t=e.storagePath,a=e.alt,c=Object(h.a)(e,Te),l=Object(ke.c)((function(e){return e.images})),i=Object(ke.b)(),s=Object(n.useState)(De.a),u=Object(o.a)(s,2),m=u[0],f=u[1];function d(e){var t=e.split(".");return t[t.length-2]+="_400x400",t.join(".")}return Object(n.useEffect)((function(){var e=!0,a=function(){return e=!1};if("fakebook-avatar.jpeg"===t)return f(ze.a),a;if("background-server.jpg"===t)return f(Ae.a),a;var n=l.map((function(e){return e.storagePath})).indexOf(t);if(-1===n)-1===(n=l.map((function(e){return e.storagePath})).indexOf(d(t)))&&i(J({storagePath:t,url:m})),te(t).then((function(e){f(e),i(_({storagePath:t,url:e}))})).catch((function(e){te(d(t)).then((function(e){f(e),i(_({storagePath:t,url:e}))}))}));else{var r=l[n].url;r!==m&&e&&f(r)}return a}),[l,t,m,i]),r.a.createElement("img",Object.assign({src:m,alt:a},c))},He=["size","url","isOnline"],Me=function(e){var t=e.size,a=e.url,n=e.isOnline,c=Object(h.a)(e,He),l=Math.floor(t/6),o=Math.floor(.8536*t-l/2);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,Object.assign({style:{width:"".concat(t,"px"),height:"".concat(t,"px"),objectFit:"cover",borderRadius:"".concat(t/2,"px"),pointerEvents:"none",position:"relative"},storagePath:a,alt:""},c)),n&&r.a.createElement("div",{className:"bg-success",style:{width:"".concat(2*l,"px"),height:"".concat(2*l,"px"),borderRadius:"50%",position:"absolute",top:"".concat(o,"px"),left:"".concat(o,"px"),border:"2px solid white"}}))},Ye=function(e){var t,a=e.size,n=e.fullname,c=e.bold,l=e.user,o=l.firstname,i=l.lastname,s=l.profilePictureURL,u=l.isOnline;return t="true"===n?"".concat(o," ").concat(i):"".concat(o),r.a.createElement(m.a,{style:{minWidth:"150px",color:"inherited"}},r.a.createElement(f.a,{xs:"auto",className:"px-2 ml-2"},r.a.createElement(Me,{size:a,url:s,isOnline:u})),r.a.createElement(f.a,{className:"align-self-center p-0",style:{color:"inherited"}},"true"===c?r.a.createElement("b",null,t):t))},Ve=function(e){var t=e.closeFriendsListPage,a=e.refs,n=Object(ke.c)((function(e){return e.currentUser}));return r.a.createElement("div",{class:"titlebar bg-light"},r.a.createElement(Oe.a,{bg:"light",className:"p-0 nav-container"},r.a.createElement(Oe.a.Brand,{as:Le.b,to:"/fakebook"},r.a.createElement(Se.a,{color:"dodgerblue",fontSize:"2em",className:"mx-3"})),r.a.createElement("div",{style:{width:"450px"},className:"spaceing"}),r.a.createElement(ye.a,{className:"w-75 justify-content-start mr-5"},r.a.createElement(ye.a.Item,{className:"first"},r.a.createElement(Le.b,{to:"/fakebook",className:"nav-link",ref:a.home},r.a.createElement(Pe.a,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}}))),r.a.createElement(ye.a.Item,null,r.a.createElement(Le.b,{to:"/fakebook/friends/list",className:"nav-link",ref:a.friends},r.a.createElement(Se.b,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}}))),r.a.createElement(ye.a.Item,null,r.a.createElement(Le.b,{to:"/fakebook/watch",className:"nav-link",ref:a.watch},r.a.createElement(Ce.a,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}})))),r.a.createElement(ye.a,{className:"w-25 justify-content-end align-self-center"},r.a.createElement(ye.a.Item,{className:"align-self-center first"},r.a.createElement(Le.b,{to:e.profilelink,className:"nav-link profile",id:"profile",onClick:function(e){t()},ref:a.profile},r.a.createElement(Ye,{user:n,size:"30",fullname:"false",bold:"true"}))),r.a.createElement(ye.a.Item,{className:"align-self-center"},r.a.createElement(Ne.a,{title:"",className:"mr-4 custom-drop-down-btn",menuAlign:"right"},r.a.createElement(we.a.Item,{as:Le.b,to:e.profilelink,onClick:function(){return t()}},r.a.createElement(Ye,{user:n,size:"60",fullname:"true",bold:"true"})),r.a.createElement(we.a.Divider,null),r.a.createElement(we.a.Item,{as:Le.b,to:"/fakebook/",onClick:function(){!function(){ue.apply(this,arguments)}()},className:"p-0"},r.a.createElement(Re.a,{fontSize:"1.5em",className:"mx-4"}),r.a.createElement("span",null,"Log Out"),r.a.createElement("div",{style:{width:"20em"}})))))))},We=a(31),qe=a(132),Ke=a(63),Ge=a(207),Je=function(e){var t,a=e.width,n=e.height,c=e.index,l=e.userID,o=e.photo,i=e.onClick,s=e.className;return t="true"===e.useStoragePath?o:"/".concat(l,"/").concat(o.fileName),r.a.createElement("div",{key:c,className:s,style:{display:"inline-block",position:"relative",width:"".concat(a),height:"0px",paddingBottom:"".concat(n)}},r.a.createElement(Be,{alt:"",id:c,storagePath:t,style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",objectFit:"cover"},onClick:i}))};function _e(e,t,a){var n=e.currentTarget,r=t;if(r&&("profile"===r.id&&(r.style.backgroundColor="#e9ecef"),r.style.borderBottom="3px solid transparent",r.style.color=""),n){if(a(n),n.style.color="dodgerblue","profile"===n.id)return void(n.style.backgroundColor="lightblue");n.style.borderBottom="3px solid dodgerblue"}}function Qe(e){var t=e.e.target.value,a=Object(s.a)({},e.state);return a.text=t,e.setState(a),t}function Xe(e){var t=Object(s.a)({},e.state);t.isPhoto=!0,t.photoURL="".concat(e.userID,"/").concat(e.file.name),e.setState(t)}function Ze(e){!function(e,t,a){var n=Object(s.a)({},e);n.isPhoto=!1,n.photoURL="",t(n),a&&a()}(e.state,e.setState,e.sideEffect)}function $e(e,t){e.shiftKey||"Enter"===e.code&&(e.preventDefault(),t())}var et=function(e){var t=Object(We.i)().url,a=e.userID,c=e.openFileInput,l=e.photosLinkRef,o=e.activeLink,i=e.setActiveLink,s=Object(ke.c)((function(e){return e.users})),u=Object(ke.c)((function(e){return e.user.id})),p=a===u,b=s.find((function(e){return e.userID===a})).photos;return Object(n.useEffect)((function(){_e({currentTarget:l.current},o,i)}),[o,l,i]),r.a.createElement(Ge.a,{variant:"light",className:"w-100"},r.a.createElement(Ge.a.Body,null,r.a.createElement(Ge.a.Title,null,r.a.createElement(Le.b,{to:t,className:"text-body"},r.a.createElement("b",null,"Photos")),p&&r.a.createElement(d.a,{variant:"link",style:{textDecoration:"none",float:"right"},onClick:c},r.a.createElement("b",null,"Add Photos"))),r.a.createElement(m.a,{className:"w-100"},b.map((function(e,t){return r.a.createElement(f.a,{key:t,xs:6,sm:4,md:3,lg:2,className:"p-1"},r.a.createElement(Le.b,{to:"/fakebook/photo/".concat(a,"/").concat(t)},r.a.createElement(Je,{width:"100%",height:"100%",userID:a,photo:e,index:t})))})))))},tt=a(206),at=(a(165),function(e){var t=e.user,a="".concat(t.firstname," ").concat(t.lastname),c=Object(n.useState)(!1),l=Object(o.a)(c,2),i=l[0],s=l[1],u=Object(We.f)();function m(){u.push(t.index&&t.index>0?"/fakebook/".concat(t.lastname,".").concat(t.firstname,".").concat(t.index):"/fakebook/".concat(t.lastname,".").concat(t.firstname))}return r.a.createElement(f.a,{xs:6,className:"my-3"},r.a.createElement(tt.a,{placement:"auto",show:i,overlay:r.a.createElement("div",{className:"popup-card",onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},onClick:m},r.a.createElement("div",{className:"m-3"},r.a.createElement(Me,{size:"120",url:t.profilePictureURL})),r.a.createElement("h4",{className:"name-tag"},r.a.createElement("b",null,a)))},r.a.createElement("button",{type:"button",onClick:m,className:"friend-btn",tabIndex:"-1"},r.a.createElement(Be,{storagePath:t.profilePictureURL,width:"90px",height:"90px",alt:"",className:"profile-picture",onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}}))),r.a.createElement("button",{type:"button",className:"ml-3 friend-btn",onClick:m},r.a.createElement("b",null,a)))}),nt=function(e){var t,a=Object(We.i)().url,c=e.friendsLinkRef,l=e.activeLink,o=e.setActiveLink,i=Object(ke.c)((function(e){return e.users}));return Object(n.useEffect)((function(){_e({currentTarget:c.current},l,o)}),[l,c,o]),t=i||[],r.a.createElement(Ge.a,null,r.a.createElement(Ge.a.Body,null,r.a.createElement(Ge.a.Title,null,r.a.createElement(Le.b,{to:a,className:"text-body"},r.a.createElement("b",null,"Friends"))),r.a.createElement(m.a,null,t.map((function(e,t){return r.a.createElement(at,{user:e,key:t})})))))},rt=a(98),ct=function(e){var t=e.show,a=e.setShow,c=e.updatePost,l=Object(n.useRef)(null);return Object(n.useEffect)((function(){t&&(l.current.click(),a(!1))}),[t,a]),r.a.createElement("input",{type:"file",accept:"image/*",ref:l,style:{display:"none"},onChange:function(e){e.preventDefault();var t=e.target.files[0];(function(e){return ee.ref(re).child(e.name).put(e)})(t).then((function(){return c(t)}))}})},lt=a(64),ot=(a(166),function(e){var t=e.show,a=e.onClose,c=e.setText,l=e.isYoutubeBtnPressed,i=e.placeholder,u=Object(ke.c)((function(e){return e.currentUser})),m=Object(ke.c)((function(e){return e.user.id})),f="For adding YouTube video do the following:\n     1. copy link of the video from the addresse bar of your browser\n     2. press YouTube button again to upload the YouTube video to your post\n     3. add your text for the post\n     4. push the post button",b={userID:"".concat(m),text:"",isPhoto:!1,photoURL:"",isYoutube:!1,youtubeURL:"",likes:[]},E=Object(n.useState)(b),h=Object(o.a)(E,2),v=h[0],g=h[1];var k,x,j=Object(n.useState)(!1),O=Object(o.a)(j,2),y=O[0],N=O[1];y?(k="primary",x=!1):(k="secondary",x=!0);var w=Object(n.useState)(!1),L=Object(o.a)(w,2),P=L[0],S=L[1];function C(){""!==v.text||v.isYoutube||N(!1)}function R(){return l&&!v.isYoutube?f:i}return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{show:t,onHide:a},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement("div",{className:"w-100 d-flex justify-content-center"},r.a.createElement(p.a.Title,null,r.a.createElement("b",null,"Create Post")))),r.a.createElement(p.a.Body,null,r.a.createElement(Ye,{user:u,size:"45",fullname:"true",bold:"true"}),r.a.createElement("div",{className:"mt-2 scrolling-container"},r.a.createElement("textarea",{type:"text",onChange:function(e){!function(e){N(""!==e);c(e)}(Qe({e:e,state:v,setState:g}))},className:"w-100 mt-2 textarea",placeholder:R(),rows:R()===f&&""===v.text?7:3,value:v.text}),v.isPhoto&&r.a.createElement("div",{className:"mb-2 img-container"},r.a.createElement(Be,{alt:"",storagePath:"/".concat(v.photoURL),className:"w-100 img-to-post"}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(rt.a,{onClick:function(){Ze({state:v,setState:g,user:u,userID:m,sideEffect:C})}}))),v.isYoutube&&r.a.createElement("div",{className:"mb-2 video-container"},r.a.createElement("iframe",{src:v.youtubeURL,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope",allowFullScreen:!0}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(rt.a,{onClick:function(){var e=Object(s.a)({},v);e.isYoutube=!1,e.youtubeURL="",g(e),""!==v.text||v.isPhoto||N(!1)}})))),r.a.createElement("div",{className:"w-100 my-2 add-to-post"},r.a.createElement("b",null,"Add to your post"),r.a.createElement(d.a,{className:"ml-2 add-photo-btn",variant:"light",size:"sm",onClick:function(){var e=v.text,t="https://www.youtube.com/watch?v=";if(e.startsWith(t)||e.startsWith("https://m.youtube.com/watch?v=")){var a;a=e.startsWith(t)?t.length:"https://m.youtube.com/watch?v=".length;var n=e.slice(a),r="https://www.youtube.com/embed/".concat(n),l=Object(s.a)({},v);l.isYoutube=!0,l.youtubeURL=r,l.text="",g(l),c(""),N(!0)}},disabled:v.isPhoto||v.isYoutube},r.a.createElement(lt.b,{size:"26px",className:"text-danger","aria-label":"YouTube"})),r.a.createElement(d.a,{className:"ml-2 add-photo-btn",variant:"light",size:"sm",onClick:function(){return S(!0)},disabled:v.isPhoto||v.isYoutube},r.a.createElement(Ke.a,{size:"26px",className:"text-success","aria-label":"photo"}))),r.a.createElement(d.a,{variant:k,className:"w-100 mt-3",disabled:x,onClick:function(){(function(e){return pe.apply(this,arguments)})(v).then((function(){g(b),c(""),a()}))}},r.a.createElement("b",null,"Post")))),r.a.createElement(ct,{show:P,setShow:S,updatePost:function(e){Xe({state:v,setState:g,file:e,userID:m}),N(!0)}}))}),it=(a(167),["firstname","isCurrentUser"]),st=function(e){var t=e.firstname,a=e.isCurrentUser,c=Object(h.a)(e,it),l=Object(ke.c)((function(e){return e.currentUser})),i="What's on your mind ".concat(l.firstname,"?"),s="Write something to ".concat(t),u=Object(n.useState)(!1),m=Object(o.a)(u,2),f=m[0],p=m[1],b=Object(n.useState)(!1),E=Object(o.a)(b,2),v=E[0],g=E[1],k=Object(n.useState)(""),x=Object(o.a)(k,2),j=x[0],O=x[1],y=function(){return p(!0)};function N(){return a?i:s}return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,Object.assign({className:"create-post-card"},c),r.a.createElement(Ge.a.Body,null,r.a.createElement(Ge.a.Title,null,r.a.createElement(Me,{size:"40",url:l.profilePictureURL}),r.a.createElement("button",{type:"button",className:"p-2 text-dark text-btn",onClick:y},function(){var e=j.length;if(0===e)return N();var t=j.slice(0,55);return e>55&&(t+="..."),t}())),r.a.createElement("hr",null),r.a.createElement("div",{className:"d-flex"},r.a.createElement(d.a,{variant:"light",className:"add-btn",size:"sm",onClick:function(){g(!0),p(!0)}},r.a.createElement(lt.b,{size:"28px",className:"text-danger"}),"YouTube"),r.a.createElement(d.a,{variant:"light",className:"add-btn",size:"sm",onClick:y},r.a.createElement(Ke.a,{size:"28px",className:"text-success"}),"Photo")))),r.a.createElement(ot,{show:f,onClose:function(){p(!1),g(!1)},setText:O,isYoutubeBtnPressed:v,placeholder:N()}))},ut=["user","userID","photosLinkRef","activeLink","setActiveLink"],mt=function(e){var t=e.user,a=e.userID,n=e.photosLinkRef,c=e.activeLink,l=e.setActiveLink,o=Object(h.a)(e,ut),i=t.photos,s="/fakebook/".concat(t.lastname,".").concat(t.firstname,"/Photos");function u(){_e({currentTarget:n.current},c,l)}return r.a.createElement(Ge.a,o,r.a.createElement(Ge.a.Body,null,r.a.createElement(Ge.a.Title,null,r.a.createElement(Le.b,{to:s,className:"text-body",onClick:u},r.a.createElement("b",null,"Photos"))),r.a.createElement(m.a,null,i.map((function(e,t){return t<9&&r.a.createElement(f.a,{key:t,xs:4,className:"m-0",style:{paddingLeft:"3px",paddingRight:"3px",paddingTop:"0",paddingBottom:"0"}},r.a.createElement(Le.b,{to:"/fakebook/photo/".concat(a,"/").concat(t),className:"text-body",onClick:u,tabIndex:"-1"},r.a.createElement(Je,{photo:e,userID:a,index:t,width:"100%",height:"100%"})))})))))},ft=["user","friendsLinkRef","activeLink","setActiveLink"],dt=function(e){var t=e.user,a=e.friendsLinkRef,n=e.activeLink,c=e.setActiveLink,l=Object(h.a)(e,ft),o=t.index&&t.index>0?"/fakebook/".concat(t.lastname,".").concat(t.firstname,".").concat(t.index,"/Friends"):"/fakebook/".concat(t.lastname,".").concat(t.firstname,"/Friends");function i(){_e({currentTarget:a.current},n,c)}var s=Object(ke.c)((function(e){return e.users}));return r.a.createElement(Ge.a,l,r.a.createElement(Ge.a.Body,null,r.a.createElement(Ge.a.Title,null,r.a.createElement(Le.b,{to:o,className:"text-body",onClick:i},r.a.createElement("b",null,"Friends"))),r.a.createElement(Ge.a.Subtitle,{className:"text-muted"},s.length," friends"),r.a.createElement(m.a,null,s.map((function(e,t){var a=e.index&&e.index>0?"/fakebook/".concat(e.lastname,".").concat(e.firstname,".").concat(e.index):"/fakebook/".concat(e.lastname,".").concat(e.firstname),n="".concat(e.firstname," ").concat(e.lastname);return t<9&&r.a.createElement(f.a,{key:t,xs:4,className:"m-0",style:{paddingLeft:"3px",paddingRight:"3px",paddingTop:"0",paddingBottom:"3px"}},r.a.createElement(Je,{photo:e.profilePictureURL,width:"100%",height:"100%",useStoragePath:"true"}),r.a.createElement(Le.b,{to:a,className:"text-body",onClick:i},r.a.createElement("div",{className:"w-100",style:{height:"2.5em"}},r.a.createElement("p",{style:{fontSize:"0.9em"}},r.a.createElement("b",null,n)))))})))))},pt=function(e){var t=e.users,a=e.variant,n=Object(ke.c)((function(e){return e.users}));t&&(n=t);var c="modal"===a;return r.a.createElement(f.a,{xs:"auto",className:"overflow-auto mh-100"},r.a.createElement("div",{id:"col-1",className:"m-2"},n.map((function(e,t){var a="/fakebook/".concat(e.lastname,".").concat(e.firstname);return e.index&&e.index>0&&(a+=".".concat(e.index)),r.a.createElement(Le.b,{key:t,to:a,className:c?"p-1 text-dark":"nav-link text-dark"},r.a.createElement(Ye,{user:e,fullname:"true",size:c?"40":"60",bold:"true",className:"pb-1"}))}))))},bt=function(e){var t=e.show,a=e.onHide,n=e.likes,c=Object(ke.c)((function(e){return e.users})),l=n.map((function(e){return c.find((function(t){return t.userID===e}))}));return r.a.createElement(p.a,{show:t,onHide:a},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{className:"text-primary"},"All")),r.a.createElement(p.a.Body,{className:"overflow-hidden"},r.a.createElement(pt,{users:l,variant:"modal"})))},Et=["comment"],ht=function(e){var t=e.comment,a=Object(h.a)(e,Et),n=t.userID,c=Object(ke.c)((function(e){return e.users})).find((function(e){return e.userID===n}));return r.a.createElement(m.a,a,r.a.createElement(f.a,{xs:1},r.a.createElement(Me,{size:"26",url:c.profilePictureURL})),r.a.createElement(f.a,{xs:11},r.a.createElement("p",null,r.a.createElement("b",null,"".concat(c.firstname," ").concat(c.lastname," ")),t.text),t.isPhoto&&r.a.createElement(Be,{alt:"",storagePath:t.photoURL,style:{width:"30%"}})))},vt=["onChange","onKeyPress","value","welcomeText"],gt=function(e){var t=e.onChange,a=e.onKeyPress,c=e.value,l=e.welcomeText,i=Object(h.a)(e,vt),u={outline:"none",border:"none",resize:"none",overflow:"hidden",background:"#e9ecef",padding:"0",lineHeight:"0.8em"},m=Object(n.useRef)(u),f=Object(n.useState)(u),d=Object(o.a)(f,2),p=d[0],b=d[1],E=Object(n.useState)(null),v=Object(o.a)(E,2),g=v[0],k=v[1];return Object(n.useEffect)((function(){if("auto"===p.height&&g){var e=Object(s.a)({},p);e.height=g.scrollHeight+"px",b(e)}}),[p,g]),Object(n.useEffect)((function(){""===c&&g&&b(m.current)}),[c,g,m]),r.a.createElement("textarea",Object.assign({type:"text",onChange:function(e){t(e);var a=e.target;k(a),function(e){var t=Object(s.a)({},p);t.height="auto",b(t)}()},onKeyPress:a,placeholder:l,rows:"1",style:p,value:c},i))},kt=(a(168),function(e){var t=e.post,a=Object(ke.c)((function(e){return e.currentUser})),c=Object(ke.c)((function(e){return e.user.id})),l={userID:c,text:"",isPhoto:!1,photoURL:""},i=Object(n.useState)(l),u=Object(o.a)(i,2),p=u[0],b=u[1],E=Object(n.useState)(!1),h=Object(o.a)(E,2),g=h[0],k=h[1];function x(){if(""!==p.text||p.isPhoto){var e=Object(s.a)(Object(s.a)({},t),{},{comments:[]}),a=t.postID;t.comments&&(e.comments=Object(v.a)(t.comments)),e.comments.push(p),Ee(e,a),b(l)}}return r.a.createElement(f.a,null,r.a.createElement("hr",null),t.comments&&t.comments.map((function(e,t){return r.a.createElement(ht,{key:t,comment:e,className:"mb-2"})})),r.a.createElement(m.a,null,r.a.createElement(f.a,{xs:1},r.a.createElement(Me,{size:"36",url:a.profilePictureURL})),r.a.createElement(f.a,{xs:11},r.a.createElement(m.a,{style:{background:"#e9ecef",borderRadius:"18px",marginLeft:"5px"}},r.a.createElement(f.a,{xs:9,className:"align-self-center"},r.a.createElement(gt,{onChange:function(e){Qe({e:e,state:p,setState:b})},onKeyPress:function(e){return $e(e,x)},welcomeText:"Write a comment ...",value:p.text,className:"w-100 mt-2"})),r.a.createElement(f.a,{xs:3},r.a.createElement(m.a,{className:"justify-content-end align-items-baseline"},r.a.createElement(d.a,{variant:"light",size:"sm",className:"comment-btn",onClick:function(){return k(!0)},disabled:p.isPhoto},r.a.createElement(Ce.b,{size:"18px",className:"text-muted","aria-label":"photo"})),r.a.createElement(d.a,{variant:"light",size:"sm",className:"comment-btn",onClick:function(){return x()}},r.a.createElement(Ce.c,{size:"18px",className:"text-primary","aria-label":"send"}))))),p.isPhoto&&r.a.createElement("div",{className:"comment-img-container"},r.a.createElement(Be,{alt:"",storagePath:"/".concat(p.photoURL),className:"img-to-comment"}),r.a.createElement("div",{id:"close-btn-container"},r.a.createElement(rt.a,{onClick:function(){Ze({state:p,setState:b,user:a,userID:c})}}))))),r.a.createElement(ct,{show:g,setShow:k,updatePost:function(e){Xe({state:p,setState:b,file:e,userID:c})}}))}),xt=a(131),jt=a(130),Ot=a.n(jt),yt=["post"],Nt=function(e){var t=e.post,a=Object(h.a)(e,yt),c=Object(ke.c)((function(e){return e.user.id})),l=Object(ke.c)((function(e){return e.users})),i=Object(n.useState)(!1),s=Object(o.a)(i,2),u=s[0],m=s[1],f=Object(n.useState)(!1),p=Object(o.a)(f,2),b=p[0],E=p[1];if(!t)return r.a.createElement(r.a.Fragment,null);var g=t.postID,k=l.find((function(e){return e.userID===t.userID}));if(!k)return r.a.createElement(r.a.Fragment,null);function x(){return!(-1===t.likes.indexOf(c))}return r.a.createElement(Ge.a,a,r.a.createElement(Ge.a.Header,null,r.a.createElement(Ye,{user:k,size:"40",fullname:"true",bold:"true"}),r.a.createElement("span",{style:{fontSize:"12px"}},t.timestamp)),r.a.createElement(Ge.a.Body,null,r.a.createElement(Ge.a.Text,null,t.text),t.isPhoto&&r.a.createElement(Be,{alt:"",storagePath:t.photoURL,className:"w-100"}),t.isYoutube&&r.a.createElement("div",{className:"video-container"},r.a.createElement(Ot.a,{className:"react-player",url:function(e){var t=e.lastIndexOf("/"),a=e.slice(t+1),n="https://www.youtube.com/watch?v=".concat(a);return console.log(n),n}(t.youtubeURL),light:!0,width:"100%",height:"100%",playing:!0,controls:!0}))),r.a.createElement(Ge.a.Footer,null,r.a.createElement(d.a,{variant:"link",className:"text-muted",onClick:function(){t.likes.length>0&&m(!0)},style:{boxShadow:"none"}},r.a.createElement(lt.a,{className:"bg-primary text-light mr-2",style:{borderRadius:"50%"},"aria-label":"likes"}),t.likes.length),r.a.createElement(d.a,{variant:"link",className:"text-muted float-right",onClick:function(){return E(!b)},style:{boxShadow:"none"}},"comments(",t.comments?t.comments.length:0,")"),r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"light",className:"".concat(x()?"text-primary":"text-muted"," w-50"),onClick:function(){var e=Object(v.a)(t.likes),a=e.indexOf(c);-1===a?e.push(c):e.splice(a,1),Ee({likes:e},g)}},x()?r.a.createElement(lt.a,{size:"22px"}):r.a.createElement(lt.c,{size:"22px"}),r.a.createElement("b",null," Like")),r.a.createElement(d.a,{variant:"light",className:"text-muted w-50",onClick:function(){E(!0)}},r.a.createElement(xt.a,{size:"22px"}),r.a.createElement("b",null," Comment")),b&&r.a.createElement(kt,{post:t})),r.a.createElement(bt,{show:u,onHide:function(){m(!1)},likes:t.likes}))},wt=function(e){var t=e.postID,a=Object(ke.c)((function(e){return e.posts})).find((function(e){return e.postID===t}));return r.a.createElement(Nt,{post:a})},Lt=(a(174),function(e){var t=e.userID,a=e.postsLinkRef,c=e.friendsLinkRef,l=e.photosLinkRef,o=e.activeLink,i=e.setActiveLink,s=Object(ke.c)((function(e){return e.users})),u=Object(ke.c)((function(e){return e.user.id})),d=t===u,p=s.find((function(e){return e.userID===t}));return Object(n.useEffect)((function(){_e({currentTarget:a.current},o,i)}),[o,a,i]),r.a.createElement(m.a,{className:"w-100 posts"},r.a.createElement(f.a,{sm:5,className:"mh-100 overflow-hidden"},r.a.createElement(mt,{user:p,userID:t,photosLinkRef:l,activeLink:o,setActiveLink:i,className:"my-2"}),r.a.createElement(dt,{user:p,friendsLinkRef:c,activeLink:o,setActiveLink:i,className:"my-2"})),r.a.createElement(f.a,{sm:7,className:"mh-100 overflow-auto hide-scrollbar bg-200"},r.a.createElement(st,{firstname:p.firstname,isCurrentUser:d,className:"mt-2"}),p.posts.map((function(e,t){return r.a.createElement(wt,{key:t,postID:e,className:"mx-auto my-2"})}))))}),Pt=function(e){var t=Object(We.h)().itemId,a=e.userID,n=e.openFileInput,c=e.photosLinkRef,l=e.friendsLinkRef,o=e.postsLinkRef,i=e.activeLink,s=e.setActiveLink;return"Photos"===t?r.a.createElement(et,{userID:a,openFileInput:n,photosLinkRef:c,activeLink:i,setActiveLink:s}):"Friends"===t?r.a.createElement(nt,{friendsLinkRef:l,activeLink:i,setActiveLink:s}):r.a.createElement(Lt,{userID:a,photosLinkRef:c,friendsLinkRef:l,postsLinkRef:o,activeLink:i,setActiveLink:s})},St=function(e){var t=e.show,a=e.removeCoverPhoto,n=e.closeDlg;return r.a.createElement(p.a,{show:t,onHide:n},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Remove Cover Photo"))),r.a.createElement(p.a.Body,null,r.a.createElement("div",null,"Do you really want to remove the cover photo?")),r.a.createElement(p.a.Footer,null,r.a.createElement(d.a,{variant:"link",style:{textDecoration:"none"},onClick:n},r.a.createElement("b",null,"Cancel")),r.a.createElement(d.a,{variant:"primary",onClick:a},r.a.createElement("b",null,"Submit"))))},Ct=function(e){var t=e.show,a=e.onHide,n=e.onPhotoClick,c=e.userID,l=e.photos;return r.a.createElement(p.a,{show:t,onHide:a,scrollable:!0},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{style:{marginLeft:"35%"}},r.a.createElement("strong",null,"Select Photo"))),r.a.createElement(p.a.Body,null,l.map((function(e,t){return r.a.createElement(Be,{className:"m-1",width:"31%",height:"90px",alt:"",key:t,id:t,storagePath:"/".concat(c,"/").concat(e.fileName),style:{objectFit:"cover"},onClick:n})}))))},Rt=function(e){var t=e.show,a=e.onHide,n=e.onBtnClick,c=e.onPhotoClick,l=e.userID,o=e.photos;return r.a.createElement(p.a,{show:t,onHide:a,size:"lg",scrollable:!0},r.a.createElement(p.a.Header,{closeButton:!0},r.a.createElement(p.a.Title,{style:{margin:"auto"}},r.a.createElement("strong",null,"Update Profile Picture"))),r.a.createElement(p.a.Body,null,r.a.createElement(d.a,{size:"sm",variant:"outline-primary",className:"w-50 m-2 mb-3",onClick:n},r.a.createElement("b",null,"+ Upload Photo")),r.a.createElement("br",null),r.a.createElement("b",null,"Suggested Photos"),r.a.createElement(m.a,{className:"m-1"},o.map((function(e,t){return r.a.createElement(Je,{key:t,width:"15%",height:"15%",userID:l,photo:e,index:t,onClick:c,className:"m-1"})})))))},It=(a(175),function(e){var t=Object(We.h)().userName,a=e.linkRef,c=e.activeMainLink,l=e.setActiveMainLink,s=Object(ke.c)((function(e){return e.user.id})),u=Object(ke.c)((function(e){return e.users})),p=function(){var e=u.map((function(e){return e.index&&0!==e.index?"".concat(e.lastname,".").concat(e.firstname,".").concat(e.index):"".concat(e.lastname,".").concat(e.firstname)})).indexOf(t),a=u[e];return a},b=function(){return p().userID},E=s===b(),h=p(),g=h.firstname,k=h.lastname,x=h.profilePictureURL,j=h.backgroundPictureURL,O=h.photos,y=Object(n.useState)(!1),N=Object(o.a)(y,2),w=N[0],L=N[1],P=Object(n.useState)(!1),S=Object(o.a)(P,2),C=S[0],R=S[1],I=Object(n.useState)(!1),D=Object(o.a)(I,2),U=D[0],z=D[1],F=Object(n.useState)(!1),A=Object(o.a)(F,2),T=A[0],B=A[1],H=Object(n.useState)("backgroundPictureURL"),M=Object(o.a)(H,2),Y=M[0],V=M[1],W=Object(n.useState)(null),q=Object(o.a)(W,2),K=q[0],G=q[1],J=Object(n.useRef)(null),_=Object(n.useRef)(null),Q=Object(n.useRef)(null),X=Object(We.i)(),Z=X.url,$=X.path;function ee(e){V(e),B(!0)}function te(e){switch(e){case"3":L(!0);break;case"2":ee("backgroundPictureURL");break;case"1":R(!0);break;default:return}}function ae(){L(!1)}function ne(){R(!1)}function re(){z(!1)}function ce(e,t){var a=Number(e.target.id),n=O[a],r="".concat(s,"/").concat(n.fileName);return he(Object(i.a)({},t,r))}return Object(n.useEffect)((function(){_e({currentTarget:a.current},c,l)}),[a,c,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{className:"justify-content-center grad"},r.a.createElement(f.a,{className:"m-0 p-0 profile-col"},r.a.createElement("div",{className:"background-pic-container"},r.a.createElement(Be,{className:"background-pic",storagePath:j,alt:""}),E&&r.a.createElement(Ne.a,{variant:"light",className:"background-pic-button",title:r.a.createElement("b",null,r.a.createElement(Ce.b,{className:"mr-1",size:"20px"}),r.a.createElement("span",null,"Edit Cover Photo")),size:"sm"},r.a.createElement(we.a.Item,{eventKey:"1",onSelect:te},r.a.createElement(Ke.a,{size:"20px",className:"mr-2"}),"Select Photo"),r.a.createElement(we.a.Item,{eventKey:"2",onSelect:te},r.a.createElement(Re.b,{size:"20px",className:"mr-2"}),"Upload Photo"),r.a.createElement(we.a.Divider,null),r.a.createElement(we.a.Item,{eventKey:"3",onSelect:te},r.a.createElement(qe.a,{size:"20px",className:"mr-2"})," Remove")),r.a.createElement("div",{className:"profile-pic-container"},r.a.createElement(Me,{size:"180",url:x}),E&&r.a.createElement(d.a,{variant:"light",className:"profile-pic-button",onClick:function(){return z(!0)}},r.a.createElement(Ce.b,{size:"19px","aria-label":"photo"})))),r.a.createElement("h2",{className:"text-center mt-5"},r.a.createElement("b",null,g," ",k)),r.a.createElement("hr",null),r.a.createElement(Oe.a,{bg:"light"},r.a.createElement(ye.a,null,r.a.createElement(ye.a.Item,null,r.a.createElement(Le.b,{key:"1",to:"".concat(Z,"/Posts"),className:"nav-link mx-2",ref:Q},r.a.createElement("b",null,"Posts"))),r.a.createElement(ye.a.Item,null,r.a.createElement(Le.b,{key:"2",to:"".concat(Z,"/Friends"),className:"nav-link mx-2",ref:_},r.a.createElement("b",null,"Friends")," ",u.length)),r.a.createElement(ye.a.Item,null,r.a.createElement(Le.b,{key:"3",to:"".concat(Z,"/Photos"),className:"nav-link mx-2",ref:J},r.a.createElement("b",null,"Photos"))))))),r.a.createElement(m.a,{className:"justify-content-center"},r.a.createElement(f.a,{className:"profile-col"},r.a.createElement(We.c,null,r.a.createElement(We.a,{path:"".concat($,"/:itemId")},r.a.createElement(Pt,{userID:b(),openFileInput:function(){return ee("")},photosLinkRef:J,friendsLinkRef:_,postsLinkRef:Q,activeLink:K,setActiveLink:G})),r.a.createElement(We.a,{path:$},r.a.createElement(Lt,{userID:b(),photosLinkRef:J,friendsLinkRef:_,postsLinkRef:Q,activeLink:K,setActiveLink:G}))))),r.a.createElement(St,{show:w,removeCoverPhoto:function(){return ae(),he({backgroundPictureURL:"background-server.jpg"})},closeDlg:ae}),r.a.createElement(Ct,{show:C,onHide:ne,onPhotoClick:function(e){ne(),ce(e,"backgroundPictureURL")},userID:s,photos:O}),r.a.createElement(Rt,{show:U,onHide:re,onBtnClick:function(){re(),ee("profilePictureURL")},onPhotoClick:function(e){re(),ce(e,"profilePictureURL")},userID:s,photos:O}),r.a.createElement(ct,{show:T,setShow:B,updateDatabase:function(e){var t={fileName:e.name},a=O.map((function(e){return e.fileName})),n=Object(v.a)(O);-1===a.indexOf(e.name)&&n.push(t);var r={photos:n};return""!==Y&&(r[Y]="".concat(s,"/").concat(e.name)),he(r)},userID:s}))}),Dt=a(205),Ut=function(){var e=Object(We.h)(),t=e.userID,a=e.n,c=Object(ke.c)((function(e){return e.users})).find((function(e){return e.userID===t})).photos,l=Object(n.useState)(Number(a)),i=Object(o.a)(l,2),s=i[0],u=i[1],d=Object(We.f)(),p=Object(We.g)();Object(n.useEffect)((function(){var e=p.pathname.split("/"),t=Number(e.pop());u(t)}),[p]);return r.a.createElement(m.a,{className:"bg-200",style:{position:"relative",top:"50px",height:"89vh"}},r.a.createElement(f.a,{md:9,className:"h-100",style:{backgroundColor:"black"}},r.a.createElement(Dt.a,{className:"w-100 h-100",interval:null,indicators:!1,activeIndex:s,onSelect:function(e,a){d.push("/fakebook/photo/".concat(t,"/").concat(e))}},c.map((function(e,a){return r.a.createElement(Dt.a.Item,{key:a,style:{width:"100%",height:"89vh"}},r.a.createElement(Be,{storagePath:"/".concat(t,"/").concat(e.fileName),alt:"",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"600px",height:"100%",objectFit:"contain"}}))})))),r.a.createElement(f.a,null))},zt=function(){var e=Object(ke.c)((function(e){return e.posts}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(st,{isCurrentUser:!0,className:"mw-100 m-auto p-0",style:{width:"450px"}}),e.map((function(e,t){return r.a.createElement(Nt,{key:t,post:e,className:"mw-100 mx-auto my-2",style:{width:"450px"}})})))},Ft=(a(176),function(e){var t=Object(ke.c)((function(e){return e.currentUser}));return r.a.createElement(ye.a,{className:"flex-column mt-3",id:"left-navbar"},r.a.createElement("div",{className:"navitem"},r.a.createElement(ye.a.Link,{as:Le.b,to:e.profileLink,className:"text-dark flex-column justify-content-center"},r.a.createElement(Ye,{user:t,size:"26",fullname:"true"}))),r.a.createElement("div",{className:"navitem"},r.a.createElement(ye.a.Link,{as:Le.b,to:"/fakebook/friends/list",className:"text-dark"},r.a.createElement(Se.b,{size:"26px",className:"text-info mr-2"}),r.a.createElement("div",{className:"d-inline"},"Friends"))),r.a.createElement("div",{className:"navitem"},r.a.createElement(ye.a.Link,{as:Le.b,to:"/fakebook/watch",className:"text-dark"},r.a.createElement(Ce.a,{size:"26px",className:"text-info mr-2"}),r.a.createElement("div",{className:"d-inline"},"Watch"))))}),At=function(){var e=Object(ke.c)((function(e){return e.posts})).filter((function(e){return e.isYoutube}));return r.a.createElement(r.a.Fragment,null,e.map((function(e,t){return r.a.createElement(Nt,{key:t,post:e,className:"mw-100 mx-auto my-2",style:{width:"550px"}})})))},Tt=a(133),Bt=["message"],Ht=function(e){var t=e.message,a=Object(h.a)(e,Bt),n=Object(ke.c)((function(e){return e.user.id}));return r.a.createElement(m.a,Object.assign({},a,{className:t.sender===n?"justify-content-end":"justify-content-start"}),r.a.createElement("div",{style:{fontSize:"12px",margin:"auto"}},new Date(t.timestamp).toLocaleString()),t.isPhoto&&r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement(Be,{alt:"",storagePath:t.photoURL,style:{display:"block",width:"50%",margin:"auto"}})),r.a.createElement("p",{style:t.sender===n?{width:"75%",backgroundColor:"dodgerblue",color:"white",padding:"16px",borderRadius:"16px"}:{width:"75%",backgroundColor:"lightgray",color:"black",padding:"16px",borderRadius:"16px"}},t.text))},Mt=function(e){var t=e.conversation;return r.a.createElement(f.a,null,t.map((function(e,t){return r.a.createElement(Ht,{key:t,message:e})})))},Yt=function(e){var t=e.recipient,a=Object(n.useState)([]),c=Object(o.a)(a,2),l=c[0],i=c[1],s=Object(ke.c)((function(e){return e.incomingMessages})),u=Object(ke.c)((function(e){return e.outgoingMessages})),m=s.filter((function(e){return e.sender===t})),f=u.filter((function(e){return e.recipient===t}));return Object(n.useEffect)((function(){var e=function(e,t){return[].concat(Object(v.a)(e),Object(v.a)(t)).sort((function(e,t){return new Date(e.timestamp)-new Date(t.timestamp)}))}(m,f);e.length!==l.length&&i(e)}),[m,f,l]),r.a.createElement(Mt,{conversation:l})},Vt=(a(177),function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),i=Object(o.a)(l,2),u=i[0],p=i[1],b=Object(n.useState)(null),h=Object(o.a)(b,2),x=h[0],j=h[1],O=Object(ke.c)((function(e){return e.currentUser})),y=Object(ke.c)((function(e){return e.user.id})),N=Object(ke.c)((function(e){return e.users})),w={sender:"".concat(y),recipient:"",text:"",isPhoto:!1,photoURL:"",isRead:!1},L=Object(n.useState)(w),P=Object(o.a)(L,2),S=P[0],C=P[1];function R(e){if((e||!u)&&(!u||e.userID===u.userID)){var t;c(!0),t=e?e.userID:"";var a=Object(s.a)({},S);a.recipient=t,C(a),p(e)}}var I=Object(n.useCallback)(R,[O]);function D(){return(D=Object(g.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(u);case 2:K(),c(!1),p(null);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U=Object(n.useRef)(null),z=Object(n.useState)(""),F=Object(o.a)(z,2),A=F[0],T=F[1];function B(){var e;(e=S,ve.add(Object(s.a)(Object(s.a)({},e),{},{timestamp:k.a.firestore.FieldValue.serverTimestamp()}))).then((function(){C(w),T(U.current.scrollHeight)}))}Object(n.useEffect)((function(){U.current&&(U.current.scrollTop=A)}),[A]),Object(n.useEffect)((function(){var e=me("incoming"),t=me("outgoing");return function(){e(),t()}}),[]);var H=Object(n.useState)([]),M=Object(o.a)(H,2),Y=M[0],V=M[1],W=Object(ke.c)((function(e){return e.incomingMessages})).filter((function(e){return!e.isRead}));function q(e){var t=W.filter((function(t){return t.sender===e.userID})),a=[];return t.forEach((function(e){var t=e.id;a.push(function(e){return ve.doc(e).update({isRead:!0})}(t))})),Promise.all(a)}function K(){var e=Object(v.a)(Y);e.pop(),V(e)}return Object(n.useEffect)((function(){var e=[];W.forEach((function(t){var a=t.sender;-1===e.indexOf(a)&&e.push(a)})),Y.length!==e.length&&V(e)}),[Y,W]),Object(n.useEffect)((function(){if(0!==Y.length){var e=Y.length-1,t=Y[e];I(N.find((function(e){return e.userID===t})))}}),[Y,N,I]),u&&a&&""===S.recipient&&R(u),r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{className:"flex-column"},r.a.createElement("h5",{className:"text-muted ml-3"},r.a.createElement("b",null,"Contacts")),N.map((function(e,t){return e.userID===y?r.a.createElement("div",{key:t}):r.a.createElement("button",{type:"button",key:t,className:"navitem text-dark flex-row justify-content-center p-2 mb-1 nav-btn bg-200",onClick:function(){return R(e)}},r.a.createElement(Ye,{size:"26",fullname:"true",bold:"false",user:e}))}))),r.a.createElement(tt.a,{placement:"left-start",show:a,overlay:r.a.createElement(Ge.a,{style:{width:"350px",height:"450px",background:"white",fontSize:"1.2rem",maxHeight:"".concat(window.innerHeight-70,"px")}},r.a.createElement(Ge.a.Body,{className:"overflow-none"},r.a.createElement(Ge.a.Title,null,!u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"New Message"),r.a.createElement("h6",null,"To:")),u&&r.a.createElement(Ye,{size:"26",fullname:"true",bold:"true",user:u}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(rt.a,{onClick:function(){return D.apply(this,arguments)},className:"text-primary"}))),r.a.createElement("hr",null),u&&r.a.createElement(m.a,{className:"mh-100 overflow-auto flex-column-reverse",ref:U},r.a.createElement(Yt,{sender:y,recipient:u.userID})),!u&&r.a.createElement(f.a,{className:"h-75 overflow-auto"},N.map((function(e,t){return e.userID===y?r.a.createElement("div",{key:t}):r.a.createElement("button",{type:"button",key:t,className:"flex-row text-dark justify-content-start p-2 container-choose-to nav-btn w-100 mb-1 white",onClick:function(){return R(e)}},r.a.createElement(Ye,{size:"36",fullname:"true",bold:"false",user:e}))})))),u&&r.a.createElement(Ge.a.Footer,{className:"mt-5"},r.a.createElement(m.a,null,""===S.text&&r.a.createElement(f.a,{xs:2},r.a.createElement(d.a,{variant:"light",size:"sm",className:"add-photo-btn",onClick:function(){return j(!0)}},r.a.createElement(Ke.a,{size:"21px",className:"text-primary"}))),r.a.createElement(f.a,{xs:""===S.text?8:10,className:"align-self-center",style:{background:"#e9ecef",borderRadius:"18px"}},S.isPhoto&&r.a.createElement("div",{className:"comment-img-container"},r.a.createElement(Be,{alt:"",storagePath:"/".concat(S.photoURL),className:"img-to-comment"}),r.a.createElement("div",{className:"close-btn-container"},r.a.createElement(rt.a,{onClick:function(){Ze({state:S,setState:C,user:O,userID:y})}}))),r.a.createElement(gt,{onChange:function(e){Qe({e:e,state:S,setState:C})},onKeyPress:function(e){return $e(e,B)},welcomeText:"Aa",value:S.text,className:"w-100 mt-2"})),r.a.createElement(f.a,{xs:2},r.a.createElement(d.a,{variant:"light",size:"sm",className:"add-photo-btn",onClick:function(){(""!==S.text||S.isPhoto)&&B()}},r.a.createElement(Ce.c,{size:"23px",className:"text-primary"}))))),r.a.createElement(ct,{show:x,setShow:j,updatePost:function(e){Xe({state:S,setState:C,file:e,userID:y})},userID:y}))},r.a.createElement("button",{type:"button",className:"msg-btn",onClick:function(){return R(null)},"aria-label":"Message"},r.a.createElement(Tt.a,{size:"22px","aria-hidden":"true"}))))}),Wt=(a(178),function(e){var t=e.profileLink,a=e.className,c=e.isWatch,l=e.linkRef,o=e.activeLink,i=e.setActiveLink;return Object(n.useEffect)((function(){_e({currentTarget:l.current},o,i)}),[c,l,o,i]),r.a.createElement(m.a,{className:"".concat(a," overflow-hidden vh-100")},r.a.createElement(f.a,{className:"mh-100 overflow-auto left-navbar-col"},r.a.createElement(Ft,{profileLink:t})),r.a.createElement(f.a,{sm:9,md:c?12:9,lg:c?9:6,className:"mh-100 overflow-auto hide-scrollbar"},!c&&r.a.createElement(zt,null),c&&r.a.createElement(At,null)),!c&&r.a.createElement(f.a,{className:"mh-100 overflow-auto contacts-col",style:{position:"relative"}},r.a.createElement(Vt,null)))}),qt=(a(179),a(134)),Kt=a.n(qt),Gt=function(e){var t=e.linkRef,a=e.activeLink,c=e.setActiveLink,l="/fakebook/friends/list"===Object(We.g)().pathname;return Object(n.useEffect)((function(){_e({currentTarget:t.current},a,c)}),[a,t,c]),window.innerWidth>600||l?r.a.createElement(m.a,{className:"overflow-hidden friends-list"},r.a.createElement(pt,null),r.a.createElement(f.a,{className:"overflow-auto mh-100 hide-scrollbar col-two"},l?r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column align-items-center justify-content-center"},r.a.createElement("img",{width:"200px",src:Kt.a,alt:"cartoon of fakebook friends",className:"p-4"}),r.a.createElement("h5",{className:"text-muted"},r.a.createElement("b",null,"Select people's names to preview their profile."))):r.a.createElement("div",{className:"profile-container"},r.a.createElement(It,{linkRef:t,activeMainLink:a,setActiveMainLink:c})))):r.a.createElement(It,{linkRef:t,activeMainLink:a,setActiveMainLink:c})},Jt=a(135),_t=function(e){var t=e.profileLink,a=Object(ke.c)((function(e){return e.currentUser})),c=Object(ke.c)((function(e){return e.users}));function l(){return a&&a.index&&a.index>0?"".concat(t,".").concat(a.index):t}Object(n.useEffect)((function(){var e=(re=X.getState().user.id,(ce=oe.doc(re)).onSnapshot((function(e){X.dispatch(I(e.data()))}))),t=oe.onSnapshot((function(e){var t=[];e.forEach((function(e){var a=e.data();a.userID=e.id,t.push(a)})),X.dispatch(z(t))})),a=le.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){var a=e.data(),n=a.timestamp,r="";n&&(r=n.toDate().toLocaleString()),a.timestamp=r,a.postID=e.id,t.push(a)})),X.dispatch(T(t))}));ie();window.addEventListener("beforeunload",(function(e){se()}));return document.addEventListener("visibilitychange",(function(e){"visible"===document.visibilityState?ie():se()})),function(){e(),t(),a()}}),[]);var i=Object(n.useRef)(!1);var s={home:Object(n.useRef)(null),friends:Object(n.useRef)(null),watch:Object(n.useRef)(null),profile:Object(n.useRef)(null)},u=Object(n.useState)(null),m=Object(o.a)(u,2),f=m[0],d=m[1];return 0!==c.length&&a?r.a.createElement("div",{className:"bg-200 vw-100 main-container overflow-hidden"},r.a.createElement(Jt.a,{className:"w-100 p-0",fluid:!0},r.a.createElement(Le.a,null,r.a.createElement(Ve,{profilelink:l(),closeFriendsListPage:function(){i.current=!1},refs:s}),r.a.createElement(We.c,null,r.a.createElement(We.a,{path:"/fakebook/friends/list",render:function(){return i.current=!0,r.a.createElement(Gt,{linkRef:s.friends,activeLink:f,setActiveLink:d})}}),r.a.createElement(We.a,{path:"/fakebook/photo/:userID/:n",render:function(){return r.a.createElement(Ut,null)}}),r.a.createElement(We.a,{path:"/fakebook/watch",render:function(){return i.current=!1,r.a.createElement(Wt,{className:"pt-5",profileLink:l(),isWatch:!0,linkRef:s.watch,activeLink:f,setActiveLink:d})}}),r.a.createElement(We.a,{path:"/fakebook/:userName",render:function(){return i.current?r.a.createElement(Gt,{linkRef:s.friends,activeLink:f,setActiveLink:d}):r.a.createElement(It,{linkRef:s.profile,activeMainLink:f,setActiveMainLink:d})}}),r.a.createElement(We.a,{path:"/fakebook",render:function(){return i.current=!1,r.a.createElement(Wt,{className:"pt-5",profileLink:l(),isWatch:!1,linkRef:s.home,activeLink:f,setActiveLink:d})}}))))):r.a.createElement("div",null,"...Loading")},Qt=a(202),Xt=function(e){var t=e.show,a=e.onHide,c=e.onExit,l=Object(ke.c)((function(e){return e.user.error})),i=Object(ke.b)(),s=Object(n.useState)(""),m=Object(o.a)(s,2),f=m[0],b=m[1];return r.a.createElement(p.a,{show:t,onHide:a,onExited:c},r.a.createElement(p.a.Header,null,r.a.createElement(p.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Password Reset Email"))),r.a.createElement(p.a.Body,null,""!==l&&r.a.createElement(Qt.a,{variant:"danger"},l),r.a.createElement(u.a.Group,null,r.a.createElement(u.a.Label,null,"Please enter the email address associated to your account to receive a password reset email."),r.a.createElement(u.a.Control,{type:"email",placeholder:"Email",name:"email",size:"lg",onChange:function(e){e.preventDefault();var t=e.target;b(t.value)},value:f}))),r.a.createElement(p.a.Footer,null,r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"light",onClick:function(){a(),i(L(""))}},r.a.createElement("b",null,"Cancel")),r.a.createElement(d.a,{variant:"primary",onClick:function(){(function(e){return ne.sendPasswordResetEmail(e)})(f).then((function(){a()})).catch((function(e){return i(L(e.message))}))}},r.a.createElement("b",{className:"px-2"},"Send"))))};var Zt=function(){var e=Object(ke.c)((function(e){return e.user}));Object(n.useEffect)((function(){return ne.onAuthStateChanged((function(e){if(e){var t=e.uid,a=e.emailVerified,n=e.displayName;X.dispatch(N({id:t,displayName:n,isEmailVerified:a}))}else X.dispatch(w());X.dispatch(S())}))}),[]);var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1];function i(){l(!1)}function s(){l(!0)}var u=Object(n.useCallback)(i,[]),p=e&&e.displayName&&e.displayName.trim().split(" ")||[],b=p.pop(),E=p.join(" "),h="/fakebook/".concat(b,".").concat(E),v=Object(n.useState)(!0),g=Object(o.a)(v,2),k=g[0],x=g[1];return e.isLoading?r.a.createElement("div",null,"...Loading"):e.isSignedIn&&!e.error?e.isEmailVerified?r.a.createElement(_t,{profileLink:h}):r.a.createElement(r.a.Fragment,null):r.a.createElement(f.a,{className:"bg-200 vh-100"},r.a.createElement(m.a,{className:"h-100 align-items-center"},r.a.createElement(f.a,{lg:{span:5,offset:1},className:"d-flex justify-content-center"},r.a.createElement(je,null)),r.a.createElement(f.a,{lg:5,className:"bg-200 d-flex justify-content-center"},r.a.createElement("div",{className:"login p-3 bg-light"},r.a.createElement(xe,{onClickForgottenPswd:function(){x(!1),s()},disabled:!0}),r.a.createElement("hr",null),r.a.createElement(d.a,{variant:"success",size:"lg",className:"d-block w-60 mx-auto mt-4",onClick:s},r.a.createElement("b",null,"Create New Account")))),r.a.createElement(ge,{show:c&&k,onHide:u,onExit:function(){return x(!0)}}),r.a.createElement(Xt,{show:c&&!k,onHide:i,onExit:function(){return x(!0)}})))};l.a.render(r.a.createElement(ke.a,{store:X},r.a.createElement(Zt,null)),document.getElementById("root"))}},[[139,14,15]]]);
//# sourceMappingURL=main.d481897c.chunk.js.map