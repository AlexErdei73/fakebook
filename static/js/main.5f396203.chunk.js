(this.webpackJsonpfakebook=this.webpackJsonpfakebook||[]).push([[3],{111:function(e,t,a){e.exports=a.p+"static/media/friends.2536911b.jpg"},119:function(e,t,a){e.exports=a(150)},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},140:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(31),l=a.n(c),s=a(11),i={apiKey:"AIzaSyA6giH2VCl9pBrO86uGH3gcwbmeM-dYMPM",authDomain:"fakebook-2df7b.firebaseapp.com",projectId:"fakebook-2df7b",storageBucket:"fakebook-2df7b.appspot.com",messagingSenderId:"1030600439600",appId:"1:1030600439600:web:98617c1d503260115cfaf5",measurementId:"G-YN35E2SN2E"},o=(a(124),a(41)),u=a(19),m=a(12),d=(a(125),a(21)),f=a(76),E=a(40),p=a(42),b=(a(126),function(e){var t=Object(s.c)(),a=function(t){e.onChange(t.target.name,t.target.value)},c=Object(n.useState)({firstname:"",lastname:""}),l=Object(m.a)(c,2),i=l[0],b=l[1],h=function(e){b(Object(u.a)(Object(u.a)({},i),{},Object(o.a)({},e.target.name,e.target.value)))},v=Object(n.useState)(null),g=Object(m.a)(v,2),k=g[0],x=g[1],j=Object(n.useState)(!0),O=Object(m.a)(j,2),w=O[0],y=O[1],N=Object(n.useState)(!1),I=Object(m.a)(N,2),D=I[0],L=I[1];return Object(n.useEffect)((function(){w?y(!1):k?(e.onError(k.message),console.log(k)):e.onSubmit()}),[k]),r.a.createElement(d.a,{noValidate:!0,validated:D,onSubmit:function(a){a.preventDefault(),!0===a.currentTarget.checkValidity()&&t.auth().createUserWithEmailAndPassword(e.user.email,e.user.password).then((function(e){e.user.updateProfile({displayName:"".concat(i.firstname," ").concat(i.lastname)}),t.firestore().collection("users").where("firstname","==",i.firstname).where("lastname","==",i.lastname).get().then((function(a){var n=a.size;t.firestore().collection("users").doc(e.user.uid).set({firstname:i.firstname,lastname:i.lastname,profilePictureURL:"fakebook-avatar.jpeg",backgroundPictureURL:"background-server.jpg",photos:[],posts:[],isOnline:!1,index:n}).then((function(){t.auth().signOut()}))}));return e.user.sendEmailVerification({url:"http://localhost:3000/"})})).catch((function(e){console.log(e),x(e)})),L(!0)}},r.a.createElement(d.a.Row,null,r.a.createElement(d.a.Group,{as:E.a},r.a.createElement(d.a.Control,{type:"text",placeholder:"First name",name:"firstname",onChange:h,required:!0}),r.a.createElement(d.a.Control.Feedback,{type:"invalid"},"First name required.")),r.a.createElement(d.a.Group,{as:E.a},r.a.createElement(d.a.Control,{type:"text",placeholder:"Surename",name:"lastname",onChange:h,required:!0}),r.a.createElement(d.a.Control.Feedback,{type:"invalid"},"Last name required."))),r.a.createElement(d.a.Row,null,r.a.createElement(d.a.Group,{as:E.a},r.a.createElement(d.a.Control,{type:"email",placeholder:"Email address",name:"email",onChange:a,required:!0}),r.a.createElement(d.a.Control.Feedback,{type:"invalid"},"Email required in the right format."))),r.a.createElement(d.a.Row,null,r.a.createElement(d.a.Group,{as:E.a},r.a.createElement(d.a.Control,{type:"text",placeholder:"New password",name:"password",onChange:a,required:!0}),r.a.createElement(d.a.Control.Feedback,{type:"invalid"},"Password required."))),r.a.createElement(d.a.Row,null,r.a.createElement("p",{className:"text-muted p-1",id:"text-legal"},"Signing Up for fakebook you agree to share the uploaded details with any other user. Please do not upload any sensitive data to the app, which is built strictly for demonstration purposes.")),r.a.createElement(f.a,null,r.a.createElement(p.a,{type:"submit",variant:"success",className:"w-50 mx-auto"},r.a.createElement("strong",null,"Sign Up"))))}),h=function(e){var t=Object(s.c)(),a=function(t){e.onChange(t.target.name,t.target.value),o("")},c=Object(n.useState)(""),l=Object(m.a)(c,2),i=l[0],o=l[1];return Object(n.useEffect)((function(){e.onError(i)}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{noValidate:!0,onSubmit:function(a){a.currentTarget;a.preventDefault(),a.stopPropagation(),t.auth().signInWithEmailAndPassword(e.user.email,e.user.password).then((function(e){e.user.emailVerified?o(""):(t.auth().signOut(),o("Please verify your email before to continue"))})).catch((function(t){""===e.user.email?o("Email is required."):""===e.user.password?o("Password is required."):o(t.message)}))},className:"w-100"},r.a.createElement(d.a.Control,{type:"email",placeholder:"Email",name:"email",size:"lg",className:"mb-2 w-100",onChange:a,isInvalid:-1!==i.indexOf("mail")||-1!==i.indexOf("identifier")}),r.a.createElement(d.a.Control,{type:"text",placeholder:"Password",name:"password",size:"lg",className:"mb-2 w-100",onChange:a,isInvalid:""!==i}),r.a.createElement(d.a.Control.Feedback,{type:"invalid"},i),r.a.createElement(p.a,{variant:"primary",type:"submit",size:"lg",className:"w-100"},r.a.createElement("b",null,"Log In"))),r.a.createElement(p.a,{variant:"link",type:"link",className:"w-100",id:"link-button",onClick:e.onClickForgottenPswd},"Forgotten password?"))},v=(a(130),a(90)),g=(a(131),function(){return r.a.createElement("div",{className:"recent-logins"},r.a.createElement("h1",{className:"text-primary w-100"},r.a.createElement("strong",{style:{fontSize:"3.5rem"}},"fakebook")),r.a.createElement("h3",{className:"w-100"},r.a.createElement("p",null,"Fakebook helps you connect and share with the people in your life.")))}),k=a(69),x=(a(100),a(102),a(158)),j=a(157),O=a(155),w=a(112),y=a(13),N=a(107),I=a(58),D=a(37),L=a(87),C=(a(132),a(24)),P=(a(133),["size","url","isOnline"]),R=function(e){var t=e.size,a=e.url,n=e.isOnline,c=Object(C.a)(e,P),l=Math.floor(t/6),i=Math.floor(.8536*t-l/2);return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,Object.assign({style:{width:"".concat(t,"px"),height:"".concat(t,"px"),objectFit:"cover",borderRadius:"".concat(t/2,"px"),pointerEvents:"none",position:"relative"},storagePath:a,alt:""},c)),n&&r.a.createElement("div",{className:"bg-success",style:{width:"".concat(2*l,"px"),height:"".concat(2*l,"px"),borderRadius:"50%",position:"absolute",top:"".concat(i,"px"),left:"".concat(i,"px"),border:"2px solid white"}}))},S=function(e){var t,a=e.size,n=e.fullname,c=e.bold,l=e.user,s=l.firstname,i=l.lastname,o=l.profilePictureURL,u=l.isOnline;return t="true"===n?"".concat(s," ").concat(i):"".concat(s),r.a.createElement(f.a,{style:{minWidth:"150px",color:"inherited"}},r.a.createElement(E.a,{xs:"auto",className:"px-2 ml-2"},r.a.createElement(R,{size:a,url:o,isOnline:u})),r.a.createElement(E.a,{className:"align-self-center p-0",style:{color:"inherited"}},"true"===c?r.a.createElement("b",null,t):t))},z=function(e){var t=e.user,a=e.closeFriendsListPage,n=e.setUserOffline,c=e.refs,l=e.dimension,i=Object(s.c)();return r.a.createElement(x.a,{bg:"light",fixed:"top",className:"p-0"},r.a.createElement(x.a.Brand,{as:y.b,to:"/"},r.a.createElement(I.a,{color:"dodgerblue",fontSize:"2em",className:"mx-3"})),l.width>640&&r.a.createElement("div",{style:{width:"450px"}}),r.a.createElement(j.a,{className:"w-75 justify-content-start mr-5"},l.width>640&&r.a.createElement(j.a.Item,null,r.a.createElement(y.b,{to:"/",className:"nav-link",ref:c.home},r.a.createElement(N.a,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}}))),r.a.createElement(j.a.Item,null,r.a.createElement(y.b,{to:"/friends/list",className:"nav-link",ref:c.friends},r.a.createElement(I.b,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}}))),r.a.createElement(j.a.Item,null,r.a.createElement(y.b,{to:"/watch",className:"nav-link",ref:c.watch},r.a.createElement(D.a,{fontSize:"2rem",className:"mx-4",style:{pointerEvents:"none"}})))),r.a.createElement(j.a,{className:"w-25 justify-content-end align-self-center"},l.width>640&&r.a.createElement(j.a.Item,{className:"align-self-center"},r.a.createElement(y.b,{to:e.profilelink,className:"nav-link",onClick:function(e){a()},id:"profile",ref:c.profile},r.a.createElement(S,{user:t,size:"30",fullname:"false",bold:"true"}))),r.a.createElement(j.a.Item,{className:"align-self-center"},r.a.createElement(O.a,{id:"custom-drop-down-btn",title:"",className:"mr-4",menuAlign:"right"},r.a.createElement(w.a.Item,{as:y.b,to:e.profilelink,onClick:function(){return a()}},r.a.createElement(S,{user:t,size:"60",fullname:"true",bold:"true"})),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{as:y.b,to:"/",onClick:function(){n((function(){return i.auth().signOut()}))},className:"p-0"},r.a.createElement(L.a,{fontSize:"1.5em",className:"mx-4"}),r.a.createElement("span",null,"Log Out"),r.a.createElement("div",{style:{width:"20em"}}))))))},U=a(22),F=a(109),T=a(46),B=a(161),A=function(e){var t,a=e.width,n=e.height,c=e.index,l=e.userID,i=e.photo,o=e.onClick,u=e.className;return t="true"===e.useStoragePath?i:"".concat(l,"/").concat(i.fileName),r.a.createElement("div",{key:c,className:u,style:{display:"inline-block",position:"relative",width:"".concat(a),height:"0px",paddingBottom:"".concat(n)}},r.a.createElement(s.b,{alt:"",id:c,storagePath:t,style:{position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%",objectFit:"cover"},onClick:o}))};function H(e,t,a){var n=e.currentTarget,r=t;if(r&&("profile"===r.id&&(r.style.backgroundColor="#e9ecef"),r.style.borderBottom="3px solid transparent",r.style.color=""),n){if(a(n),n.style.color="dodgerblue","profile"===n.id)return void(n.style.backgroundColor="lightblue");n.style.borderBottom="3px solid dodgerblue"}}function Y(e){var t=e.e.target.value,a=Object(u.a)({},e.state);return a.text=t,e.setState(a),t}function M(e){var t=Object(u.a)({},e.state);t.isPhoto=!0,t.photoURL="".concat(e.userID,"/").concat(e.file.name),e.setState(t)}function W(e){e.state.photoURL;!function(e,t,a){var n=Object(u.a)({},e);n.isPhoto=!1,n.photoURL="",t(n),a&&a()}(e.state,e.setState,e.sideEffect)}function q(e,t){e.shiftKey||"Enter"===e.code&&(e.preventDefault(),t())}var K=function(e){var t=Object(U.i)().url,a=e.userID,c=e.photos,l=e.openFileInput,s=e.isCurrentUser,i=e.photosLinkRef,o=e.activeLink,u=e.setActiveLink;return Object(n.useEffect)((function(){H({currentTarget:i.current},o,u)}),[]),r.a.createElement(B.a,{variant:"light",className:"w-100"},r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,r.a.createElement(y.b,{to:t,className:"text-body"},r.a.createElement("b",null,"Photos")),s&&r.a.createElement(p.a,{variant:"link",style:{textDecoration:"none",float:"right"},onClick:l},r.a.createElement("b",null,"Add Photos"))),r.a.createElement(f.a,{className:"w-100"},c.map((function(e,t){return r.a.createElement(E.a,{key:t,xs:6,sm:4,md:3,lg:2,className:"px-1"},r.a.createElement(y.b,{to:"/photo/".concat(a,"/").concat(t)},r.a.createElement(A,{width:"100%",height:"100%",userID:a,photo:e,index:t,className:"m-2"})))})))))},V=a(160),G=(a(140),function(e){var t=e.user,a="".concat(t.firstname," ").concat(t.lastname),c=Object(n.useState)(!1),l=Object(m.a)(c,2),i=l[0],o=l[1],u=Object(U.f)();function d(){u.push(t.index&&t.index>0?"/".concat(t.lastname,".").concat(t.firstname,".").concat(t.index):"/".concat(t.lastname,".").concat(t.firstname))}return r.a.createElement(E.a,{xs:6,className:"my-3"},r.a.createElement(V.a,{placement:"auto",show:i,overlay:r.a.createElement("div",{id:"popup-card",onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},onClick:d},r.a.createElement("div",{className:"m-3"},r.a.createElement(R,{size:"120",url:t.profilePictureURL})),r.a.createElement("h4",{id:"name-tag"},r.a.createElement("b",null,a)))},r.a.createElement(s.b,{storagePath:t.profilePictureURL,width:"90px",height:"90px",alt:"",id:"profile-picture",onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},onClick:d})),r.a.createElement("b",{className:"ml-3",onClick:d},a))}),J=function(e){var t,a=Object(U.i)().url,c=e.users,l=e.friendsLinkRef,s=e.activeLink,i=e.setActiveLink;return Object(n.useEffect)((function(){H({currentTarget:l.current},s,i)}),[]),t=c||[],r.a.createElement(B.a,null,r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,r.a.createElement(y.b,{to:a,className:"text-body"},r.a.createElement("b",null,"Friends"))),r.a.createElement(f.a,null,t.map((function(e,t){return r.a.createElement(G,{user:e,key:t})})))))},Q=a(54),X=a(89),Z=function(e){var t=e.show,a=e.setShow,c=e.updateDatabase,l=e.userID,i=Object(s.h)(),o=Object(n.useRef)(null);return Object(n.useEffect)((function(){t&&(o.current.click(),a(!1))}),[t]),r.a.createElement("input",{type:"file",ref:o,style:{display:"none"},onChange:function(e){e.preventDefault();var t=e.target.files[0];i.ref(l).child(t.name).put(t).then((function(){return c(t)}))}})},$=a(47),_=a(92),ee=(a(142),function(e){var t=e.show,a=e.onClose,c=e.user,l=e.userID,i=e.setText,o=e.isYoutubeBtnPressed,d=e.placeholder,f={userID:"".concat(l),text:"",isPhoto:!1,photoURL:"",isYoutube:!1,youtubeURL:"",likes:[]},E=Object(n.useState)(f),b=Object(m.a)(E,2),h=b[0],v=b[1];var g,x,j=Object(n.useState)(!1),O=Object(m.a)(j,2),w=O[0],y=O[1];w?(g="primary",x=!1):(g="secondary",x=!0);var N=Object(n.useState)(!1),I=Object(m.a)(N,2),D=I[0],L=I[1];var C=Object(s.h)();function P(){""!==h.text||h.isYoutube||y(!1)}var R=Object(s.d)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{show:t,onHide:a},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement("div",{className:"w-100 d-flex justify-content-center"},r.a.createElement(k.a.Title,null,r.a.createElement("b",null,"Create Post")))),r.a.createElement(k.a.Body,null,r.a.createElement(S,{user:c,size:"45",fullname:"true",bold:"true"}),r.a.createElement("div",{className:"mt-2",id:"scrolling-container"},r.a.createElement("textarea",{type:"text",onChange:function(e){!function(e){y(""!==e);i(e)}(Y({e:e,state:h,setState:v}))},className:"w-100 mt-2",placeholder:o&&!h.isYoutube?"For adding YouTube video copy link here ...":d,rows:"3",id:"textarea",value:h.text}),h.isPhoto&&r.a.createElement("div",{className:"mb-2",id:"img-container"},r.a.createElement(s.b,{alt:"",storagePath:"/".concat(h.photoURL),className:"w-100",id:"img-to-post"}),r.a.createElement("div",{id:"close-btn-container"},r.a.createElement(X.a,{onClick:function(){W({state:h,setState:v,user:c,userID:l,storage:C,sideEffect:P})}}))),h.isYoutube&&r.a.createElement("div",{className:"mb-2",id:"video-container"},r.a.createElement("iframe",{src:h.youtubeURL,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope",allowfullscreen:!0}),r.a.createElement("div",{id:"close-btn-container"},r.a.createElement(X.a,{onClick:function(){var e=Object(u.a)({},h);e.isYoutube=!1,e.youtubeURL="",v(e),""!==h.text||h.isPhoto||y(!1)}})))),r.a.createElement("div",{className:"w-100 my-2",id:"add-to-post"},r.a.createElement("b",null,"Add to your post"),r.a.createElement(p.a,{className:"ml-2",variant:"light",size:"sm",id:"add-photo-btn",onClick:function(){var e=h.text,t="https://www.youtube.com/watch?v=".length;if(e.startsWith("https://www.youtube.com/watch?v=")){var a=e.slice(t),n="https://www.youtube.com/embed/".concat(a),r=Object(u.a)({},h);r.isYoutube=!0,r.youtubeURL=n,r.text="",v(r),y(!0)}},disabled:h.isPhoto||h.isYoutube},r.a.createElement($.b,{size:"26px",className:"text-danger"})),r.a.createElement(p.a,{className:"ml-2",variant:"light",size:"sm",id:"add-photo-btn",onClick:function(){return L(!0)},disabled:h.isPhoto||h.isYoutube},r.a.createElement(T.a,{size:"26px",className:"text-success"}))),r.a.createElement(p.a,{variant:g,className:"w-100 mt-3",disabled:x,onClick:function(){R.collection("posts").add(Object(u.a)(Object(u.a)({},h),{},{timestamp:_.a.firestore.FieldValue.serverTimestamp()})).then((function(e){!function(e){var t;t=c.posts?Object(Q.a)(c.posts):[];t.unshift(e),R.collection("users").doc(l).update({posts:t})}(e.id),v(f),i(""),a()}))}},r.a.createElement("b",null,"Post")))),r.a.createElement(Z,{show:D,setShow:L,updateDatabase:function(e){M({state:h,setState:v,file:e,userID:l}),y(!0)},userID:l}))}),te=(a(143),["user","userID","firstname","isCurrentUser"]),ae=function(e){var t=e.user,a=e.userID,c=e.firstname,l=e.isCurrentUser,s=Object(C.a)(e,te),i="What's on your mind ".concat(t.firstname,"?"),o="Write something to ".concat(c),u=Object(n.useState)(!1),d=Object(m.a)(u,2),f=d[0],E=d[1],b=Object(n.useState)(!1),h=Object(m.a)(b,2),v=h[0],g=h[1],k=Object(n.useState)(""),x=Object(m.a)(k,2),j=x[0],O=x[1],w=function(){return E(!0)};function y(){return l?i:o}return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,Object.assign({id:"card"},s),r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,r.a.createElement(R,{size:"40",url:t.profilePictureURL}),r.a.createElement("div",{id:"text-div",className:"p-2 w-75 text-dark",onClick:w},function(){var e=j.length;if(0===e)return y();var t=j.slice(0,55);return e>55&&(t+="..."),t}())),r.a.createElement("hr",null),r.a.createElement(p.a,{variant:"light",id:"youtube-btn",size:"sm",onClick:function(){g(!0),E(!0)}},r.a.createElement($.b,{size:"28px",className:"text-danger"}),"YouTube"),r.a.createElement(p.a,{variant:"light",id:"photo-btn",size:"sm",onClick:w},r.a.createElement(T.a,{size:"28px",className:"text-success"}),"Photo"))),r.a.createElement(ee,{show:f,onClose:function(){E(!1),g(!1)},user:t,userID:a,setText:O,isYoutubeBtnPressed:v,placeholder:y()}))},ne=["user","userID","photosLinkRef","activeLink","setActiveLink"],re=function(e){var t=e.user,a=e.userID,n=e.photosLinkRef,c=e.activeLink,l=e.setActiveLink,s=Object(C.a)(e,ne),i=t.photos,o="/".concat(t.lastname,".").concat(t.firstname,"/Photos");function u(){H({currentTarget:n.current},c,l)}return r.a.createElement(B.a,s,r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,r.a.createElement(y.b,{to:o,className:"text-body",onClick:u},r.a.createElement("b",null,"Photos"))),r.a.createElement(f.a,null,i.map((function(e,t){return t<9&&r.a.createElement(E.a,{key:t,xs:4,className:"m-0",style:{paddingLeft:"3px",paddingRight:"3px",paddingTop:"0",paddingBottom:"0"}},r.a.createElement(y.b,{to:"photo/".concat(a,"/").concat(t),className:"text-body",onClick:u},r.a.createElement(A,{photo:e,userID:a,index:t,width:"100%",height:"100%"})))})))))},ce=["user","userID","users","friendsLinkRef","activeLink","setActiveLink"],le=function(e){var t=e.user,a=(e.userID,e.users),n=e.friendsLinkRef,c=e.activeLink,l=e.setActiveLink,s=Object(C.a)(e,ce),i=t.index&&t.index>0?"/".concat(t.lastname,".").concat(t.firstname,".").concat(t.index,"/Friends"):"/".concat(t.lastname,".").concat(t.firstname,"/Friends");function o(){H({currentTarget:n.current},c,l)}return r.a.createElement(B.a,s,r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,r.a.createElement(y.b,{to:i,className:"text-body",onClick:o},r.a.createElement("b",null,"Friends"))),r.a.createElement(B.a.Subtitle,{className:"text-muted"},a.length," friends"),r.a.createElement(f.a,null,a.map((function(e,t){var a=e.index&&e.index>0?"/".concat(e.lastname,".").concat(e.firstname,".").concat(e.index):"/".concat(e.lastname,".").concat(e.firstname),n="".concat(e.firstname," ").concat(e.lastname);return t<9&&r.a.createElement(E.a,{key:t,xs:4,className:"m-0",style:{paddingLeft:"3px",paddingRight:"3px",paddingTop:"0",paddingBottom:"0"}},r.a.createElement(y.b,{to:a,className:"text-body",onClick:o},r.a.createElement(A,{photo:e.profilePictureURL,width:"100%",height:"100%",useStoragePath:"true"}),r.a.createElement("div",{className:"w-100",style:{height:"2.7em"}},r.a.createElement("p",{style:{fontSize:"0.9em"}},r.a.createElement("b",null,n)))))})))))},se=function(e){var t=e.users,a="modal"===e.variant;return r.a.createElement(E.a,{xs:"auto",className:"overflow-auto mh-100"},r.a.createElement("div",{id:"col-1",className:"m-2"},t.map((function(e,t){var n="/".concat(e.lastname,".").concat(e.firstname);return e.index&&e.index>0&&(n+=".".concat(e.index)),r.a.createElement(y.b,{key:t,to:n,className:a?"p-1 text-dark":"nav-link text-dark"},r.a.createElement(S,{user:e,fullname:"true",size:a?"40":"60",bold:"true",className:"pb-1"}))}))))},ie=function(e){var t=e.show,a=e.onHide,n=e.users,c=e.likes.map((function(e){return n.find((function(t){return t.userID===e}))}));return r.a.createElement(k.a,{show:t,onHide:a},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,{className:"text-primary"},"All")),r.a.createElement(k.a.Body,{className:"overflow-hidden"},r.a.createElement(se,{users:c,variant:"modal"})))},oe=["comment","users"],ue=function(e){var t=e.comment,a=e.users,n=Object(C.a)(e,oe),c=t.userID,l=a.find((function(e){return e.userID===c}));return r.a.createElement(f.a,n,r.a.createElement(E.a,{xs:1},r.a.createElement(R,{size:"26",url:l.profilePictureURL})),r.a.createElement(E.a,{xs:11},r.a.createElement("p",null,r.a.createElement("b",null,"".concat(l.firstname," ").concat(l.lastname," ")),t.text),t.isPhoto&&r.a.createElement(s.b,{alt:"",storagePath:t.photoURL,style:{width:"30%"}})))},me=["onChange","onKeyPress","value","welcomeText"],de=function(e){var t=e.onChange,a=e.onKeyPress,c=e.value,l=e.welcomeText,s=Object(C.a)(e,me),i=Object(n.useState)({outline:"none",border:"none",resize:"none",overflowY:"none",background:"#e9ecef",padding:"0",lineHeight:"0.8em"}),o=Object(m.a)(i,2),d=o[0],f=o[1],E=Object(n.useState)(null),p=Object(m.a)(E,2),b=p[0],h=p[1];function v(e){var t=Object(u.a)({},d);t.height="auto",f(t)}return Object(n.useEffect)((function(){if("auto"===d.height){var e=Object(u.a)({},d);e.height=b.scrollHeight+"px",f(e)}}),[d.height]),Object(n.useEffect)((function(){""===c&&b&&v()}),[c]),r.a.createElement("textarea",Object.assign({type:"text",onChange:function(e){t(e);var a=e.target;h(a),v()},onKeyPress:a,placeholder:l,rows:"1",style:d,value:c},s))},fe=(a(144),function(e){var t=e.user,a=e.post,c=e.updatePost,l=e.users,i={userID:"".concat(t.userID),text:"",isPhoto:!1,photoURL:""},o=Object(n.useState)(i),d=Object(m.a)(o,2),b=d[0],h=d[1],v=Object(n.useState)(!1),g=Object(m.a)(v,2),k=g[0],x=g[1];var j=Object(s.h)();function O(){var e=Object(u.a)({},a);a.comments||(e.comments=[]),e.comments.push(b),c(e),h(i)}return r.a.createElement(E.a,null,r.a.createElement("hr",null),a.comments&&a.comments.map((function(e,t){return r.a.createElement(ue,{key:t,comment:e,users:l,className:"mb-2"})})),r.a.createElement(f.a,null,r.a.createElement(E.a,{xs:1},r.a.createElement(R,{size:"36",url:t.profilePictureURL})),r.a.createElement(E.a,{xs:11},r.a.createElement(f.a,{style:{background:"#e9ecef",borderRadius:"18px",marginLeft:"5px"}},r.a.createElement(E.a,{xs:10,className:"align-self-center"},r.a.createElement(de,{onChange:function(e){Y({e:e,state:b,setState:h})},onKeyPress:function(e){return q(e,O)},welcomeText:"Write a comment ...",value:b.text,className:"w-100 mt-2"})),r.a.createElement(E.a,{xs:2},r.a.createElement(f.a,{className:"justify-content-end align-items-baseline"},r.a.createElement(p.a,{variant:"light",size:"sm",id:"add-photo-btn",onClick:function(){return x(!0)},disabled:b.isPhoto},r.a.createElement(D.b,{size:"23px",className:"text-muted"}))))),b.isPhoto&&r.a.createElement("div",{id:"comment-img-container"},r.a.createElement(s.b,{alt:"",storagePath:"/".concat(b.photoURL),id:"img-to-comment"}),r.a.createElement("div",{id:"close-btn-container"},r.a.createElement(X.a,{onClick:function(){W({state:b,setState:h,user:t,userID:t.userID,storage:j})}}))))),r.a.createElement(Z,{show:k,setShow:x,updateDatabase:function(e){M({state:b,setState:h,file:e,userID:t.userID})},userID:t.userID}))}),Ee=a(108),pe=["post","postID","users","userID"],be=function(e){var t=e.post,a=e.postID,c=e.users,l=e.userID,i=Object(C.a)(e,pe),o=Object(n.useState)(!1),u=Object(m.a)(o,2),d=u[0],f=u[1],E=Object(n.useState)(!1),b=Object(m.a)(E,2),h=b[0],v=b[1];var g=Object(s.d)();if(!t)return r.a.createElement(r.a.Fragment,null);var k=c.find((function(e){return e.userID===t.userID})),x=c.find((function(e){return e.userID===l})),j=g.collection("posts").doc(a);function O(e){j.update(e)}function w(){return!(-1===t.likes.indexOf(l))}return r.a.createElement(B.a,i,r.a.createElement(B.a.Header,null,r.a.createElement(S,{user:k,size:"40",fullname:"true",bold:"true"}),r.a.createElement("span",{style:{fontSize:"12px"}},t.timestamp&&t.timestamp.toDate().toLocaleString())),r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Text,null,t.text),t.isPhoto&&r.a.createElement(s.b,{alt:"",storagePath:t.photoURL,className:"w-100"}),t.isYoutube&&r.a.createElement("div",{id:"video-container"},r.a.createElement("iframe",{src:t.youtubeURL,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope",allowFullScreen:!0}))),r.a.createElement(B.a.Footer,null,r.a.createElement(p.a,{variant:"link",className:"text-muted",onClick:function(){t.likes.length>0&&f(!0)},style:{boxShadow:"none"}},r.a.createElement($.a,{className:"bg-primary text-light mr-2",style:{borderRadius:"50%"}}),t.likes.length),r.a.createElement(p.a,{variant:"link",className:"text-muted float-right",onClick:function(){return v(!h)},style:{boxShadow:"none"}},"comments(",t.comments?t.comments.length:0,")"),r.a.createElement("hr",null),r.a.createElement(p.a,{variant:"light",className:"".concat(w()?"text-primary":"text-muted"," w-50"),onClick:function(){var e=t.likes,a=e.indexOf(l);-1===a?e.push(l):e.splice(a,1),O({likes:e})}},w()?r.a.createElement($.a,{size:"22px"}):r.a.createElement($.c,{size:"22px"}),r.a.createElement("b",null," Like")),r.a.createElement(p.a,{variant:"light",className:"text-muted w-50",onClick:function(){v(!0)}},r.a.createElement(Ee.a,{size:"22px"}),r.a.createElement("b",null," Comment")),h&&r.a.createElement(fe,{user:x,post:t,updatePost:O,users:c})),r.a.createElement(ie,{show:d,onHide:function(){f(!1)},users:c,likes:t.likes}))},he=["postID","userID"],ve=function(e){var t=e.postID,a=e.userID,n=Object(C.a)(e,he),c={userID:"".concat(a),text:"",isPhoto:!1,photoURL:"",likes:[]},l=Object(s.d)().collection("posts").doc(t),i=Object(s.f)(l,{initialData:c}).data;return r.a.createElement(be,Object.assign({post:i,postID:t,userID:a},n))},ge=function(e){var t=e.userID,a=e.users,c=e.currentUser,l=e.isCurrentUser,s=e.postsLinkRef,i=e.friendsLinkRef,o=e.photosLinkRef,u=e.activeLink,m=e.setActiveLink,d=a.find((function(e){return e.userID===t}));return Object(n.useEffect)((function(){H({currentTarget:s.current},u,m)}),[]),r.a.createElement(f.a,{className:"w-100",style:{height:"900px"}},r.a.createElement(E.a,{sm:5,className:"mh-100 overflow-hidden"},r.a.createElement(re,{user:d,userID:t,photosLinkRef:o,activeLink:u,setActiveLink:m,className:"my-2"}),r.a.createElement(le,{user:d,userID:t,users:a,friendsLinkRef:i,activeLink:u,setActiveLink:m,className:"my-2"})),r.a.createElement(E.a,{sm:7,className:"mh-100 overflow-auto hide-scrollbar bg-200"},r.a.createElement(ae,{user:c,userID:c.userID,firstname:d.firstname,isCurrentUser:l,className:"mt-2"}),d.posts.map((function(e,n){return console.log("postID: ",e),r.a.createElement(ve,{key:n,postID:e,userID:t,users:a,className:"mx-auto my-2"})}))))},ke=function(e){var t=Object(U.h)().itemId,a=e.photos,n=e.userID,c=e.openFileInput,l=e.users,s=e.isCurrentUser,i=e.photosLinkRef,o=e.friendsLinkRef,u=e.postsLinkRef,m=e.activeLink,d=e.setActiveLink;return"Photos"===t?r.a.createElement(K,{photos:a,userID:n,openFileInput:c,isCurrentUser:s,photosLinkRef:i,activeLink:m,setActiveLink:d}):"Friends"===t?r.a.createElement(J,{users:l,friendsLinkRef:o,activeLink:m,setActiveLink:d}):r.a.createElement(ge,{userID:n,users:l,currentUser:l.find((function(e){return e.userID===n})),isCurrentUser:s,photosLinkRef:i,friendsLinkRef:o,postsLinkRef:u,activeLink:m,setActiveLink:d})},xe=function(e){var t=e.show,a=e.removeCoverPhoto,n=e.closeDlg;return r.a.createElement(k.a,{show:t,onHide:n},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,null,r.a.createElement("strong",{className:"fs-2"},"Remove Cover Photo"))),r.a.createElement(k.a.Body,null,r.a.createElement("div",null,"Do you really want to remove the cover photo?")),r.a.createElement(k.a.Footer,null,r.a.createElement(p.a,{variant:"link",style:{textDecoration:"none"},onClick:n},r.a.createElement("b",null,"Cancel")),r.a.createElement(p.a,{variant:"primary",onClick:a},r.a.createElement("b",null,"Submit"))))},je=function(e){var t=e.show,a=e.onHide,n=e.onPhotoClick,c=e.userID,l=e.photos;return r.a.createElement(k.a,{show:t,onHide:a,scrollable:!0},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,{style:{marginLeft:"35%"}},r.a.createElement("strong",null,"Select Photo"))),r.a.createElement(k.a.Body,null,l.map((function(e,t){return r.a.createElement(s.b,{className:"m-1",width:"31%",height:"90px",alt:"",key:t,id:t,storagePath:"".concat(c,"/").concat(e.fileName),style:{objectFit:"cover"},onClick:n})}))))},Oe=function(e){var t=e.show,a=e.onHide,n=e.onBtnClick,c=e.onPhotoClick,l=e.userID,s=e.photos;return r.a.createElement(k.a,{show:t,onHide:a,size:"lg",scrollable:!0},r.a.createElement(k.a.Header,{closeButton:!0},r.a.createElement(k.a.Title,{style:{margin:"auto"}},r.a.createElement("strong",null,"Update Profile Picture"))),r.a.createElement(k.a.Body,null,r.a.createElement(p.a,{size:"sm",variant:"outline-primary",className:"w-50 m-2 mb-3",onClick:n},r.a.createElement("b",null,"+ Upload Photo")),r.a.createElement("br",null),r.a.createElement("b",null,"Suggested Photos"),r.a.createElement(f.a,{className:"m-1"},s.map((function(e,t){return r.a.createElement(A,{key:t,width:"15%",height:"15%",userID:l,photo:e,index:t,onClick:c,className:"m-1"})})))))},we=(a(145),function(e){var t=Object(U.h)().userName,a=e.users,c=e.userID,l=e.linkRef,i=e.activeMainLink,u=e.setActiveMainLink,d=e.dimension,b=function(){var e=a.map((function(e){return e.index&&0!==e.index?"".concat(e.lastname,".").concat(e.firstname,".").concat(e.index):"".concat(e.lastname,".").concat(e.firstname)})).indexOf(t),n=a[e];return n},h=function(){return b().userID},v=c===h(),g=b(),k=g.firstname,N=g.lastname,I=g.profilePictureURL,C=g.backgroundPictureURL,P=g.photos,S=Object(s.d)().collection("users").doc(h()),z=Object(n.useState)(!1),B=Object(m.a)(z,2),A=B[0],Y=B[1],M=Object(n.useState)(!1),W=Object(m.a)(M,2),q=W[0],K=W[1],V=Object(n.useState)(!1),G=Object(m.a)(V,2),J=G[0],Q=G[1],X=Object(n.useState)(!1),$=Object(m.a)(X,2),_=$[0],ee=$[1],te=Object(n.useState)("backgroundPictureURL"),ae=Object(m.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(null),le=Object(m.a)(ce,2),se=le[0],ie=le[1],oe=Object(n.useRef)(null),ue=Object(n.useRef)(null),me=Object(n.useRef)(null),de=Object(U.i)(),fe=de.url,Ee=de.path;function pe(e){re(e),ee(!0)}function be(e){switch(e){case"3":Y(!0);break;case"2":pe("backgroundPictureURL");break;case"1":K(!0);break;default:return}}function he(){Y(!1)}function ve(){K(!1)}function we(){Q(!1)}function ye(e,t){var a=Number(e.target.id),n=P[a],r="".concat(c,"/").concat(n.fileName);return S.update(Object(o.a)({},t,r))}return Object(n.useEffect)((function(){H({currentTarget:l.current},i,u)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{className:"justify-content-center",id:"grad"},r.a.createElement(E.a,{id:"profile-col",className:"m-0 p-0"},r.a.createElement("div",{id:"background-pic-container"},r.a.createElement(s.b,{id:"background-pic",storagePath:C,alt:""}),v&&r.a.createElement(O.a,{variant:"light",id:"background-pic-button",title:r.a.createElement("b",null,r.a.createElement(D.b,{className:"mr-1",size:"20px"}),d.width>640?"Edit Cover Photo":""),size:"sm"},r.a.createElement(w.a.Item,{eventKey:"1",onSelect:be},r.a.createElement(T.a,{size:"20px",className:"mr-2"}),"Select Photo"),r.a.createElement(w.a.Item,{eventKey:"2",onSelect:be},r.a.createElement(L.b,{size:"20px",className:"mr-2"}),"Upload Photo"),r.a.createElement(w.a.Divider,null),r.a.createElement(w.a.Item,{eventKey:"3",onSelect:be},r.a.createElement(F.a,{size:"20px",className:"mr-2"})," Remove")),r.a.createElement("div",{id:"profile-pic-container"},r.a.createElement(R,{size:"180",url:I}),v&&r.a.createElement(p.a,{variant:"light",id:"profile-pic-button",onClick:function(){return Q(!0)}},r.a.createElement(D.b,{size:"19px"})))),r.a.createElement("h2",{className:"text-center mt-5"},r.a.createElement("b",null,k," ",N)),r.a.createElement("hr",null),r.a.createElement(x.a,{bg:"light"},r.a.createElement(j.a,null,r.a.createElement(j.a.Item,null,r.a.createElement(y.b,{key:"1",to:"".concat(fe,"/Posts"),className:"nav-link mx-2",ref:me},r.a.createElement("b",null,"Posts"))),r.a.createElement(j.a.Item,null,r.a.createElement(y.b,{key:"2",to:"".concat(fe,"/Friends"),className:"nav-link mx-2",ref:ue},r.a.createElement("b",null,"Friends")," ",a.length)),r.a.createElement(j.a.Item,null,r.a.createElement(y.b,{key:"3",to:"".concat(fe,"/Photos"),className:"nav-link mx-2",ref:oe},r.a.createElement("b",null,"Photos"))))))),r.a.createElement(f.a,{className:"justify-content-center"},r.a.createElement(E.a,{id:"profile-col"},r.a.createElement(U.c,null,r.a.createElement(U.a,{path:"".concat(Ee,"/:itemId")},r.a.createElement(ke,{photos:P,userID:h(),users:a,openFileInput:function(){return pe("")},isCurrentUser:v,photosLinkRef:oe,friendsLinkRef:ue,postsLinkRef:me,activeLink:se,setActiveLink:ie})),r.a.createElement(U.a,{path:Ee},r.a.createElement(ge,{userID:h(),users:a,currentUser:a.find((function(e){return e.userID===c})),isCurrentUser:v,photosLinkRef:oe,friendsLinkRef:ue,postsLinkRef:me,activeLink:se,setActiveLink:ie}))))),r.a.createElement(xe,{show:A,removeCoverPhoto:function(){return he(),S.update({backgroundPictureURL:"background-server.jpg"})},closeDlg:he}),r.a.createElement(je,{show:q,onHide:ve,onPhotoClick:function(e){ve(),ye(e,"backgroundPictureURL")},userID:c,photos:P}),r.a.createElement(Oe,{show:J,onHide:we,onBtnClick:function(){we(),pe("profilePictureURL")},onPhotoClick:function(e){we(),ye(e,"profilePictureURL")},userID:c,photos:P}),r.a.createElement(Z,{show:_,setShow:ee,updateDatabase:function(e){var t={fileName:e.name};-1===P.map((function(e){return e.fileName})).indexOf(e.name)&&P.push(t);var a={photos:P};return""!==ne&&(a[ne]="".concat(c,"/").concat(e.name)),S.update(a)},userID:c}))}),ye=a(159),Ne=function(){var e=Object(U.h)(),t=e.userID,a=e.n,c=Object(s.d)().collection("users").doc(t),l=Object(s.f)(c,{initialData:{photos:[]}}).data.photos,i=Object(n.useState)(Number(a)),o=Object(m.a)(i,2),u=o[0],d=o[1],p=Object(U.f)(),b=Object(U.g)();Object(n.useEffect)((function(){var e=b.pathname.split("/"),t=Number(e.pop());d(t)}),[b]);return r.a.createElement(f.a,{className:"bg-200",style:{position:"relative",top:"50px",height:"89vh"}},r.a.createElement(E.a,{md:9,className:"h-100",style:{backgroundColor:"black"}},r.a.createElement(ye.a,{className:"w-100 h-100",interval:null,indicators:!1,activeIndex:u,onSelect:function(e,a){p.push("/photo/".concat(t,"/").concat(e))}},l.map((function(e,a){return r.a.createElement(ye.a.Item,{key:a,style:{width:"100%",height:"89vh"}},r.a.createElement(s.b,{storagePath:"".concat(t,"/").concat(e.fileName),alt:"",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%",maxWidth:"600px",height:"100%",objectFit:"contain"}}))})))),r.a.createElement(E.a,null))},Ie=function(e){var t=e.user,a=e.userID,n=e.posts,c=e.users;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,{user:t,userID:a,isCurrentUser:!0,className:"mw-100 m-auto p-0",style:{width:"450px"}}),n.map((function(e,t){return r.a.createElement(be,{key:t,post:e,postID:e.postID,users:c,userID:a,className:"mw-100 mx-auto my-2",style:{width:"450px"}})})))},De=(a(146),function(e){return r.a.createElement(j.a,{className:"flex-column mt-3",id:"left-navbar"},r.a.createElement("div",{className:"navitem"},r.a.createElement(j.a.Link,{as:y.b,to:e.profileLink,className:"text-dark flex-column justify-content-center"},r.a.createElement(S,{user:e.user,size:"26",fullname:"true"}))),r.a.createElement("div",{className:"navitem"},r.a.createElement(j.a.Link,{as:y.b,to:"/friends/list",className:"text-dark"},r.a.createElement(I.b,{size:"26px",className:"text-info mr-2"}),r.a.createElement("div",{className:"d-inline"},"Friends"))),r.a.createElement("div",{className:"navitem"},r.a.createElement(j.a.Link,{as:y.b,to:"/watch",className:"text-dark"},r.a.createElement(D.a,{size:"26px",className:"text-info mr-2"}),r.a.createElement("div",{className:"d-inline"},"Watch"))))}),Le=function(e){var t=e.posts,a=e.users,n=e.userID,c=t.filter((function(e){return e.isYoutube}));return r.a.createElement(r.a.Fragment,null,c.map((function(e,t){return r.a.createElement(be,{key:t,post:e,postID:e.postID,users:a,userID:n,className:"mw-100 mx-auto my-2",style:{width:"550px"}})})))},Ce=a(110),Pe=["message","userID"],Re=function(e){var t=e.message,a=e.userID,n=Object(C.a)(e,Pe);return r.a.createElement(f.a,Object.assign({},n,{className:t.sender===a?"justify-content-end":"justify-content-start"}),r.a.createElement("div",{style:{fontSize:"12px",margin:"auto"}},t.timestamp&&t.timestamp.toDate().toLocaleString()),t.isPhoto&&r.a.createElement("div",{className:"w-100 p-3"},r.a.createElement(s.b,{alt:"",storagePath:t.photoURL,style:{display:"block",width:"50%",margin:"auto"}})),r.a.createElement("p",{style:t.sender===a?{width:"75%",backgroundColor:"dodgerblue",color:"white",padding:"16px",borderRadius:"16px"}:{width:"75%",backgroundColor:"lightgray",color:"black",padding:"16px",borderRadius:"16px"}},t.text))},Se=function(e){var t=e.conversation,a=e.userID;return r.a.createElement(E.a,null,t.map((function(e,t){return r.a.createElement(Re,{key:t,message:e,userID:a})})))},ze=function(e){var t=e.sender,a=e.recipient;console.log("sender: ",t),console.log("recipient: ",a);var c=Object(n.useState)([]),l=Object(m.a)(c,2),i=l[0],o=l[1],u=Object(s.d)().collection("messages"),d=Object(s.e)(u.where("sender","==",t).where("recipient","==",a).orderBy("timestamp"),{idField:"messageID"}),f=d.status,E=d.data,p=Object(s.e)(u.where("sender","==",a).where("recipient","==",t).orderBy("timestamp"),{idField:"messageID"}),b=p.status,h=p.data;return Object(n.useEffect)((function(){"success"===f&&"success"===b&&o(function(e,t){var a,n=[].concat(Object(Q.a)(e),Object(Q.a)(t)),r=-1;n.forEach((function(e,t){e.timestamp||(r=t)})),-1!==r&&(a=n.splice(r,1));var c=n.sort((function(e,t){return e.timestamp.toDate()-t.timestamp.toDate()}));return a&&c.push(a[0]),c}(h,E))}),[f,b,h,E]),r.a.createElement(Se,{conversation:i,userID:t})},Ue=(a(147),function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(null),o=Object(m.a)(i,2),d=o[0],b=o[1],h=Object(n.useState)(null),v=Object(m.a)(h,2),g=v[0],k=v[1],x=e.user,O=e.userID,w=e.users,y={sender:"".concat(O),recipient:"",text:"",isPhoto:!1,photoURL:"",isRead:!1},N=Object(n.useState)(y),I=Object(m.a)(N,2),L=I[0],C=I[1];function P(e){if((e||!d)&&(!d||e.userID===d.userID)){var t;l(!0),t=e?e.userID:"";var a=Object(u.a)({},L);a.recipient=t,C(a),b(e)}}var R=Object(s.h)();var z=Object(n.useRef)(null),U=Object(n.useState)(""),F=Object(m.a)(U,2),A=F[0],H=F[1];function K(){var e;e=L,G.collection("messages").add(Object(u.a)(Object(u.a)({},e),{},{timestamp:_.a.firestore.FieldValue.serverTimestamp()})).then((function(){C(y),H(z.current.scrollHeight)}))}Object(n.useEffect)((function(){z.current&&(z.current.scrollTop=A)}),[A]);var G=Object(s.d)();Object(n.useEffect)((function(){d&&c&&""===L.recipient&&P(d)}),[L]);var J=Object(n.useState)([]),$=Object(m.a)(J,2),ee=$[0],te=$[1],ae=G.collection("messages"),ne=Object(s.e)(ae.where("recipient","==",O).where("isRead","==",!1),{idField:"messageID"}),re=ne.status,ce=ne.data;return Object(n.useEffect)((function(){if("success"===re){var e=[];ce.forEach((function(t){var a=t.sender;-1===e.indexOf(a)&&e.push(a)})),te(e)}}),[re]),Object(n.useEffect)((function(){if(0!==ee.length){var e=ee.length-1,t=ee[e];P(w.find((function(e){return e.userID===t})))}}),[ee]),r.a.createElement(j.a,{className:"flex-column",style:{height:"100%",position:"relative",margitTop:"50px"}},r.a.createElement("h5",{className:"text-muted ml-3"},r.a.createElement("b",null,"Contacts")),w.map((function(e,t){return e.userID===O?r.a.createElement("div",{key:t}):r.a.createElement("div",{key:t,className:"navitem text-dark flex-row justify-content-center p-2",onClick:function(){return P(e)}},r.a.createElement(S,{size:"26",fullname:"true",bold:"false",user:e}))})),r.a.createElement(V.a,{placement:"left-start",show:c,overlay:r.a.createElement(B.a,{style:{width:"350px",height:"450px",background:"white",fontSize:"1.2rem",maxHeight:"".concat(window.innerHeight-70,"px")}},r.a.createElement(B.a.Body,null,r.a.createElement(B.a.Title,null,!d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,"New Message"),r.a.createElement("h6",null,"To:")),d&&r.a.createElement(S,{size:"26",fullname:"true",bold:"true",user:d}),r.a.createElement("div",{id:"close-btn-container"},r.a.createElement(X.a,{onClick:function(){var e;e=d,ce.filter((function(t){return t.sender===e.userID})).forEach((function(e){var t=e.messageID;ae.doc(t).update({isRead:!0})})),function(){var e=Object(Q.a)(ee);e.pop(),te(e)}(),l(!1),b(null)},className:"text-primary"}))),r.a.createElement("hr",null),d&&r.a.createElement(f.a,{className:"mh-100 overflow-auto",ref:z},r.a.createElement(ze,{sender:O,recipient:d.userID})),!d&&r.a.createElement(E.a,{className:"mh-100 overflow-auto"},w.map((function(e,t){return e.userID===O?r.a.createElement("div",{key:t}):r.a.createElement(f.a,{key:t,className:"text-dark justify-content-start p-2 container-choose-to",onClick:function(){return P(e)}},r.a.createElement(S,{size:"36",fullname:"true",bold:"false",user:e}))})))),d&&r.a.createElement(B.a.Footer,{className:"mt-5"},r.a.createElement(f.a,null,""===L.text&&r.a.createElement(E.a,{xs:2},r.a.createElement(p.a,{variant:"light",size:"sm",id:"add-photo-btn",onClick:function(){return k(!0)}},r.a.createElement(T.a,{size:"21px",className:"text-primary"}))),r.a.createElement(E.a,{xs:""===L.text?8:10,className:"align-self-center",style:{background:"#e9ecef",borderRadius:"18px"}},L.isPhoto&&r.a.createElement("div",{id:"comment-img-container"},r.a.createElement(s.b,{alt:"",storagePath:"/".concat(L.photoURL),id:"img-to-comment"}),r.a.createElement("div",{id:"close-btn-container"},r.a.createElement(X.a,{onClick:function(){W({state:L,setState:C,user:x,userID:O,storage:R})}}))),r.a.createElement(de,{onChange:function(e){Y({e:e,state:L,setState:C})},onKeyPress:function(e){return q(e,K)},welcomeText:"Aa",value:L.text,className:"w-100 mt-2"})),r.a.createElement(E.a,{xs:2},r.a.createElement(p.a,{variant:"light",size:"sm",id:"add-photo-btn",onClick:function(){(""!==L.text||L.isPhoto)&&K()}},r.a.createElement(D.c,{size:"23px",className:"text-primary"}))))),r.a.createElement(Z,{show:g,setShow:k,updateDatabase:function(e){M({state:L,setState:C,file:e,userID:O})},userID:x.userID}))},r.a.createElement("div",{style:{position:"absolute",background:"white",padding:"12px",borderRadius:"50%",bottom:"20px",right:"26px",boxShadow:"0px 5px 5px 0px lightgray"},onClick:function(){return P(null)}},r.a.createElement(Ce.a,{size:"22px"}))))}),Fe=(a(148),function(e){var t=e.dimension,a=e.user,c=e.userID,l=e.users,i=e.profileLink,o=e.className,u=e.isWatch,m=e.linkRef,d=e.activeLink,p=e.setActiveLink,b=Object(s.d)().collection("posts"),h=Object(s.e)(b.orderBy("timestamp","desc"),{idField:"postID"}),v=h.status,g=h.data;return Object(n.useEffect)((function(){H({currentTarget:m.current},d,p)}),[u]),"success"!==v?r.a.createElement("div",null,"...loading"):r.a.createElement(f.a,{className:"".concat(o," overflow-hidden vh-100")},t.width>992&&r.a.createElement(E.a,{className:"mh-100 overflow-auto"},r.a.createElement(De,{user:a,profileLink:i})),r.a.createElement(E.a,{sm:12,md:u?12:9,lg:u?9:6,className:"mh-100 overflow-auto hide-scrollbar"},!u&&r.a.createElement(Ie,{user:a,userID:c,posts:g,users:l}),u&&r.a.createElement(Le,{users:l,posts:g,userID:c})),t.width>768&&!u&&r.a.createElement(E.a,{className:"mh-100 overflow-auto"},r.a.createElement(Ue,{users:l,user:a,userID:c})))}),Te=(a(149),a(111)),Be=a.n(Te),Ae=function(e){var t=e.users,a=e.user,c=e.userID,l=e.linkRef,s=e.activeLink,i=e.setActiveLink,o=e.dimension,u="/friends/list"===Object(U.g)().pathname;return Object(n.useEffect)((function(){H({currentTarget:l.current},s,i)}),[]),r.a.createElement(f.a,{id:"friends-list",className:"overflow-hidden"},r.a.createElement(se,{users:t}),r.a.createElement(E.a,{id:"col-2",className:"overflow-auto mh-100 hide-scrollbar"},u?r.a.createElement("div",{className:"h-100 w-100 d-flex flex-column align-items-center justify-content-center"},r.a.createElement("img",{width:"200px",src:Be.a,alt:"cartoon of fakebook friends",className:"p-4"}),r.a.createElement("h5",{className:"text-muted"},r.a.createElement("b",null,"Select people's names to preview their profile."))):r.a.createElement("div",{id:"profile-container"},r.a.createElement(we,{user:a,userID:c,users:t,linkRef:l,activeMainLink:s,setActiveMainLink:i,dimension:o}))))},He=function(e){var t=e.profileLink,a=e.userID,c=e.userState,l=Object(s.d)().collection("users"),i=l.doc(a),o=Object(s.f)(i,{initialData:{firstname:"",lastname:"",profilePictureURL:"fakebook-avatar.jpeg",backgroundPictureURL:"background-server.jpg",photos:[],posts:[],isOnline:!1}}).data;function u(){return o&&o.index&&o.index>0?"".concat(t,".").concat(o.index):t}var d=Object(s.e)(l,{idField:"userID"}),f=d.status,E=d.data,p=Object(n.useState)(!1),b=Object(m.a)(p,2),h=b[0],g=b[1];Object(n.useEffect)((function(){o.isOnline||i.update({isOnline:!0})}),[]);var k=Object(n.useState)({height:window.innerHeight,width:window.innerWidth}),x=Object(m.a)(k,2),j=x[0],O=x[1];Object(n.useEffect)((function(){var e=function(e,t){var a;return function(){clearTimeout(a),a=setTimeout((function(){e(),clearTimeout(a)}),t)}}((function(){O({height:window.innerHeight,width:window.innerWidth})}),100);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}));var w={home:Object(n.useRef)(null),friends:Object(n.useRef)(null),watch:Object(n.useRef)(null),profile:Object(n.useRef)(null)},N=Object(n.useState)(null),I=Object(m.a)(N,2),D=I[0],L=I[1];return"loading"!==f&&o?r.a.createElement("div",{className:"bg-200 vw-100"},r.a.createElement(v.a,{className:"w-100 p-0",fluid:!0},r.a.createElement(y.a,null,r.a.createElement(z,{profilelink:u(),user:o,closeFriendsListPage:function(){g(!1)},setUserOffline:function(e){i.update({isOnline:!1}).then((function(){return e()}))},refs:w,dimension:j}),r.a.createElement(U.c,null,r.a.createElement(U.a,{path:"/friends/list",render:function(){return g(!0),r.a.createElement(Ae,{users:E,user:o,userID:a,linkRef:w.friends,activeLink:D,setActiveLink:L})}}),r.a.createElement(U.a,{path:"/photo/:userID/:n",render:function(){return r.a.createElement(Ne,null)}}),r.a.createElement(U.a,{path:"/watch",render:function(){return g(!1),r.a.createElement(Fe,{className:"pt-5",profileLink:u(),user:o,userID:a,users:E,dimension:j,isWatch:!0,linkRef:w.watch,activeLink:D,setActiveLink:L})}}),r.a.createElement(U.a,{path:"/:userName",render:function(){return h?r.a.createElement(Ae,{users:E,user:o,userID:a,dimension:j,linkRef:w.friends,activeLink:D,setActiveLink:L}):r.a.createElement(we,{user:o,userID:a,users:E,dimension:j,linkRef:w.profile,activeMainLink:D,setActiveMainLink:L})}}),r.a.createElement(U.a,{path:"/",render:function(){return g(!1),r.a.createElement(Fe,{className:"pt-5",profileLink:u(),user:o,userID:a,users:E,dimension:j,isWatch:!1,linkRef:w.home,activeLink:D,setActiveLink:L})}}))),r.a.createElement("div",null,c.error&&r.a.createElement("h4",null,c.error)))):r.a.createElement("div",null,"...Loading")},Ye=a(156),Me=function(e){var t=e.onHide,a=Object(n.useState)(""),c=Object(m.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(""),u=Object(m.a)(o,2),f=u[0],E=u[1];var b=Object(s.c)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Body,null,""!==f&&r.a.createElement(Ye.a,{variant:"danger"},f),r.a.createElement(d.a.Group,null,r.a.createElement(d.a.Label,null,"Please enter the email address associated to your account to receive a password reset email."),r.a.createElement(d.a.Control,{type:"email",placeholder:"Email",name:"email",size:"lg",onChange:function(e){e.preventDefault();var t=e.target;i(t.value)},value:l}))),r.a.createElement(k.a.Footer,null,r.a.createElement("hr",null),r.a.createElement(p.a,{variant:"light",onClick:t},r.a.createElement("b",null,"Cancel")),r.a.createElement(p.a,{variant:"primary",onClick:function(){b.auth().sendPasswordResetEmail(l).then((function(){t()})).catch((function(e){var t=e.message;E(t)}))}},r.a.createElement("b",{className:"px-2"},"Send"))))};var We=function(){var e=Object(s.i)().data,t=Object(n.useState)({email:"",password:"",error:""}),a=Object(m.a)(t,2),c=a[0],l=a[1];function i(e){l(Object(u.a)(Object(u.a)({},c),{},{error:e}))}function d(e,t){var a;l(Object(u.a)(Object(u.a)({},c),{},(a={},Object(o.a)(a,e,t),Object(o.a)(a,"error",""),a)))}var x=Object(n.useState)(!1),j=Object(m.a)(x,2),O=j[0],w=j[1];function y(){w(!1)}function N(){w(!0)}var I=e&&e.displayName&&e.displayName.trim().split(" ")||[],D=I.pop(),L=I.join(" "),C="/".concat(D,".").concat(L),P=Object(n.useState)(!0),R=Object(m.a)(P,2),S=R[0],z=R[1],U=Object(s.g)(),F=U.status,T=U.data;return"loading"===F?r.a.createElement("div",null,"...Loading"):!0===T.signedIn&&"Please verify your email before to continue"!==c.error?(e||window.location.reload(!1),e.emailVerified?r.a.createElement(He,{userID:e.uid,profileLink:C,userState:c}):r.a.createElement(r.a.Fragment,null)):r.a.createElement("div",{className:"bg-200 vw-100"},r.a.createElement(v.a,{className:"w-100 p-0",fluid:!0},r.a.createElement(f.a,{className:"vh-100 align-items-center"},r.a.createElement(E.a,{lg:{span:5,offset:1},className:"d-flex justify-content-center"},r.a.createElement(g,null)),r.a.createElement(E.a,{lg:5,className:"d-flex justify-content-center"},r.a.createElement("div",{className:"login p-3 bg-light"},r.a.createElement(h,{onError:i,onChange:d,user:c,onClickForgottenPswd:function(){z(!1),N()},disabled:!0}),r.a.createElement("hr",null),r.a.createElement(p.a,{variant:"success",size:"lg",className:"d-block w-60 mx-auto mt-4",onClick:N},r.a.createElement("b",null,"Create New Account")))),r.a.createElement(k.a,{show:O,onHide:y,onExited:function(){return z(!0)}},r.a.createElement(k.a.Header,{closeButton:S},r.a.createElement(k.a.Title,null,r.a.createElement("strong",{className:"fs-2"},S?"Sign Up":"Password Reset Email"),S&&r.a.createElement("div",{id:"title-footer"},"It's quick and easy."))),S?r.a.createElement(k.a.Body,null,r.a.createElement(b,{onError:i,onChange:d,onSubmit:y,user:c})):r.a.createElement(Me,{onHide:y})))))};l.a.render(r.a.createElement(s.a,{firebaseConfig:i},r.a.createElement(We,null)),document.getElementById("root"))}},[[119,7,8]]]);
//# sourceMappingURL=main.5f396203.chunk.js.map